var YO=Object.defineProperty;var XO=(t,e,n)=>e in t?YO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(XO(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function sk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tu={},JO={get exports(){return tu},set exports(t){tu=t}},Ep={},b={},ZO={get exports(){return b},set exports(t){b=t}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),eM=Symbol.for("react.portal"),tM=Symbol.for("react.fragment"),nM=Symbol.for("react.strict_mode"),iM=Symbol.for("react.profiler"),rM=Symbol.for("react.provider"),sM=Symbol.for("react.context"),oM=Symbol.for("react.forward_ref"),aM=Symbol.for("react.suspense"),lM=Symbol.for("react.memo"),cM=Symbol.for("react.lazy"),iI=Symbol.iterator;function uM(t){return t===null||typeof t!="object"?null:(t=iI&&t[iI]||t["@@iterator"],typeof t=="function"?t:null)}var ok={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ak=Object.assign,lk={};function vl(t,e,n){this.props=t,this.context=e,this.refs=lk,this.updater=n||ok}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ck(){}ck.prototype=vl.prototype;function Ow(t,e,n){this.props=t,this.context=e,this.refs=lk,this.updater=n||ok}var Mw=Ow.prototype=new ck;Mw.constructor=Ow;ak(Mw,vl.prototype);Mw.isPureReactComponent=!0;var rI=Array.isArray,uk=Object.prototype.hasOwnProperty,Lw={current:null},hk={key:!0,ref:!0,__self:!0,__source:!0};function dk(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uk.call(e,i)&&!hk.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Zu,type:t,key:s,ref:o,props:r,_owner:Lw.current}}function hM(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function dM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sI=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dM(""+t.key):e.toString(36)}function kd(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zu:case eM:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+qg(o,0):i,rI(r)?(n="",t!=null&&(n=t.replace(sI,"$&/")+"/"),kd(r,e,n,"",function(c){return c})):r!=null&&(Fw(r)&&(r=hM(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(sI,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",rI(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+qg(s,a);o+=kd(s,e,n,l,r)}else if(l=uM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+qg(s,a++),o+=kd(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mh(t,e,n){if(t==null)return t;var i=[],r=0;return kd(t,i,"","",function(s){return e.call(n,s,r++)}),i}function fM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},xd={transition:null},pM={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Lw};ce.Children={map:Mh,forEach:function(t,e,n){Mh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mh(t,function(){e++}),e},toArray:function(t){return Mh(t,function(e){return e})||[]},only:function(t){if(!Fw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=vl;ce.Fragment=tM;ce.Profiler=iM;ce.PureComponent=Ow;ce.StrictMode=nM;ce.Suspense=aM;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pM;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ak({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Lw.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uk.call(e,l)&&!hk.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Zu,type:t.type,key:r,ref:s,props:i,_owner:o}};ce.createContext=function(t){return t={$$typeof:sM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rM,_context:t},t.Consumer=t};ce.createElement=dk;ce.createFactory=function(t){var e=dk.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:oM,render:t}};ce.isValidElement=Fw;ce.lazy=function(t){return{$$typeof:cM,_payload:{_status:-1,_result:t},_init:fM}};ce.memo=function(t,e){return{$$typeof:lM,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(t,e){return gn.current.useCallback(t,e)};ce.useContext=function(t){return gn.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};ce.useEffect=function(t,e){return gn.current.useEffect(t,e)};ce.useId=function(){return gn.current.useId()};ce.useImperativeHandle=function(t,e,n){return gn.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return gn.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return gn.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return gn.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return gn.current.useReducer(t,e,n)};ce.useRef=function(t){return gn.current.useRef(t)};ce.useState=function(t){return gn.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return gn.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return gn.current.useTransition()};ce.version="18.2.0";(function(t){t.exports=ce})(ZO);const Oi=sk(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM=b,mM=Symbol.for("react.element"),yM=Symbol.for("react.fragment"),vM=Object.prototype.hasOwnProperty,wM=gM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_M={key:!0,ref:!0,__self:!0,__source:!0};function fk(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)vM.call(e,i)&&!_M.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:mM,type:t,key:s,ref:o,props:r,_owner:wM.current}}Ep.Fragment=yM;Ep.jsx=fk;Ep.jsxs=fk;(function(t){t.exports=Ep})(JO);const bM=tu.Fragment,N=tu.jsx,X=tu.jsxs;var yy={},Zd={},IM={get exports(){return Zd},set exports(t){Zd=t}},qn={},vy={},EM={get exports(){return vy},set exports(t){vy=t}},pk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,V){var K=O.length;O.push(V);e:for(;0<K;){var ue=K-1>>>1,Ie=O[ue];if(0<r(Ie,V))O[ue]=V,O[K]=Ie,K=ue;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],K=O.pop();if(K!==V){O[0]=K;e:for(var ue=0,Ie=O.length,lt=Ie>>>1;ue<lt;){var Ve=2*(ue+1)-1,Pe=O[Ve],R=Ve+1,re=O[R];if(0>r(Pe,K))R<Ie&&0>r(re,Pe)?(O[ue]=re,O[R]=K,ue=R):(O[ue]=Pe,O[Ve]=K,ue=Ve);else if(R<Ie&&0>r(re,K))O[ue]=re,O[R]=K,ue=R;else break e}}return V}function r(O,V){var K=O.sortIndex-V.sortIndex;return K!==0?K:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var V=n(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=O)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function _(O){if(g=!1,v(O),!p)if(n(l)!==null)p=!0,fe(I);else{var V=n(c);V!==null&&ie(_,V.startTime-O)}}function I(O,V){p=!1,g&&(g=!1,y(x),x=-1),f=!0;var K=d;try{for(v(V),h=n(l);h!==null&&(!(h.expirationTime>V)||O&&!G());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,d=h.priorityLevel;var Ie=ue(h.expirationTime<=V);V=t.unstable_now(),typeof Ie=="function"?h.callback=Ie:h===n(l)&&i(l),v(V)}else i(l);h=n(l)}if(h!==null)var lt=!0;else{var Ve=n(c);Ve!==null&&ie(_,Ve.startTime-V),lt=!1}return lt}finally{h=null,d=K,f=!1}}var E=!1,T=null,x=-1,$=5,M=-1;function G(){return!(t.unstable_now()-M<$)}function J(){if(T!==null){var O=t.unstable_now();M=O;var V=!0;try{V=T(!0,O)}finally{V?_e():(E=!1,T=null)}}else E=!1}var _e;if(typeof m=="function")_e=function(){m(J)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,se=Je.port2;Je.port1.onmessage=J,_e=function(){se.postMessage(null)}}else _e=function(){w(J,0)};function fe(O){T=O,E||(E=!0,_e())}function ie(O,V){x=w(function(){O(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,fe(I))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var K=d;d=V;try{return O()}finally{d=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=d;d=O;try{return V()}finally{d=K}},t.unstable_scheduleCallback=function(O,V,K){var ue=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ue+K:ue):K=ue,O){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=K+Ie,O={id:u++,callback:V,priorityLevel:O,startTime:K,expirationTime:Ie,sortIndex:-1},K>ue?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(g?(y(x),x=-1):g=!0,ie(_,K-ue))):(O.sortIndex=Ie,e(l,O),p||f||(p=!0,fe(I))),O},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(O){var V=d;return function(){var K=d;d=V;try{return O.apply(this,arguments)}finally{d=K}}}})(pk);(function(t){t.exports=pk})(EM);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=b,jn=vy;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mk=new Set,nu={};function Wo(t,e){Ka(t,e),Ka(t+"Capture",e)}function Ka(t,e){for(nu[t]=e,t=0;t<e.length;t++)mk.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wy=Object.prototype.hasOwnProperty,SM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oI={},aI={};function TM(t){return wy.call(aI,t)?!0:wy.call(oI,t)?!1:SM.test(t)?aI[t]=!0:(oI[t]=!0,!1)}function kM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xM(t,e,n,i){if(e===null||typeof e>"u"||kM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Uw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($w,Uw);Kt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($w,Uw);Kt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($w,Uw);Kt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vw(t,e,n,i){var r=Kt.hasOwnProperty(e)?Kt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xM(e,n,r,i)&&(n=null),i||r===null?TM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Er=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lh=Symbol.for("react.element"),pa=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),Bw=Symbol.for("react.strict_mode"),_y=Symbol.for("react.profiler"),yk=Symbol.for("react.provider"),vk=Symbol.for("react.context"),zw=Symbol.for("react.forward_ref"),by=Symbol.for("react.suspense"),Iy=Symbol.for("react.suspense_list"),jw=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),wk=Symbol.for("react.offscreen"),lI=Symbol.iterator;function Bl(t){return t===null||typeof t!="object"?null:(t=lI&&t[lI]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Kg;function hc(t){if(Kg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kg=e&&e[1]||""}return`
`+Kg+t}var Gg=!1;function Qg(t,e){if(!t||Gg)return"";Gg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hc(t):""}function CM(t){switch(t.tag){case 5:return hc(t.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return t=Qg(t.type,!1),t;case 11:return t=Qg(t.type.render,!1),t;case 1:return t=Qg(t.type,!0),t;default:return""}}function Ey(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case pa:return"Portal";case _y:return"Profiler";case Bw:return"StrictMode";case by:return"Suspense";case Iy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vk:return(t.displayName||"Context")+".Consumer";case yk:return(t._context.displayName||"Context")+".Provider";case zw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jw:return e=t.displayName||null,e!==null?e:Ey(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Ey(t(e))}catch{}}return null}function AM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ey(e);case 8:return e===Bw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _k(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DM(t){var e=_k(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fh(t){t._valueTracker||(t._valueTracker=DM(t))}function bk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=_k(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ef(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sy(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cI(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ik(t,e){e=e.checked,e!=null&&Vw(t,"checked",e,!1)}function Ty(t,e){Ik(t,e);var n=cs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ky(t,e.type,n):e.hasOwnProperty("defaultValue")&&ky(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ky(t,e,n){(e!=="number"||ef(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dc=Array.isArray;function Da(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(dc(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function Ek(t,e){var n=cs(e.value),i=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function dI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $h,Tk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($h=$h||document.createElement("div"),$h.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$h.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function iu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RM=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(t){RM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dc[e]=Dc[t]})});function kk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dc.hasOwnProperty(t)&&Dc[t]?(""+e).trim():e+"px"}function xk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=kk(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var PM=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ay(t,e){if(e){if(PM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Dy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ry=null;function Ww(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Py=null,Ra=null,Pa=null;function fI(t){if(t=nh(t)){if(typeof Py!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Cp(e),Py(t.stateNode,t.type,e))}}function Ck(t){Ra?Pa?Pa.push(t):Pa=[t]:Ra=t}function Ak(){if(Ra){var t=Ra,e=Pa;if(Pa=Ra=null,fI(t),e)for(t=0;t<e.length;t++)fI(e[t])}}function Dk(t,e){return t(e)}function Rk(){}var Yg=!1;function Pk(t,e,n){if(Yg)return t(e,n);Yg=!0;try{return Dk(t,e,n)}finally{Yg=!1,(Ra!==null||Pa!==null)&&(Rk(),Ak())}}function ru(t,e){var n=t.stateNode;if(n===null)return null;var i=Cp(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Ny=!1;if(mr)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){Ny=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{Ny=!1}function NM(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rc=!1,tf=null,nf=!1,Oy=null,OM={onError:function(t){Rc=!0,tf=t}};function MM(t,e,n,i,r,s,o,a,l){Rc=!1,tf=null,NM.apply(OM,arguments)}function LM(t,e,n,i,r,s,o,a,l){if(MM.apply(this,arguments),Rc){if(Rc){var c=tf;Rc=!1,tf=null}else throw Error(D(198));nf||(nf=!0,Oy=c)}}function Ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pI(t){if(Ho(t)!==t)throw Error(D(188))}function FM(t){var e=t.alternate;if(!e){if(e=Ho(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return pI(r),t;if(s===i)return pI(r),e;s=s.sibling}throw Error(D(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==i)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Ok(t){return t=FM(t),t!==null?Mk(t):null}function Mk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mk(t);if(e!==null)return e;t=t.sibling}return null}var Lk=jn.unstable_scheduleCallback,gI=jn.unstable_cancelCallback,$M=jn.unstable_shouldYield,UM=jn.unstable_requestPaint,ct=jn.unstable_now,VM=jn.unstable_getCurrentPriorityLevel,Hw=jn.unstable_ImmediatePriority,Fk=jn.unstable_UserBlockingPriority,rf=jn.unstable_NormalPriority,BM=jn.unstable_LowPriority,$k=jn.unstable_IdlePriority,Sp=null,Vi=null;function zM(t){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(Sp,t,void 0,(t.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:HM,jM=Math.log,WM=Math.LN2;function HM(t){return t>>>=0,t===0?32:31-(jM(t)/WM|0)|0}var Uh=64,Vh=4194304;function fc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sf(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=fc(a):(s&=o,s!==0&&(i=fc(s)))}else o=n&~r,o!==0?i=fc(o):s!==0&&(i=fc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yi(e),r=1<<n,i|=t[n],e&=~r;return i}function qM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KM(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-yi(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=qM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function My(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uk(){var t=Uh;return Uh<<=1,!(Uh&4194240)&&(Uh=64),t}function Xg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yi(e),t[e]=n}function GM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-yi(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function qw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var xe=0;function Vk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bk,Kw,zk,jk,Wk,Ly=!1,Bh=[],Xr=null,Jr=null,Zr=null,su=new Map,ou=new Map,Ur=[],QM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mI(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(e.pointerId)}}function jl(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=nh(e),e!==null&&Kw(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YM(t,e,n,i,r){switch(e){case"focusin":return Xr=jl(Xr,t,e,n,i,r),!0;case"dragenter":return Jr=jl(Jr,t,e,n,i,r),!0;case"mouseover":return Zr=jl(Zr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return su.set(s,jl(su.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ou.set(s,jl(ou.get(s)||null,t,e,n,i,r)),!0}return!1}function Hk(t){var e=no(t.target);if(e!==null){var n=Ho(e);if(n!==null){if(e=n.tag,e===13){if(e=Nk(n),e!==null){t.blockedOn=e,Wk(t.priority,function(){zk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ry=i,n.target.dispatchEvent(i),Ry=null}else return e=nh(n),e!==null&&Kw(e),t.blockedOn=n,!1;e.shift()}return!0}function yI(t,e,n){Cd(t)&&n.delete(e)}function XM(){Ly=!1,Xr!==null&&Cd(Xr)&&(Xr=null),Jr!==null&&Cd(Jr)&&(Jr=null),Zr!==null&&Cd(Zr)&&(Zr=null),su.forEach(yI),ou.forEach(yI)}function Wl(t,e){t.blockedOn===e&&(t.blockedOn=null,Ly||(Ly=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,XM)))}function au(t){function e(r){return Wl(r,t)}if(0<Bh.length){Wl(Bh[0],t);for(var n=1;n<Bh.length;n++){var i=Bh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xr!==null&&Wl(Xr,t),Jr!==null&&Wl(Jr,t),Zr!==null&&Wl(Zr,t),su.forEach(e),ou.forEach(e),n=0;n<Ur.length;n++)i=Ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)Hk(n),n.blockedOn===null&&Ur.shift()}var Na=Er.ReactCurrentBatchConfig,of=!0;function JM(t,e,n,i){var r=xe,s=Na.transition;Na.transition=null;try{xe=1,Gw(t,e,n,i)}finally{xe=r,Na.transition=s}}function ZM(t,e,n,i){var r=xe,s=Na.transition;Na.transition=null;try{xe=4,Gw(t,e,n,i)}finally{xe=r,Na.transition=s}}function Gw(t,e,n,i){if(of){var r=Fy(t,e,n,i);if(r===null)am(t,e,i,af,n),mI(t,i);else if(YM(r,t,e,n,i))i.stopPropagation();else if(mI(t,i),e&4&&-1<QM.indexOf(t)){for(;r!==null;){var s=nh(r);if(s!==null&&Bk(s),s=Fy(t,e,n,i),s===null&&am(t,e,i,af,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else am(t,e,i,null,n)}}var af=null;function Fy(t,e,n,i){if(af=null,t=Ww(i),t=no(t),t!==null)if(e=Ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return af=t,null}function qk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VM()){case Hw:return 1;case Fk:return 4;case rf:case BM:return 16;case $k:return 536870912;default:return 16}default:return 16}}var jr=null,Qw=null,Ad=null;function Kk(){if(Ad)return Ad;var t,e=Qw,n=e.length,i,r="value"in jr?jr.value:jr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ad=r.slice(t,1<i?1-i:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zh(){return!0}function vI(){return!1}function Kn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zh:vI,this.isPropagationStopped=vI,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zh)},persist:function(){},isPersistent:zh}),e}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yw=Kn(wl),th=Ye({},wl,{view:0,detail:0}),eL=Kn(th),Jg,Zg,Hl,Tp=Ye({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hl&&(Hl&&t.type==="mousemove"?(Jg=t.screenX-Hl.screenX,Zg=t.screenY-Hl.screenY):Zg=Jg=0,Hl=t),Jg)},movementY:function(t){return"movementY"in t?t.movementY:Zg}}),wI=Kn(Tp),tL=Ye({},Tp,{dataTransfer:0}),nL=Kn(tL),iL=Ye({},th,{relatedTarget:0}),em=Kn(iL),rL=Ye({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),sL=Kn(rL),oL=Ye({},wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aL=Kn(oL),lL=Ye({},wl,{data:0}),_I=Kn(lL),cL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hL[t])?!!e[t]:!1}function Xw(){return dL}var fL=Ye({},th,{key:function(t){if(t.key){var e=cL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xw,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pL=Kn(fL),gL=Ye({},Tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bI=Kn(gL),mL=Ye({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xw}),yL=Kn(mL),vL=Ye({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),wL=Kn(vL),_L=Ye({},Tp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bL=Kn(_L),IL=[9,13,27,32],Jw=mr&&"CompositionEvent"in window,Pc=null;mr&&"documentMode"in document&&(Pc=document.documentMode);var EL=mr&&"TextEvent"in window&&!Pc,Gk=mr&&(!Jw||Pc&&8<Pc&&11>=Pc),II=String.fromCharCode(32),EI=!1;function Qk(t,e){switch(t){case"keyup":return IL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function SL(t,e){switch(t){case"compositionend":return Yk(e);case"keypress":return e.which!==32?null:(EI=!0,II);case"textInput":return t=e.data,t===II&&EI?null:t;default:return null}}function TL(t,e){if(ma)return t==="compositionend"||!Jw&&Qk(t,e)?(t=Kk(),Ad=Qw=jr=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gk&&e.locale!=="ko"?null:e.data;default:return null}}var kL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kL[t.type]:e==="textarea"}function Xk(t,e,n,i){Ck(i),e=lf(e,"onChange"),0<e.length&&(n=new Yw("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Nc=null,lu=null;function xL(t){lx(t,0)}function kp(t){var e=wa(t);if(bk(e))return t}function CL(t,e){if(t==="change")return e}var Jk=!1;if(mr){var tm;if(mr){var nm="oninput"in document;if(!nm){var TI=document.createElement("div");TI.setAttribute("oninput","return;"),nm=typeof TI.oninput=="function"}tm=nm}else tm=!1;Jk=tm&&(!document.documentMode||9<document.documentMode)}function kI(){Nc&&(Nc.detachEvent("onpropertychange",Zk),lu=Nc=null)}function Zk(t){if(t.propertyName==="value"&&kp(lu)){var e=[];Xk(e,lu,t,Ww(t)),Pk(xL,e)}}function AL(t,e,n){t==="focusin"?(kI(),Nc=e,lu=n,Nc.attachEvent("onpropertychange",Zk)):t==="focusout"&&kI()}function DL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(lu)}function RL(t,e){if(t==="click")return kp(e)}function PL(t,e){if(t==="input"||t==="change")return kp(e)}function NL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wi=typeof Object.is=="function"?Object.is:NL;function cu(t,e){if(wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wy.call(e,r)||!wi(t[r],e[r]))return!1}return!0}function xI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CI(t,e){var n=xI(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xI(n)}}function ex(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ex(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tx(){for(var t=window,e=ef();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ef(t.document)}return e}function Zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OL(t){var e=tx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ex(n.ownerDocument.documentElement,n)){if(i!==null&&Zw(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=CI(n,s);var o=CI(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ML=mr&&"documentMode"in document&&11>=document.documentMode,ya=null,$y=null,Oc=null,Uy=!1;function AI(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uy||ya==null||ya!==ef(i)||(i=ya,"selectionStart"in i&&Zw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Oc&&cu(Oc,i)||(Oc=i,i=lf($y,"onSelect"),0<i.length&&(e=new Yw("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ya)))}function jh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var va={animationend:jh("Animation","AnimationEnd"),animationiteration:jh("Animation","AnimationIteration"),animationstart:jh("Animation","AnimationStart"),transitionend:jh("Transition","TransitionEnd")},im={},nx={};mr&&(nx=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function xp(t){if(im[t])return im[t];if(!va[t])return t;var e=va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nx)return im[t]=e[n];return t}var ix=xp("animationend"),rx=xp("animationiteration"),sx=xp("animationstart"),ox=xp("transitionend"),ax=new Map,DI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(t,e){ax.set(t,e),Wo(e,[t])}for(var rm=0;rm<DI.length;rm++){var sm=DI[rm],LL=sm.toLowerCase(),FL=sm[0].toUpperCase()+sm.slice(1);Ts(LL,"on"+FL)}Ts(ix,"onAnimationEnd");Ts(rx,"onAnimationIteration");Ts(sx,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(ox,"onTransitionEnd");Ka("onMouseEnter",["mouseout","mouseover"]);Ka("onMouseLeave",["mouseout","mouseover"]);Ka("onPointerEnter",["pointerout","pointerover"]);Ka("onPointerLeave",["pointerout","pointerover"]);Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$L=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function RI(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,LM(i,e,void 0,t),t.currentTarget=null}function lx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;RI(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;RI(r,a,c),s=l}}}if(nf)throw t=Oy,nf=!1,Oy=null,t}function Me(t,e){var n=e[Wy];n===void 0&&(n=e[Wy]=new Set);var i=t+"__bubble";n.has(i)||(cx(e,t,2,!1),n.add(i))}function om(t,e,n){var i=0;e&&(i|=4),cx(n,t,i,e)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function uu(t){if(!t[Wh]){t[Wh]=!0,mk.forEach(function(n){n!=="selectionchange"&&($L.has(n)||om(n,!1,t),om(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wh]||(e[Wh]=!0,om("selectionchange",!1,e))}}function cx(t,e,n,i){switch(qk(e)){case 1:var r=JM;break;case 4:r=ZM;break;default:r=Gw}n=r.bind(null,e,n,t),r=void 0,!Ny||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function am(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=no(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Pk(function(){var c=s,u=Ww(n),h=[];e:{var d=ax.get(t);if(d!==void 0){var f=Yw,p=t;switch(t){case"keypress":if(Dd(n)===0)break e;case"keydown":case"keyup":f=pL;break;case"focusin":p="focus",f=em;break;case"focusout":p="blur",f=em;break;case"beforeblur":case"afterblur":f=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=wI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=nL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=yL;break;case ix:case rx:case sx:f=sL;break;case ox:f=wL;break;case"scroll":f=eL;break;case"wheel":f=bL;break;case"copy":case"cut":case"paste":f=aL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=bI}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,v;m!==null;){v=m;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=ru(m,y),_!=null&&g.push(hu(m,_,v)))),w)break;m=m.return}0<g.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Ry&&(p=n.relatedTarget||n.fromElement)&&(no(p)||p[yr]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?no(p):null,p!==null&&(w=Ho(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=wI,_="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=bI,_="onPointerLeave",y="onPointerEnter",m="pointer"),w=f==null?d:wa(f),v=p==null?d:wa(p),d=new g(_,m+"leave",f,n,u),d.target=w,d.relatedTarget=v,_=null,no(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=v,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,m=0,v=g;v;v=na(v))m++;for(v=0,_=y;_;_=na(_))v++;for(;0<m-v;)g=na(g),m--;for(;0<v-m;)y=na(y),v--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=na(g),y=na(y)}g=null}else g=null;f!==null&&PI(h,d,f,g,!1),p!==null&&w!==null&&PI(h,w,p,g,!0)}}e:{if(d=c?wa(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var I=CL;else if(SI(d))if(Jk)I=PL;else{I=DL;var E=AL}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=RL);if(I&&(I=I(t,c))){Xk(h,I,n,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&ky(d,"number",d.value)}switch(E=c?wa(c):window,t){case"focusin":(SI(E)||E.contentEditable==="true")&&(ya=E,$y=c,Oc=null);break;case"focusout":Oc=$y=ya=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,AI(h,n,u);break;case"selectionchange":if(ML)break;case"keydown":case"keyup":AI(h,n,u)}var T;if(Jw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ma?Qk(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Gk&&n.locale!=="ko"&&(ma||x!=="onCompositionStart"?x==="onCompositionEnd"&&ma&&(T=Kk()):(jr=u,Qw="value"in jr?jr.value:jr.textContent,ma=!0)),E=lf(c,x),0<E.length&&(x=new _I(x,t,null,n,u),h.push({event:x,listeners:E}),T?x.data=T:(T=Yk(n),T!==null&&(x.data=T)))),(T=EL?SL(t,n):TL(t,n))&&(c=lf(c,"onBeforeInput"),0<c.length&&(u=new _I("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}lx(h,e)})}function hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ru(t,n),s!=null&&i.unshift(hu(t,s,r)),s=ru(t,e),s!=null&&i.push(hu(t,s,r))),t=t.return}return i}function na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PI(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ru(n,s),l!=null&&o.unshift(hu(n,l,a))):r||(l=ru(n,s),l!=null&&o.push(hu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UL=/\r\n?/g,VL=/\u0000|\uFFFD/g;function NI(t){return(typeof t=="string"?t:""+t).replace(UL,`
`).replace(VL,"")}function Hh(t,e,n){if(e=NI(e),NI(t)!==e&&n)throw Error(D(425))}function cf(){}var Vy=null,By=null;function zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jy=typeof setTimeout=="function"?setTimeout:void 0,BL=typeof clearTimeout=="function"?clearTimeout:void 0,OI=typeof Promise=="function"?Promise:void 0,zL=typeof queueMicrotask=="function"?queueMicrotask:typeof OI<"u"?function(t){return OI.resolve(null).then(t).catch(jL)}:jy;function jL(t){setTimeout(function(){throw t})}function lm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),au(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);au(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function MI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _l=Math.random().toString(36).slice(2),Ci="__reactFiber$"+_l,du="__reactProps$"+_l,yr="__reactContainer$"+_l,Wy="__reactEvents$"+_l,WL="__reactListeners$"+_l,HL="__reactHandles$"+_l;function no(t){var e=t[Ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=MI(t);t!==null;){if(n=t[Ci])return n;t=MI(t)}return e}t=n,n=t.parentNode}return null}function nh(t){return t=t[Ci]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Cp(t){return t[du]||null}var Hy=[],_a=-1;function ks(t){return{current:t}}function Fe(t){0>_a||(t.current=Hy[_a],Hy[_a]=null,_a--)}function De(t,e){_a++,Hy[_a]=t.current,t.current=e}var us={},nn=ks(us),An=ks(!1),_o=us;function Ga(t,e){var n=t.type.contextTypes;if(!n)return us;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Dn(t){return t=t.childContextTypes,t!=null}function uf(){Fe(An),Fe(nn)}function LI(t,e,n){if(nn.current!==us)throw Error(D(168));De(nn,e),De(An,n)}function ux(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(D(108,AM(t)||"Unknown",r));return Ye({},n,i)}function hf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,_o=nn.current,De(nn,t),De(An,An.current),!0}function FI(t,e,n){var i=t.stateNode;if(!i)throw Error(D(169));n?(t=ux(t,e,_o),i.__reactInternalMemoizedMergedChildContext=t,Fe(An),Fe(nn),De(nn,t)):Fe(An),De(An,n)}var ir=null,Ap=!1,cm=!1;function hx(t){ir===null?ir=[t]:ir.push(t)}function qL(t){Ap=!0,hx(t)}function xs(){if(!cm&&ir!==null){cm=!0;var t=0,e=xe;try{var n=ir;for(xe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ir=null,Ap=!1}catch(r){throw ir!==null&&(ir=ir.slice(t+1)),Lk(Hw,xs),r}finally{xe=e,cm=!1}}return null}var ba=[],Ia=0,df=null,ff=0,Xn=[],Jn=0,bo=null,sr=1,or="";function Ws(t,e){ba[Ia++]=ff,ba[Ia++]=df,df=t,ff=e}function dx(t,e,n){Xn[Jn++]=sr,Xn[Jn++]=or,Xn[Jn++]=bo,bo=t;var i=sr;t=or;var r=32-yi(i)-1;i&=~(1<<r),n+=1;var s=32-yi(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,sr=1<<32-yi(e)+r|n<<r|i,or=s+t}else sr=1<<s|n<<r|i,or=t}function e0(t){t.return!==null&&(Ws(t,1),dx(t,1,0))}function t0(t){for(;t===df;)df=ba[--Ia],ba[Ia]=null,ff=ba[--Ia],ba[Ia]=null;for(;t===bo;)bo=Xn[--Jn],Xn[Jn]=null,or=Xn[--Jn],Xn[Jn]=null,sr=Xn[--Jn],Xn[Jn]=null}var zn=null,Vn=null,je=!1,fi=null;function fx(t,e){var n=ei(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $I(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,Vn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bo!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ei(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,Vn=null,!0):!1;default:return!1}}function qy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(je){var e=Vn;if(e){var n=e;if(!$I(t,e)){if(qy(t))throw Error(D(418));e=es(n.nextSibling);var i=zn;e&&$I(t,e)?fx(i,n):(t.flags=t.flags&-4097|2,je=!1,zn=t)}}else{if(qy(t))throw Error(D(418));t.flags=t.flags&-4097|2,je=!1,zn=t}}}function UI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function qh(t){if(t!==zn)return!1;if(!je)return UI(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zy(t.type,t.memoizedProps)),e&&(e=Vn)){if(qy(t))throw px(),Error(D(418));for(;e;)fx(t,e),e=es(e.nextSibling)}if(UI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=zn?es(t.stateNode.nextSibling):null;return!0}function px(){for(var t=Vn;t;)t=es(t.nextSibling)}function Qa(){Vn=zn=null,je=!1}function n0(t){fi===null?fi=[t]:fi.push(t)}var KL=Er.ReactCurrentBatchConfig;function hi(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var pf=ks(null),gf=null,Ea=null,i0=null;function r0(){i0=Ea=gf=null}function s0(t){var e=pf.current;Fe(pf),t._currentValue=e}function Gy(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Oa(t,e){gf=t,i0=Ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function si(t){var e=t._currentValue;if(i0!==t)if(t={context:t,memoizedValue:e,next:null},Ea===null){if(gf===null)throw Error(D(308));Ea=t,gf.dependencies={lanes:0,firstContext:t}}else Ea=Ea.next=t;return e}var io=null;function o0(t){io===null?io=[t]:io.push(t)}function gx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,o0(e)):(n.next=r.next,r.next=n),e.interleaved=n,vr(t,i)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function a0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,vr(t,n)}return r=i.interleaved,r===null?(e.next=e,o0(i)):(e.next=r.next,r.next=e),i.interleaved=e,vr(t,n)}function Rd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qw(t,n)}}function VI(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mf(t,e,n,i){var r=t.updateQueue;$r=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ye({},h,d);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Eo|=o,t.lanes=o,t.memoizedState=h}}function BI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(D(191,r));r.call(i)}}}var yx=new gk.Component().refs;function Qy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dp={isMounted:function(t){return(t=t._reactInternals)?Ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=is(t),s=dr(i,r);s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,r),e!==null&&(vi(e,t,r,i),Rd(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=is(t),s=dr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,r),e!==null&&(vi(e,t,r,i),Rd(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=is(t),r=dr(n,i);r.tag=2,e!=null&&(r.callback=e),e=ts(t,r,i),e!==null&&(vi(e,t,i,n),Rd(e,t,i))}};function zI(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!cu(n,i)||!cu(r,s):!0}function vx(t,e,n){var i=!1,r=us,s=e.contextType;return typeof s=="object"&&s!==null?s=si(s):(r=Dn(e)?_o:nn.current,i=e.contextTypes,s=(i=i!=null)?Ga(t,r):us),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dp,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function jI(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Dp.enqueueReplaceState(e,e.state,null)}function Yy(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=yx,a0(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=si(s):(s=Dn(e)?_o:nn.current,r.context=Ga(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qy(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Dp.enqueueReplaceState(r,r.state,null),mf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ql(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var i=n.stateNode}if(!i)throw Error(D(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===yx&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Kh(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WI(t){var e=t._init;return e(t._payload)}function wx(t){function e(y,m){if(t){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function i(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function r(y,m){return y=rs(y,m),y.index=0,y.sibling=null,y}function s(y,m,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,_){return m===null||m.tag!==6?(m=mm(v,y.mode,_),m.return=y,m):(m=r(m,v),m.return=y,m)}function l(y,m,v,_){var I=v.type;return I===ga?u(y,m,v.props.children,_,v.key):m!==null&&(m.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Fr&&WI(I)===m.type)?(_=r(m,v.props),_.ref=ql(y,m,v),_.return=y,_):(_=Fd(v.type,v.key,v.props,null,y.mode,_),_.ref=ql(y,m,v),_.return=y,_)}function c(y,m,v,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=ym(v,y.mode,_),m.return=y,m):(m=r(m,v.children||[]),m.return=y,m)}function u(y,m,v,_,I){return m===null||m.tag!==7?(m=fo(v,y.mode,_,I),m.return=y,m):(m=r(m,v),m.return=y,m)}function h(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=mm(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Lh:return v=Fd(m.type,m.key,m.props,null,y.mode,v),v.ref=ql(y,null,m),v.return=y,v;case pa:return m=ym(m,y.mode,v),m.return=y,m;case Fr:var _=m._init;return h(y,_(m._payload),v)}if(dc(m)||Bl(m))return m=fo(m,y.mode,v,null),m.return=y,m;Kh(y,m)}return null}function d(y,m,v,_){var I=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return I!==null?null:a(y,m,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lh:return v.key===I?l(y,m,v,_):null;case pa:return v.key===I?c(y,m,v,_):null;case Fr:return I=v._init,d(y,m,I(v._payload),_)}if(dc(v)||Bl(v))return I!==null?null:u(y,m,v,_,null);Kh(y,v)}return null}function f(y,m,v,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,a(m,y,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lh:return y=y.get(_.key===null?v:_.key)||null,l(m,y,_,I);case pa:return y=y.get(_.key===null?v:_.key)||null,c(m,y,_,I);case Fr:var E=_._init;return f(y,m,v,E(_._payload),I)}if(dc(_)||Bl(_))return y=y.get(v)||null,u(m,y,_,I,null);Kh(m,_)}return null}function p(y,m,v,_){for(var I=null,E=null,T=m,x=m=0,$=null;T!==null&&x<v.length;x++){T.index>x?($=T,T=null):$=T.sibling;var M=d(y,T,v[x],_);if(M===null){T===null&&(T=$);break}t&&T&&M.alternate===null&&e(y,T),m=s(M,m,x),E===null?I=M:E.sibling=M,E=M,T=$}if(x===v.length)return n(y,T),je&&Ws(y,x),I;if(T===null){for(;x<v.length;x++)T=h(y,v[x],_),T!==null&&(m=s(T,m,x),E===null?I=T:E.sibling=T,E=T);return je&&Ws(y,x),I}for(T=i(y,T);x<v.length;x++)$=f(T,y,x,v[x],_),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?x:$.key),m=s($,m,x),E===null?I=$:E.sibling=$,E=$);return t&&T.forEach(function(G){return e(y,G)}),je&&Ws(y,x),I}function g(y,m,v,_){var I=Bl(v);if(typeof I!="function")throw Error(D(150));if(v=I.call(v),v==null)throw Error(D(151));for(var E=I=null,T=m,x=m=0,$=null,M=v.next();T!==null&&!M.done;x++,M=v.next()){T.index>x?($=T,T=null):$=T.sibling;var G=d(y,T,M.value,_);if(G===null){T===null&&(T=$);break}t&&T&&G.alternate===null&&e(y,T),m=s(G,m,x),E===null?I=G:E.sibling=G,E=G,T=$}if(M.done)return n(y,T),je&&Ws(y,x),I;if(T===null){for(;!M.done;x++,M=v.next())M=h(y,M.value,_),M!==null&&(m=s(M,m,x),E===null?I=M:E.sibling=M,E=M);return je&&Ws(y,x),I}for(T=i(y,T);!M.done;x++,M=v.next())M=f(T,y,x,M.value,_),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?x:M.key),m=s(M,m,x),E===null?I=M:E.sibling=M,E=M);return t&&T.forEach(function(J){return e(y,J)}),je&&Ws(y,x),I}function w(y,m,v,_){if(typeof v=="object"&&v!==null&&v.type===ga&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lh:e:{for(var I=v.key,E=m;E!==null;){if(E.key===I){if(I=v.type,I===ga){if(E.tag===7){n(y,E.sibling),m=r(E,v.props.children),m.return=y,y=m;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Fr&&WI(I)===E.type){n(y,E.sibling),m=r(E,v.props),m.ref=ql(y,E,v),m.return=y,y=m;break e}n(y,E);break}else e(y,E);E=E.sibling}v.type===ga?(m=fo(v.props.children,y.mode,_,v.key),m.return=y,y=m):(_=Fd(v.type,v.key,v.props,null,y.mode,_),_.ref=ql(y,m,v),_.return=y,y=_)}return o(y);case pa:e:{for(E=v.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(y,m.sibling),m=r(m,v.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else e(y,m);m=m.sibling}m=ym(v,y.mode,_),m.return=y,y=m}return o(y);case Fr:return E=v._init,w(y,m,E(v._payload),_)}if(dc(v))return p(y,m,v,_);if(Bl(v))return g(y,m,v,_);Kh(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(y,m.sibling),m=r(m,v),m.return=y,y=m):(n(y,m),m=mm(v,y.mode,_),m.return=y,y=m),o(y)):n(y,m)}return w}var Ya=wx(!0),_x=wx(!1),ih={},Bi=ks(ih),fu=ks(ih),pu=ks(ih);function ro(t){if(t===ih)throw Error(D(174));return t}function l0(t,e){switch(De(pu,e),De(fu,t),De(Bi,ih),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cy(e,t)}Fe(Bi),De(Bi,e)}function Xa(){Fe(Bi),Fe(fu),Fe(pu)}function bx(t){ro(pu.current);var e=ro(Bi.current),n=Cy(e,t.type);e!==n&&(De(fu,t),De(Bi,n))}function c0(t){fu.current===t&&(Fe(Bi),Fe(fu))}var Ke=ks(0);function yf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var um=[];function u0(){for(var t=0;t<um.length;t++)um[t]._workInProgressVersionPrimary=null;um.length=0}var Pd=Er.ReactCurrentDispatcher,hm=Er.ReactCurrentBatchConfig,Io=0,Qe=null,_t=null,xt=null,vf=!1,Mc=!1,gu=0,GL=0;function Yt(){throw Error(D(321))}function h0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wi(t[n],e[n]))return!1;return!0}function d0(t,e,n,i,r,s){if(Io=s,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pd.current=t===null||t.memoizedState===null?JL:ZL,t=n(i,r),Mc){s=0;do{if(Mc=!1,gu=0,25<=s)throw Error(D(301));s+=1,xt=_t=null,e.updateQueue=null,Pd.current=e2,t=n(i,r)}while(Mc)}if(Pd.current=wf,e=_t!==null&&_t.next!==null,Io=0,xt=_t=Qe=null,vf=!1,e)throw Error(D(300));return t}function f0(){var t=gu!==0;return gu=0,t}function Ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Qe.memoizedState=xt=t:xt=xt.next=t,xt}function oi(){if(_t===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=xt===null?Qe.memoizedState:xt.next;if(e!==null)xt=e,_t=t;else{if(t===null)throw Error(D(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},xt===null?Qe.memoizedState=xt=t:xt=xt.next=t}return xt}function mu(t,e){return typeof e=="function"?e(t):e}function dm(t){var e=oi(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Io&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Qe.lanes|=u,Eo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,wi(i,e.memoizedState)||(Tn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Qe.lanes|=s,Eo|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fm(t){var e=oi(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);wi(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ix(){}function Ex(t,e){var n=Qe,i=oi(),r=e(),s=!wi(i.memoizedState,r);if(s&&(i.memoizedState=r,Tn=!0),i=i.queue,p0(kx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,yu(9,Tx.bind(null,n,i,r,e),void 0,null),Dt===null)throw Error(D(349));Io&30||Sx(n,e,r)}return r}function Sx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tx(t,e,n,i){e.value=n,e.getSnapshot=i,xx(e)&&Cx(t)}function kx(t,e,n){return n(function(){xx(e)&&Cx(t)})}function xx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wi(t,n)}catch{return!0}}function Cx(t){var e=vr(t,1);e!==null&&vi(e,t,1,-1)}function HI(t){var e=Ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:t},e.queue=t,t=t.dispatch=XL.bind(null,Qe,t),[e.memoizedState,t]}function yu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ax(){return oi().memoizedState}function Nd(t,e,n,i){var r=Ti();Qe.flags|=t,r.memoizedState=yu(1|e,n,void 0,i===void 0?null:i)}function Rp(t,e,n,i){var r=oi();i=i===void 0?null:i;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,i!==null&&h0(i,o.deps)){r.memoizedState=yu(e,n,s,i);return}}Qe.flags|=t,r.memoizedState=yu(1|e,n,s,i)}function qI(t,e){return Nd(8390656,8,t,e)}function p0(t,e){return Rp(2048,8,t,e)}function Dx(t,e){return Rp(4,2,t,e)}function Rx(t,e){return Rp(4,4,t,e)}function Px(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nx(t,e,n){return n=n!=null?n.concat([t]):null,Rp(4,4,Px.bind(null,e,t),n)}function g0(){}function Ox(t,e){var n=oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&h0(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Mx(t,e){var n=oi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&h0(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Lx(t,e,n){return Io&21?(wi(n,e)||(n=Uk(),Qe.lanes|=n,Eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function QL(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var i=hm.transition;hm.transition={};try{t(!1),e()}finally{xe=n,hm.transition=i}}function Fx(){return oi().memoizedState}function YL(t,e,n){var i=is(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$x(t))Ux(e,n);else if(n=gx(t,e,n,i),n!==null){var r=hn();vi(n,t,i,r),Vx(n,e,i)}}function XL(t,e,n){var i=is(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($x(t))Ux(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,wi(a,o)){var l=e.interleaved;l===null?(r.next=r,o0(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=gx(t,e,r,i),n!==null&&(r=hn(),vi(n,t,i,r),Vx(n,e,i))}}function $x(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function Ux(t,e){Mc=vf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qw(t,n)}}var wf={readContext:si,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},JL={readContext:si,useCallback:function(t,e){return Ti().memoizedState=[t,e===void 0?null:e],t},useContext:si,useEffect:qI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nd(4194308,4,Px.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nd(4,2,t,e)},useMemo:function(t,e){var n=Ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ti();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YL.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Ti();return t={current:t},e.memoizedState=t},useState:HI,useDebugValue:g0,useDeferredValue:function(t){return Ti().memoizedState=t},useTransition:function(){var t=HI(!1),e=t[0];return t=QL.bind(null,t[1]),Ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=Ti();if(je){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Dt===null)throw Error(D(349));Io&30||Sx(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,qI(kx.bind(null,i,s,t),[t]),i.flags|=2048,yu(9,Tx.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ti(),e=Dt.identifierPrefix;if(je){var n=or,i=sr;n=(i&~(1<<32-yi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=gu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZL={readContext:si,useCallback:Ox,useContext:si,useEffect:p0,useImperativeHandle:Nx,useInsertionEffect:Dx,useLayoutEffect:Rx,useMemo:Mx,useReducer:dm,useRef:Ax,useState:function(){return dm(mu)},useDebugValue:g0,useDeferredValue:function(t){var e=oi();return Lx(e,_t.memoizedState,t)},useTransition:function(){var t=dm(mu)[0],e=oi().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ex,useId:Fx,unstable_isNewReconciler:!1},e2={readContext:si,useCallback:Ox,useContext:si,useEffect:p0,useImperativeHandle:Nx,useInsertionEffect:Dx,useLayoutEffect:Rx,useMemo:Mx,useReducer:fm,useRef:Ax,useState:function(){return fm(mu)},useDebugValue:g0,useDeferredValue:function(t){var e=oi();return _t===null?e.memoizedState=t:Lx(e,_t.memoizedState,t)},useTransition:function(){var t=fm(mu)[0],e=oi().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Ex,useId:Fx,unstable_isNewReconciler:!1};function Ja(t,e){try{var n="",i=e;do n+=CM(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t2=typeof WeakMap=="function"?WeakMap:Map;function Bx(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){bf||(bf=!0,av=i),Xy(t,e)},n}function zx(t,e,n){n=dr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Xy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xy(t,e),typeof i!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function KI(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new t2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=g2.bind(null,t,e,n),e.then(t,t))}function GI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QI(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var n2=Er.ReactCurrentOwner,Tn=!1;function an(t,e,n,i){e.child=t===null?_x(e,null,n,i):Ya(e,t.child,n,i)}function YI(t,e,n,i,r){n=n.render;var s=e.ref;return Oa(e,r),i=d0(t,e,n,i,s,r),n=f0(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,wr(t,e,r)):(je&&n&&e0(e),e.flags|=1,an(t,e,i,r),e.child)}function XI(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!E0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jx(t,e,s,i,r)):(t=Fd(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cu,n(o,i)&&t.ref===e.ref)return wr(t,e,r)}return e.flags|=1,t=rs(s,i),t.ref=e.ref,t.return=e,e.child=t}function jx(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(cu(s,i)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,wr(t,e,r)}return Jy(t,e,n,i,r)}function Wx(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ta,$n),$n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ta,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,De(Ta,$n),$n|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,De(Ta,$n),$n|=i;return an(t,e,r,n),e.child}function Hx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jy(t,e,n,i,r){var s=Dn(n)?_o:nn.current;return s=Ga(e,s),Oa(e,r),n=d0(t,e,n,i,s,r),i=f0(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,wr(t,e,r)):(je&&i&&e0(e),e.flags|=1,an(t,e,n,r),e.child)}function JI(t,e,n,i,r){if(Dn(n)){var s=!0;hf(e)}else s=!1;if(Oa(e,r),e.stateNode===null)Od(t,e),vx(e,n,i),Yy(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=si(c):(c=Dn(n)?_o:nn.current,c=Ga(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&jI(e,o,i,c),$r=!1;var d=e.memoizedState;o.state=d,mf(e,i,o,r),l=e.memoizedState,a!==i||d!==l||An.current||$r?(typeof u=="function"&&(Qy(e,n,u,i),l=e.memoizedState),(a=$r||zI(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,mx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hi(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=si(l):(l=Dn(n)?_o:nn.current,l=Ga(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&jI(e,o,i,l),$r=!1,d=e.memoizedState,o.state=d,mf(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||An.current||$r?(typeof f=="function"&&(Qy(e,n,f,i),p=e.memoizedState),(c=$r||zI(e,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Zy(t,e,n,i,s,r)}function Zy(t,e,n,i,r,s){Hx(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&FI(e,n,!1),wr(t,e,s);i=e.stateNode,n2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ya(e,t.child,null,s),e.child=Ya(e,null,a,s)):an(t,e,a,s),e.memoizedState=i.state,r&&FI(e,n,!0),e.child}function qx(t){var e=t.stateNode;e.pendingContext?LI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LI(t,e.context,!1),l0(t,e.containerInfo)}function ZI(t,e,n,i,r){return Qa(),n0(r),e.flags|=256,an(t,e,n,i),e.child}var ev={dehydrated:null,treeContext:null,retryLane:0};function tv(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kx(t,e,n){var i=e.pendingProps,r=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),De(Ke,r&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Op(o,i,0,null),t=fo(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tv(n),e.memoizedState=ev,t):m0(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return i2(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=rs(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=rs(a,s):(s=fo(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?tv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ev,i}return s=t.child,t=s.sibling,i=rs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function m0(t,e){return e=Op({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gh(t,e,n,i){return i!==null&&n0(i),Ya(e,t.child,null,n),t=m0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i2(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=pm(Error(D(422))),Gh(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Op({mode:"visible",children:i.children},r,0,null),s=fo(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ya(e,t.child,null,o),e.child.memoizedState=tv(o),e.memoizedState=ev,s);if(!(e.mode&1))return Gh(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(D(419)),i=pm(s,i,void 0),Gh(t,e,o,i)}if(a=(o&t.childLanes)!==0,Tn||a){if(i=Dt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,vr(t,r),vi(i,t,r,-1))}return I0(),i=pm(Error(D(421))),Gh(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=m2.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Vn=es(r.nextSibling),zn=e,je=!0,fi=null,t!==null&&(Xn[Jn++]=sr,Xn[Jn++]=or,Xn[Jn++]=bo,sr=t.id,or=t.overflow,bo=e),e=m0(e,i.children),e.flags|=4096,e)}function eE(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gy(t.return,e,n)}function gm(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Gx(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(an(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eE(t,n,e);else if(t.tag===19)eE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(De(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&yf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gm(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gm(e,!0,n,null,s);break;case"together":gm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Od(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r2(t,e,n){switch(e.tag){case 3:qx(e),Qa();break;case 5:bx(e);break;case 1:Dn(e.type)&&hf(e);break;case 4:l0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;De(pf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(De(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Kx(t,e,n):(De(Ke,Ke.current&1),t=wr(t,e,n),t!==null?t.sibling:null);De(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Gx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),De(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,Wx(t,e,n)}return wr(t,e,n)}var Qx,nv,Yx,Xx;Qx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nv=function(){};Yx=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ro(Bi.current);var s=null;switch(n){case"input":r=Sy(t,r),i=Sy(t,i),s=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),s=[];break;case"textarea":r=xy(t,r),i=xy(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cf)}Ay(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Xx=function(t,e,n,i){n!==i&&(e.flags|=4)};function Kl(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function s2(t,e,n){var i=e.pendingProps;switch(t0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return Dn(e.type)&&uf(),Xt(e),null;case 3:return i=e.stateNode,Xa(),Fe(An),Fe(nn),u0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fi!==null&&(uv(fi),fi=null))),nv(t,e),Xt(e),null;case 5:c0(e);var r=ro(pu.current);if(n=e.type,t!==null&&e.stateNode!=null)Yx(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(D(166));return Xt(e),null}if(t=ro(Bi.current),qh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ci]=e,i[du]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(r=0;r<pc.length;r++)Me(pc[r],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":cI(i,s),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Me("invalid",i);break;case"textarea":hI(i,s),Me("invalid",i)}Ay(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hh(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hh(i.textContent,a,t),r=["children",""+a]):nu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",i)}switch(n){case"input":Fh(i),uI(i,s,!0);break;case"textarea":Fh(i),dI(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ci]=e,t[du]=i,Qx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dy(n,i),n){case"dialog":Me("cancel",t),Me("close",t),r=i;break;case"iframe":case"object":case"embed":Me("load",t),r=i;break;case"video":case"audio":for(r=0;r<pc.length;r++)Me(pc[r],t);r=i;break;case"source":Me("error",t),r=i;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=i;break;case"details":Me("toggle",t),r=i;break;case"input":cI(t,i),r=Sy(t,i),Me("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),Me("invalid",t);break;case"textarea":hI(t,i),r=xy(t,i),Me("invalid",t);break;default:r=i}Ay(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?xk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&iu(t,l):typeof l=="number"&&iu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&Vw(t,s,l,o))}switch(n){case"input":Fh(t),uI(t,i,!1);break;case"textarea":Fh(t),dI(t);break;case"option":i.value!=null&&t.setAttribute("value",""+cs(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Da(t,!!i.multiple,s,!1):i.defaultValue!=null&&Da(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)Xx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(D(166));if(n=ro(pu.current),ro(Bi.current),qh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ci]=e,(s=i.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:Hh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hh(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ci]=e,e.stateNode=i}return Xt(e),null;case 13:if(Fe(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Vn!==null&&e.mode&1&&!(e.flags&128))px(),Qa(),e.flags|=98560,s=!1;else if(s=qh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Ci]=e}else Qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),s=!1}else fi!==null&&(uv(fi),fi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?bt===0&&(bt=3):I0())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Xa(),nv(t,e),t===null&&uu(e.stateNode.containerInfo),Xt(e),null;case 10:return s0(e.type._context),Xt(e),null;case 17:return Dn(e.type)&&uf(),Xt(e),null;case 19:if(Fe(Ke),s=e.memoizedState,s===null)return Xt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Kl(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yf(t),o!==null){for(e.flags|=128,Kl(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&ct()>Za&&(e.flags|=128,i=!0,Kl(s,!1),e.lanes=4194304)}else{if(!i)if(t=yf(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Xt(e),null}else 2*ct()-s.renderingStartTime>Za&&n!==1073741824&&(e.flags|=128,i=!0,Kl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ct(),e.sibling=null,n=Ke.current,De(Ke,i?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return b0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?$n&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function o2(t,e){switch(t0(e),e.tag){case 1:return Dn(e.type)&&uf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xa(),Fe(An),Fe(nn),u0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return c0(e),null;case 13:if(Fe(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Ke),null;case 4:return Xa(),null;case 10:return s0(e.type._context),null;case 22:case 23:return b0(),null;case 24:return null;default:return null}}var Qh=!1,Zt=!1,a2=typeof WeakSet=="function"?WeakSet:Set,z=null;function Sa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function iv(t,e,n){try{n()}catch(i){et(t,e,i)}}var tE=!1;function l2(t,e){if(Vy=of,t=tx(),Zw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(By={focusedElem:t,selectionRange:n},of=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:hi(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(_){et(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return p=tE,tE=!1,p}function Lc(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&iv(e,n,s)}r=r.next}while(r!==i)}}function Pp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jx(t){var e=t.alternate;e!==null&&(t.alternate=null,Jx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ci],delete e[du],delete e[Wy],delete e[WL],delete e[HL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zx(t){return t.tag===5||t.tag===3||t.tag===4}function nE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cf));else if(i!==4&&(t=t.child,t!==null))for(sv(t,e,n),t=t.sibling;t!==null;)sv(t,e,n),t=t.sibling}function ov(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ov(t,e,n),t=t.sibling;t!==null;)ov(t,e,n),t=t.sibling}var Ft=null,di=!1;function Rr(t,e,n){for(n=n.child;n!==null;)eC(t,e,n),n=n.sibling}function eC(t,e,n){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(Sp,n)}catch{}switch(n.tag){case 5:Zt||Sa(n,e);case 6:var i=Ft,r=di;Ft=null,Rr(t,e,n),Ft=i,di=r,Ft!==null&&(di?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(di?(t=Ft,n=n.stateNode,t.nodeType===8?lm(t.parentNode,n):t.nodeType===1&&lm(t,n),au(t)):lm(Ft,n.stateNode));break;case 4:i=Ft,r=di,Ft=n.stateNode.containerInfo,di=!0,Rr(t,e,n),Ft=i,di=r;break;case 0:case 11:case 14:case 15:if(!Zt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&iv(n,e,o),r=r.next}while(r!==i)}Rr(t,e,n);break;case 1:if(!Zt&&(Sa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){et(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(Zt=(i=Zt)||n.memoizedState!==null,Rr(t,e,n),Zt=i):Rr(t,e,n);break;default:Rr(t,e,n)}}function iE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a2),e.forEach(function(i){var r=y2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ui(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,di=!1;break e;case 3:Ft=a.stateNode.containerInfo,di=!0;break e;case 4:Ft=a.stateNode.containerInfo,di=!0;break e}a=a.return}if(Ft===null)throw Error(D(160));eC(s,o,r),Ft=null,di=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){et(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tC(e,t),e=e.sibling}function tC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ui(e,t),Ei(t),i&4){try{Lc(3,t,t.return),Pp(3,t)}catch(g){et(t,t.return,g)}try{Lc(5,t,t.return)}catch(g){et(t,t.return,g)}}break;case 1:ui(e,t),Ei(t),i&512&&n!==null&&Sa(n,n.return);break;case 5:if(ui(e,t),Ei(t),i&512&&n!==null&&Sa(n,n.return),t.flags&32){var r=t.stateNode;try{iu(r,"")}catch(g){et(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ik(r,s),Dy(a,o);var c=Dy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?xk(r,h):u==="dangerouslySetInnerHTML"?Tk(r,h):u==="children"?iu(r,h):Vw(r,u,h,c)}switch(a){case"input":Ty(r,s);break;case"textarea":Ek(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Da(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Da(r,!!s.multiple,s.defaultValue,!0):Da(r,!!s.multiple,s.multiple?[]:"",!1))}r[du]=s}catch(g){et(t,t.return,g)}}break;case 6:if(ui(e,t),Ei(t),i&4){if(t.stateNode===null)throw Error(D(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){et(t,t.return,g)}}break;case 3:if(ui(e,t),Ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{au(e.containerInfo)}catch(g){et(t,t.return,g)}break;case 4:ui(e,t),Ei(t);break;case 13:ui(e,t),Ei(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(w0=ct())),i&4&&iE(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(c=Zt)||u,ui(e,t),Zt=c):ui(e,t),Ei(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(z=t,u=t.child;u!==null;){for(h=z=u;z!==null;){switch(d=z,f=d.child,d.tag){case 0:case 11:case 14:case 15:Lc(4,d,d.return);break;case 1:Sa(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){et(i,n,g)}}break;case 5:Sa(d,d.return);break;case 22:if(d.memoizedState!==null){sE(h);continue}}f!==null?(f.return=d,z=f):sE(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kk("display",o))}catch(g){et(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){et(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ui(e,t),Ei(t),i&4&&iE(t);break;case 21:break;default:ui(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zx(n)){var i=n;break e}n=n.return}throw Error(D(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(iu(r,""),i.flags&=-33);var s=nE(t);ov(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=nE(t);sv(t,a,o);break;default:throw Error(D(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c2(t,e,n){z=t,nC(t)}function nC(t,e,n){for(var i=(t.mode&1)!==0;z!==null;){var r=z,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Qh;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=Qh;var c=Zt;if(Qh=o,(Zt=l)&&!c)for(z=r;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?oE(r):l!==null?(l.return=o,z=l):oE(r);for(;s!==null;)z=s,nC(s),s=s.sibling;z=r,Qh=a,Zt=c}rE(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,z=s):rE(t)}}function rE(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Pp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BI(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&au(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Zt||e.flags&512&&rv(e)}catch(d){et(e,e.return,d)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function sE(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function oE(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pp(4,e)}catch(l){et(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){et(e,r,l)}}var s=e.return;try{rv(e)}catch(l){et(e,s,l)}break;case 5:var o=e.return;try{rv(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var u2=Math.ceil,_f=Er.ReactCurrentDispatcher,y0=Er.ReactCurrentOwner,ri=Er.ReactCurrentBatchConfig,ve=0,Dt=null,yt=null,zt=0,$n=0,Ta=ks(0),bt=0,vu=null,Eo=0,Np=0,v0=0,Fc=null,En=null,w0=0,Za=1/0,er=null,bf=!1,av=null,ns=null,Yh=!1,Wr=null,If=0,$c=0,lv=null,Md=-1,Ld=0;function hn(){return ve&6?ct():Md!==-1?Md:Md=ct()}function is(t){return t.mode&1?ve&2&&zt!==0?zt&-zt:KL.transition!==null?(Ld===0&&(Ld=Uk()),Ld):(t=xe,t!==0||(t=window.event,t=t===void 0?16:qk(t.type)),t):1}function vi(t,e,n,i){if(50<$c)throw $c=0,lv=null,Error(D(185));eh(t,n,i),(!(ve&2)||t!==Dt)&&(t===Dt&&(!(ve&2)&&(Np|=n),bt===4&&Vr(t,zt)),Rn(t,i),n===1&&ve===0&&!(e.mode&1)&&(Za=ct()+500,Ap&&xs()))}function Rn(t,e){var n=t.callbackNode;KM(t,e);var i=sf(t,t===Dt?zt:0);if(i===0)n!==null&&gI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&gI(n),e===1)t.tag===0?qL(aE.bind(null,t)):hx(aE.bind(null,t)),zL(function(){!(ve&6)&&xs()}),n=null;else{switch(Vk(i)){case 1:n=Hw;break;case 4:n=Fk;break;case 16:n=rf;break;case 536870912:n=$k;break;default:n=rf}n=uC(n,iC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iC(t,e){if(Md=-1,Ld=0,ve&6)throw Error(D(327));var n=t.callbackNode;if(Ma()&&t.callbackNode!==n)return null;var i=sf(t,t===Dt?zt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ef(t,i);else{e=i;var r=ve;ve|=2;var s=sC();(Dt!==t||zt!==e)&&(er=null,Za=ct()+500,ho(t,e));do try{f2();break}catch(a){rC(t,a)}while(1);r0(),_f.current=s,ve=r,yt!==null?e=0:(Dt=null,zt=0,e=bt)}if(e!==0){if(e===2&&(r=My(t),r!==0&&(i=r,e=cv(t,r))),e===1)throw n=vu,ho(t,0),Vr(t,i),Rn(t,ct()),n;if(e===6)Vr(t,i);else{if(r=t.current.alternate,!(i&30)&&!h2(r)&&(e=Ef(t,i),e===2&&(s=My(t),s!==0&&(i=s,e=cv(t,s))),e===1))throw n=vu,ho(t,0),Vr(t,i),Rn(t,ct()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(D(345));case 2:Hs(t,En,er);break;case 3:if(Vr(t,i),(i&130023424)===i&&(e=w0+500-ct(),10<e)){if(sf(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=jy(Hs.bind(null,t,En,er),e);break}Hs(t,En,er);break;case 4:if(Vr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-yi(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*u2(i/1960))-i,10<i){t.timeoutHandle=jy(Hs.bind(null,t,En,er),i);break}Hs(t,En,er);break;case 5:Hs(t,En,er);break;default:throw Error(D(329))}}}return Rn(t,ct()),t.callbackNode===n?iC.bind(null,t):null}function cv(t,e){var n=Fc;return t.current.memoizedState.isDehydrated&&(ho(t,e).flags|=256),t=Ef(t,e),t!==2&&(e=En,En=n,e!==null&&uv(e)),t}function uv(t){En===null?En=t:En.push.apply(En,t)}function h2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!wi(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~v0,e&=~Np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yi(e),i=1<<n;t[n]=-1,e&=~i}}function aE(t){if(ve&6)throw Error(D(327));Ma();var e=sf(t,0);if(!(e&1))return Rn(t,ct()),null;var n=Ef(t,e);if(t.tag!==0&&n===2){var i=My(t);i!==0&&(e=i,n=cv(t,i))}if(n===1)throw n=vu,ho(t,0),Vr(t,e),Rn(t,ct()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hs(t,En,er),Rn(t,ct()),null}function _0(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Za=ct()+500,Ap&&xs())}}function So(t){Wr!==null&&Wr.tag===0&&!(ve&6)&&Ma();var e=ve;ve|=1;var n=ri.transition,i=xe;try{if(ri.transition=null,xe=1,t)return t()}finally{xe=i,ri.transition=n,ve=e,!(ve&6)&&xs()}}function b0(){$n=Ta.current,Fe(Ta)}function ho(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BL(n)),yt!==null)for(n=yt.return;n!==null;){var i=n;switch(t0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&uf();break;case 3:Xa(),Fe(An),Fe(nn),u0();break;case 5:c0(i);break;case 4:Xa();break;case 13:Fe(Ke);break;case 19:Fe(Ke);break;case 10:s0(i.type._context);break;case 22:case 23:b0()}n=n.return}if(Dt=t,yt=t=rs(t.current,null),zt=$n=e,bt=0,vu=null,v0=Np=Eo=0,En=Fc=null,io!==null){for(e=0;e<io.length;e++)if(n=io[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}io=null}return t}function rC(t,e){do{var n=yt;try{if(r0(),Pd.current=wf,vf){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vf=!1}if(Io=0,xt=_t=Qe=null,Mc=!1,gu=0,y0.current=null,n===null||n.return===null){bt=1,vu=e,yt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=GI(o);if(f!==null){f.flags&=-257,QI(f,o,a,s,e),f.mode&1&&KI(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){KI(s,c,e),I0();break e}l=Error(D(426))}}else if(je&&a.mode&1){var w=GI(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),QI(w,o,a,s,e),n0(Ja(l,a));break e}}s=l=Ja(l,a),bt!==4&&(bt=2),Fc===null?Fc=[s]:Fc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Bx(s,l,e);VI(s,y);break e;case 1:a=l;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ns===null||!ns.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=zx(s,a,e);VI(s,_);break e}}s=s.return}while(s!==null)}aC(n)}catch(I){e=I,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(1)}function sC(){var t=_f.current;return _f.current=wf,t===null?wf:t}function I0(){(bt===0||bt===3||bt===2)&&(bt=4),Dt===null||!(Eo&268435455)&&!(Np&268435455)||Vr(Dt,zt)}function Ef(t,e){var n=ve;ve|=2;var i=sC();(Dt!==t||zt!==e)&&(er=null,ho(t,e));do try{d2();break}catch(r){rC(t,r)}while(1);if(r0(),ve=n,_f.current=i,yt!==null)throw Error(D(261));return Dt=null,zt=0,bt}function d2(){for(;yt!==null;)oC(yt)}function f2(){for(;yt!==null&&!$M();)oC(yt)}function oC(t){var e=cC(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?aC(t):yt=e,y0.current=null}function aC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o2(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,yt=null;return}}else if(n=s2(n,e,$n),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);bt===0&&(bt=5)}function Hs(t,e,n){var i=xe,r=ri.transition;try{ri.transition=null,xe=1,p2(t,e,n,i)}finally{ri.transition=r,xe=i}return null}function p2(t,e,n,i){do Ma();while(Wr!==null);if(ve&6)throw Error(D(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(GM(t,s),t===Dt&&(yt=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yh||(Yh=!0,uC(rf,function(){return Ma(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ri.transition,ri.transition=null;var o=xe;xe=1;var a=ve;ve|=4,y0.current=null,l2(t,n),tC(n,t),OL(By),of=!!Vy,By=Vy=null,t.current=n,c2(n),UM(),ve=a,xe=o,ri.transition=s}else t.current=n;if(Yh&&(Yh=!1,Wr=t,If=r),s=t.pendingLanes,s===0&&(ns=null),zM(n.stateNode),Rn(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(bf)throw bf=!1,t=av,av=null,t;return If&1&&t.tag!==0&&Ma(),s=t.pendingLanes,s&1?t===lv?$c++:($c=0,lv=t):$c=0,xs(),null}function Ma(){if(Wr!==null){var t=Vk(If),e=ri.transition,n=xe;try{if(ri.transition=null,xe=16>t?16:t,Wr===null)var i=!1;else{if(t=Wr,Wr=null,If=0,ve&6)throw Error(D(331));var r=ve;for(ve|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:Lc(8,u,s)}var h=u.child;if(h!==null)h.return=u,z=h;else for(;z!==null;){u=z;var d=u.sibling,f=u.return;if(Jx(u),u===c){z=null;break}if(d!==null){d.return=f,z=d;break}z=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,z=y;break e}z=s.return}}var m=t.current;for(z=m;z!==null;){o=z;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,z=v;else e:for(o=m;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pp(9,a)}}catch(I){et(a,a.return,I)}if(a===o){z=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,z=_;break e}z=a.return}}if(ve=r,xs(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(Sp,t)}catch{}i=!0}return i}finally{xe=n,ri.transition=e}}return!1}function lE(t,e,n){e=Ja(n,e),e=Bx(t,e,1),t=ts(t,e,1),e=hn(),t!==null&&(eh(t,1,e),Rn(t,e))}function et(t,e,n){if(t.tag===3)lE(t,t,n);else for(;e!==null;){if(e.tag===3){lE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ns===null||!ns.has(i))){t=Ja(n,t),t=zx(e,t,1),e=ts(e,t,1),t=hn(),e!==null&&(eh(e,1,t),Rn(e,t));break}}e=e.return}}function g2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(bt===4||bt===3&&(zt&130023424)===zt&&500>ct()-w0?ho(t,0):v0|=n),Rn(t,e)}function lC(t,e){e===0&&(t.mode&1?(e=Vh,Vh<<=1,!(Vh&130023424)&&(Vh=4194304)):e=1);var n=hn();t=vr(t,e),t!==null&&(eh(t,e,n),Rn(t,n))}function m2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lC(t,n)}function y2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(e),lC(t,n)}var cC;cC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,r2(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,je&&e.flags&1048576&&dx(e,ff,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Od(t,e),t=e.pendingProps;var r=Ga(e,nn.current);Oa(e,n),r=d0(null,e,i,t,r,n);var s=f0();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(i)?(s=!0,hf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,a0(e),r.updater=Dp,e.stateNode=r,r._reactInternals=e,Yy(e,i,t,n),e=Zy(null,e,i,!0,s,n)):(e.tag=0,je&&s&&e0(e),an(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Od(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=w2(i),t=hi(i,t),r){case 0:e=Jy(null,e,i,t,n);break e;case 1:e=JI(null,e,i,t,n);break e;case 11:e=YI(null,e,i,t,n);break e;case 14:e=XI(null,e,i,hi(i.type,t),n);break e}throw Error(D(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Jy(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),JI(t,e,i,r,n);case 3:e:{if(qx(e),t===null)throw Error(D(387));i=e.pendingProps,s=e.memoizedState,r=s.element,mx(t,e),mf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ja(Error(D(423)),e),e=ZI(t,e,i,n,r);break e}else if(i!==r){r=Ja(Error(D(424)),e),e=ZI(t,e,i,n,r);break e}else for(Vn=es(e.stateNode.containerInfo.firstChild),zn=e,je=!0,fi=null,n=_x(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qa(),i===r){e=wr(t,e,n);break e}an(t,e,i,n)}e=e.child}return e;case 5:return bx(e),t===null&&Ky(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,zy(i,r)?o=null:s!==null&&zy(i,s)&&(e.flags|=32),Hx(t,e),an(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return Kx(t,e,n);case 4:return l0(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ya(e,null,i,n):an(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),YI(t,e,i,r,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,De(pf,i._currentValue),i._currentValue=o,s!==null)if(wi(s.value,o)){if(s.children===r.children&&!An.current){e=wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}an(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Oa(e,n),r=si(r),i=i(r),e.flags|=1,an(t,e,i,n),e.child;case 14:return i=e.type,r=hi(i,e.pendingProps),r=hi(i.type,r),XI(t,e,i,r,n);case 15:return jx(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Od(t,e),e.tag=1,Dn(i)?(t=!0,hf(e)):t=!1,Oa(e,n),vx(e,i,r),Yy(e,i,r,n),Zy(null,e,i,!0,t,n);case 19:return Gx(t,e,n);case 22:return Wx(t,e,n)}throw Error(D(156,e.tag))};function uC(t,e){return Lk(t,e)}function v2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(t,e,n,i){return new v2(t,e,n,i)}function E0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w2(t){if(typeof t=="function")return E0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zw)return 11;if(t===jw)return 14}return 2}function rs(t,e){var n=t.alternate;return n===null?(n=ei(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fd(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")E0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ga:return fo(n.children,r,s,e);case Bw:o=8,r|=8;break;case _y:return t=ei(12,n,e,r|2),t.elementType=_y,t.lanes=s,t;case by:return t=ei(13,n,e,r),t.elementType=by,t.lanes=s,t;case Iy:return t=ei(19,n,e,r),t.elementType=Iy,t.lanes=s,t;case wk:return Op(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yk:o=10;break e;case vk:o=9;break e;case zw:o=11;break e;case jw:o=14;break e;case Fr:o=16,i=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=ei(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function fo(t,e,n,i){return t=ei(7,t,i,e),t.lanes=n,t}function Op(t,e,n,i){return t=ei(22,t,i,e),t.elementType=wk,t.lanes=n,t.stateNode={isHidden:!1},t}function mm(t,e,n){return t=ei(6,t,null,e),t.lanes=n,t}function ym(t,e,n){return e=ei(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xg(0),this.expirationTimes=Xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function S0(t,e,n,i,r,s,o,a,l){return t=new _2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ei(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},a0(s),t}function b2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pa,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function hC(t){if(!t)return us;t=t._reactInternals;e:{if(Ho(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Dn(n))return ux(t,n,e)}return e}function dC(t,e,n,i,r,s,o,a,l){return t=S0(n,i,!0,t,r,s,o,a,l),t.context=hC(null),n=t.current,i=hn(),r=is(n),s=dr(i,r),s.callback=e??null,ts(n,s,r),t.current.lanes=r,eh(t,r,i),Rn(t,i),t}function Mp(t,e,n,i){var r=e.current,s=hn(),o=is(r);return n=hC(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ts(r,e,o),t!==null&&(vi(t,r,o,s),Rd(t,r,o)),o}function Sf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function T0(t,e){cE(t,e),(t=t.alternate)&&cE(t,e)}function I2(){return null}var fC=typeof reportError=="function"?reportError:function(t){console.error(t)};function k0(t){this._internalRoot=t}Lp.prototype.render=k0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Mp(t,e,null,null)};Lp.prototype.unmount=k0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;So(function(){Mp(null,t,null,null)}),e[yr]=null}};function Lp(t){this._internalRoot=t}Lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&Hk(t)}};function x0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uE(){}function E2(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Sf(o);s.call(c)}}var o=dC(e,i,t,0,null,!1,!1,"",uE);return t._reactRootContainer=o,t[yr]=o.current,uu(t.nodeType===8?t.parentNode:t),So(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Sf(l);a.call(c)}}var l=S0(t,0,!1,null,null,!1,!1,"",uE);return t._reactRootContainer=l,t[yr]=l.current,uu(t.nodeType===8?t.parentNode:t),So(function(){Mp(e,l,n,i)}),l}function $p(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Sf(o);a.call(l)}}Mp(e,o,t,r)}else o=E2(n,e,t,r,i);return Sf(o)}Bk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fc(e.pendingLanes);n!==0&&(qw(e,n|1),Rn(e,ct()),!(ve&6)&&(Za=ct()+500,xs()))}break;case 13:So(function(){var i=vr(t,1);if(i!==null){var r=hn();vi(i,t,1,r)}}),T0(t,1)}};Kw=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=hn();vi(e,t,134217728,n)}T0(t,134217728)}};zk=function(t){if(t.tag===13){var e=is(t),n=vr(t,e);if(n!==null){var i=hn();vi(n,t,e,i)}T0(t,e)}};jk=function(){return xe};Wk=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Py=function(t,e,n){switch(e){case"input":if(Ty(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Cp(i);if(!r)throw Error(D(90));bk(i),Ty(i,r)}}}break;case"textarea":Ek(t,n);break;case"select":e=n.value,e!=null&&Da(t,!!n.multiple,e,!1)}};Dk=_0;Rk=So;var S2={usingClientEntryPoint:!1,Events:[nh,wa,Cp,Ck,Ak,_0]},Gl={findFiberByHostInstance:no,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},T2={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ok(t),t===null?null:t.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||I2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{Sp=Xh.inject(T2),Vi=Xh}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x0(e))throw Error(D(200));return b2(t,e,null,n)};qn.createRoot=function(t,e){if(!x0(t))throw Error(D(299));var n=!1,i="",r=fC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=S0(t,1,!1,null,null,n,!1,i,r),t[yr]=e.current,uu(t.nodeType===8?t.parentNode:t),new k0(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Ok(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return So(t)};qn.hydrate=function(t,e,n){if(!Fp(e))throw Error(D(200));return $p(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!x0(t))throw Error(D(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=fC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dC(e,null,t,1,n??null,r,!1,s,o),t[yr]=e.current,uu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Lp(e)};qn.render=function(t,e,n){if(!Fp(e))throw Error(D(200));return $p(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!Fp(t))throw Error(D(40));return t._reactRootContainer?(So(function(){$p(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};qn.unstable_batchedUpdates=_0;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Fp(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return $p(t,e,n,!1,i)};qn.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=qn})(IM);const gc=sk(Zd);var hE=Zd;yy.createRoot=hE.createRoot,yy.hydrateRoot=hE.hydrateRoot;const k2="/assets/Logo-e60e83a3.png";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},x2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):x2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new C2;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A2=function(t){const e=pC(t);return gC.encodeByteArray(e,!0)},Tf=function(t){return A2(t).replace(/\./g,"")},mC=function(t){try{return gC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kf(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D2(n)||(t[n]=kf(t[n],e[n]));return t}function D2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=()=>R2().__FIREBASE_DEFAULTS__,N2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mC(t[1]);return e&&JSON.parse(e)},Up=()=>{try{return P2()||N2()||O2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yC=t=>{var e,n;return(n=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vC=t=>{const e=yC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},M2=()=>{var t;return(t=Up())===null||t===void 0?void 0:t.config},wC=t=>{var e;return(e=Up())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Tf(JSON.stringify(n)),Tf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function C0(){var t;const e=(t=Up())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $2(){return typeof self=="object"&&self.self===self}function bC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function A0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IC(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U2(){return!C0()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function To(){try{return typeof indexedDB=="object"}catch{return!1}}function V2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function B2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="FirebaseError";class jt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=z2,Object.setPrototypeOf(this,jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}}class Qi{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?j2(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new jt(r,a,i)}}function j2(t,e){return t.replace(W2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const W2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function H2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(fE(s)&&fE(o)){if(!xf(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function fE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function mc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EC(t,e){const n=new q2(t,e);return n.subscribe.bind(n)}class q2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");K2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=vm),r.error===void 0&&(r.error=vm),r.complete===void 0&&(r.complete=vm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G2=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new L2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Q2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Q2(t){return t===qs?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=[];var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const SC={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},J2=me.INFO,Z2={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},eF=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Z2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=J2,this._logHandler=eF,this._userLogHandler=null,D0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}function tF(t){D0.forEach(e=>{e.setLogLevel(t)})}function nF(t,e){for(const n of D0){let i=null;e&&e.level&&(i=SC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:me[s].toLowerCase(),message:a,args:o,type:r.name})}}}const iF=(t,e)=>e.some(n=>t instanceof n);let pE,gE;function rF(){return pE||(pE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sF(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,hv=new WeakMap,kC=new WeakMap,wm=new WeakMap,R0=new WeakMap;function oF(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ss(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TC.set(n,t)}).catch(()=>{}),R0.set(e,t),e}function aF(t){if(hv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hv.set(t,e)}let dv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lF(t){dv=t(dv)}function cF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_m(this),e,...n);return kC.set(i,e.sort?e.sort():[e]),ss(i)}:sF().includes(t)?function(...e){return t.apply(_m(this),e),ss(TC.get(this))}:function(...e){return ss(t.apply(_m(this),e))}}function uF(t){return typeof t=="function"?cF(t):(t instanceof IDBTransaction&&aF(t),iF(t,rF())?new Proxy(t,dv):t)}function ss(t){if(t instanceof IDBRequest)return oF(t);if(wm.has(t))return wm.get(t);const e=uF(t);return e!==t&&(wm.set(t,e),R0.set(e,t)),e}const _m=t=>R0.get(t);function hF(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=ss(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ss(o.result),l.oldVersion,l.newVersion,ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dF=["get","getKey","getAll","getAllKeys","count"],fF=["put","add","delete","clear"],bm=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=fF.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dF.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return bm.set(e,s),s}lF(t=>({...t,get:(e,n,i)=>mE(e,n)||t.get(e,n,i),has:(e,n)=>!!mE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gF(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function gF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fv="@firebase/app",yE="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new Vp("@firebase/app"),mF="@firebase/app-compat",yF="@firebase/analytics-compat",vF="@firebase/analytics",wF="@firebase/app-check-compat",_F="@firebase/app-check",bF="@firebase/auth",IF="@firebase/auth-compat",EF="@firebase/database",SF="@firebase/database-compat",TF="@firebase/functions",kF="@firebase/functions-compat",xF="@firebase/installations",CF="@firebase/installations-compat",AF="@firebase/messaging",DF="@firebase/messaging-compat",RF="@firebase/performance",PF="@firebase/performance-compat",NF="@firebase/remote-config",OF="@firebase/remote-config-compat",MF="@firebase/storage",LF="@firebase/storage-compat",FF="@firebase/firestore",$F="@firebase/firestore-compat",UF="firebase",VF="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]",BF={[fv]:"fire-core",[mF]:"fire-core-compat",[vF]:"fire-analytics",[yF]:"fire-analytics-compat",[_F]:"fire-app-check",[wF]:"fire-app-check-compat",[bF]:"fire-auth",[IF]:"fire-auth-compat",[EF]:"fire-rtdb",[SF]:"fire-rtdb-compat",[TF]:"fire-fn",[kF]:"fire-fn-compat",[xF]:"fire-iid",[CF]:"fire-iid-compat",[AF]:"fire-fcm",[DF]:"fire-fcm-compat",[RF]:"fire-perf",[PF]:"fire-perf-compat",[NF]:"fire-rc",[OF]:"fire-rc-compat",[MF]:"fire-gcs",[LF]:"fire-gcs-compat",[FF]:"fire-fst",[$F]:"fire-fst-compat","fire-js":"fire-js",[UF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Map,wu=new Map;function Cf(t,e){try{t.container.addComponent(e)}catch(n){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xC(t,e){t.container.addOrOverwriteComponent(e)}function Pn(t){const e=t.name;if(wu.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;wu.set(e,t);for(const n of ds.values())Cf(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zF(t,e,n=hs){Cs(t,e).clearInstance(n)}function jF(){wu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fr=new Qi("app","Firebase",WF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HF=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=VF;function Bp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:hs,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw fr.create("bad-app-name",{appName:String(r)});if(n||(n=M2()),!n)throw fr.create("no-options");const s=ds.get(r);if(s){if(xf(n,s.options)&&xf(i,s.config))return s;throw fr.create("duplicate-app",{appName:r})}const o=new X2(r);for(const l of wu.values())o.addComponent(l);const a=new HF(n,i,o);return ds.set(r,a),a}function zp(t=hs){const e=ds.get(t);if(!e&&t===hs)return Bp();if(!e)throw fr.create("no-app",{appName:t});return e}function qF(){return Array.from(ds.values())}async function CC(t){const e=t.name;ds.has(e)&&(ds.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Wt(t,e,n){var i;let r=(i=BF[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(a.join(" "));return}Pn(new Gt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function AC(t,e){if(t!==null&&typeof t!="function")throw fr.create("invalid-log-argument");nF(t,e)}function DC(t){tF(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="firebase-heartbeat-database",GF=1,_u="firebase-heartbeat-store";let Im=null;function RC(){return Im||(Im=hF(KF,GF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_u)}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),Im}async function QF(t){try{return(await RC()).transaction(_u).objectStore(_u).get(PC(t))}catch(e){if(e instanceof jt)ko.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ko.warn(n.message)}}}async function vE(t,e){try{const i=(await RC()).transaction(_u,"readwrite");return await i.objectStore(_u).put(e,PC(t)),i.done}catch(n){if(n instanceof jt)ko.warn(n.message);else{const i=fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ko.warn(i.message)}}}function PC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=1024,XF=30*24*60*60*1e3;class JF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e$(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=XF}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wE(),{heartbeatsToSend:n,unsentEntries:i}=ZF(this._heartbeatsCache.heartbeats),r=Tf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function wE(){return new Date().toISOString().substring(0,10)}function ZF(t,e=YF){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),_E(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_E(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class e${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return To()?V2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await QF(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return vE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return vE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _E(t){return Tf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t){Pn(new Gt("platform-logger",e=>new pF(e),"PRIVATE")),Pn(new Gt("heartbeat",e=>new JF(e),"PRIVATE")),Wt(fv,yE,t),Wt(fv,yE,"esm2017"),Wt("fire-js","")}t$("");const n$=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:jt,SDK_VERSION:Sr,_DEFAULT_ENTRY_NAME:hs,_addComponent:Cf,_addOrOverwriteComponent:xC,_apps:ds,_clearComponents:jF,_components:wu,_getProvider:Cs,_registerComponent:Pn,_removeServiceInstance:zF,deleteApp:CC,getApp:zp,getApps:qF,initializeApp:Bp,onLog:AC,registerVersion:Wt,setLogLevel:DC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n){this._delegate=e,this.firebase=n,Cf(e,new Gt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),CC(this._delegate)))}_getService(e,n=hs){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=hs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Cf(this._delegate,e)}_addOrOverwriteComponent(e){xC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},bE=new Qi("app-compat","Firebase",r$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:Wt,setLogLevel:DC,onLog:AC,apps:null,SDK_VERSION:Sr,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:n$}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(c){delete e[c]}function r(c){if(c=c||hs,!dE(e,c))throw bE.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,u={}){const h=Bp(c,u);if(dE(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(Pn(c)&&c.type==="PUBLIC"){const d=(f=r())=>{if(typeof f[h]!="function")throw bE.create("invalid-app-argument",{appName:u});return f[h]()};c.serviceProps!==void 0&&kf(d,c.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){const t=s$(i$);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:NC,extendNamespace:e,createSubscribe:EC,ErrorFactory:Qi,deepExtend:kf});function e(n){kf(t,n)}return t}const o$=NC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Vp("@firebase/app-compat"),a$="@firebase/app-compat",l$="0.2.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(t){Wt(a$,l$,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if($2()&&self.firebase!==void 0){IE.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&IE.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Il=o$;c$();function P0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const Ql={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ia={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function OC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h$=u$,d$=OC,MC=new Qi("auth","Firebase",OC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Vp("@firebase/auth");function f$(t,...e){Af.logLevel<=me.WARN&&Af.warn(`Auth (${Sr}): ${t}`,...e)}function $d(t,...e){Af.logLevel<=me.ERROR&&Af.error(`Auth (${Sr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,...e){throw N0(t,...e)}function Ht(t,...e){return N0(t,...e)}function LC(t,e,n){const i=Object.assign(Object.assign({},d$()),{[e]:n});return new Qi("auth","Firebase",i).create(e,{appName:t.name})}function El(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Pt(t,"argument-error"),LC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function N0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return MC.create(t,...e)}function P(t,e,...n){if(!t)throw N0(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $d(e),new Error(e)}function _i(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function O0(){return EE()==="http:"||EE()==="https:"}function EE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O0()||bC()||"connection"in navigator)?navigator.onLine:!0}function g$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=F2()||A0()}get(){return p$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new rh(3e4,6e4);function wt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function St(t,e,n,i,r={}){return $C(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=bl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),FC.fetch()(UC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function $C(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},m$),e);try{const r=new v$(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw yc(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw LC(t,u,c);Pt(t,u)}}catch(r){if(r instanceof jt)throw r;Pt(t,"network-request-failed",{message:String(r)})}}async function Tr(t,e,n,i,r={}){const s=await St(t,e,n,i,r);return"mfaPendingCredential"in s&&Pt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function UC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?M0(t.config,r):`${t.config.apiScheme}://${r}`}class v${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ht(this.auth,"network-request-failed")),y$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ht(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w$(t,e){return St(t,"POST","/v1/accounts:delete",e)}async function _$(t,e){return St(t,"POST","/v1/accounts:update",e)}async function b$(t,e){return St(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I$(t,e=!1){const n=W(t),i=await n.getIdToken(e),r=jp(i);P(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Uc(Em(r.auth_time)),issuedAtTime:Uc(Em(r.iat)),expirationTime:Uc(Em(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Em(t){return Number(t)*1e3}function jp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const r=mC(n);return r?JSON.parse(r):($d("Failed to decode base64 JWT payload"),null)}catch(r){return $d("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function E$(t){const e=jp(t);return P(e,"internal-error"),P(typeof e.exp<"u","internal-error"),P(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _r(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof jt&&S$(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function S$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _r(t,b$(n,{idToken:i}));P(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?C$(s.providerUserInfo):[],a=x$(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new VC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function k$(t){const e=W(t);await Iu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x$(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function C$(t){return t.map(e=>{var{providerId:n}=e,i=P0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A$(t,e){const n=await $C(t,{},async()=>{const i=bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=UC(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FC.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(typeof e.idToken<"u","internal-error"),P(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return P(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await A$(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Eu;return i&&(P(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(P(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(P(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eu,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){P(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class po{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=P0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new T$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new VC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _r(this,this.stsTokenManager.getToken(this.auth,e));return P(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I$(this,e)}reload(){return k$(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Iu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _r(this,w$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:_,isAnonymous:I,providerData:E,stsTokenManager:T}=n;P(v&&T,e,"internal-error");const x=Eu.fromJSON(this.name,T);P(typeof v=="string",e,"internal-error"),Pr(h,e.name),Pr(d,e.name),P(typeof _=="boolean",e,"internal-error"),P(typeof I=="boolean",e,"internal-error"),Pr(f,e.name),Pr(p,e.name),Pr(g,e.name),Pr(w,e.name),Pr(y,e.name),Pr(m,e.name);const $=new po({uid:v,auth:e,email:d,emailVerified:_,displayName:h,isAnonymous:I,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:x,createdAt:y,lastLoginAt:m});return E&&Array.isArray(E)&&($.providerData=E.map(M=>Object.assign({},M))),w&&($._redirectEventId=w),$}static async _fromIdTokenResponse(e,n,i=!1){const r=new Eu;r.updateFromServerResponse(n);const s=new po({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Iu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;function Bn(t){_i(t instanceof Function,"Expected a class definition");let e=SE.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BC.type="NONE";const el=BC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=go(this.userKey,r.apiKey,s),this.fullPersistenceKey=go("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new La(Bn(el),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Bn(el);const o=go(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=po._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new La(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new La(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HC(e))return"Blackberry";if(qC(e))return"Webos";if(L0(e))return"Safari";if((e.includes("chrome/")||jC(e))&&!e.includes("edge/"))return"Chrome";if(sh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zC(t=Xe()){return/firefox\//i.test(t)}function L0(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jC(t=Xe()){return/crios\//i.test(t)}function WC(t=Xe()){return/iemobile/i.test(t)}function sh(t=Xe()){return/android/i.test(t)}function HC(t=Xe()){return/blackberry/i.test(t)}function qC(t=Xe()){return/webos/i.test(t)}function Sl(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D$(t=Xe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function R$(t=Xe()){var e;return Sl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P$(){return IC()&&document.documentMode===10}function KC(t=Xe()){return Sl(t)||sh(t)||qC(t)||HC(t)||/windows phone/i.test(t)||WC(t)}function N$(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e=[]){let n;switch(t){case"Browser":n=TE(Xe());break;case"Worker":n=`${TE(Xe())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sr}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O$(t){return(await St(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function QC(t,e){return St(t,"GET","/v2/recaptchaConfig",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t){return t!==void 0&&t.getResponse!==void 0}function xE(t){return t!==void 0&&t.enterprise!==void 0}class YC{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function F0(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Ht("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",M$().appendChild(i)})}function XC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const L$="https://www.google.com/recaptcha/enterprise.js?render=",F$="recaptcha-enterprise",$$="NO_RECAPTCHA";class JC{constructor(e){this.type=F$,this.auth=ft(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{QC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new YC(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;xE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o($$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&xE(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}F0(L$+a).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function fs(t,e,n,i=!1){const r=new JC(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CE(this),this.idTokenSubscription=new CE(this),this.beforeStateQueue=new U$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Iu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?W(e):null;return n&&P(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}async initializeRecaptchaConfig(){const e=await QC(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new YC(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new JC(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;P(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&f$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ft(t){return W(t)}class CE{constructor(e){this.auth=e,this.observer=null,this.addObserver=EC(n=>this.observer=n)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B$(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(xf(s,e??{}))return r;Pt(r,"already-initialized")}return n.initialize({options:e})}function z$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ZC(t,e,n){const i=ft(t);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=eA(e),{host:o,port:a}=j$(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||W$()}function eA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j$(t){const e=eA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:AE(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:AE(o)}}}function AE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function W$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(t,e){return St(t,"POST","/v1/accounts:resetPassword",wt(t,e))}async function nA(t,e){return St(t,"POST","/v1/accounts:update",e)}async function H$(t,e){return St(t,"POST","/v1/accounts:update",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sm(t,e){return Tr(t,"POST","/v1/accounts:signInWithPassword",wt(t,e))}async function Wp(t,e){return St(t,"POST","/v1/accounts:sendOobCode",wt(t,e))}async function q$(t,e){return Wp(t,e)}async function Tm(t,e){return Wp(t,e)}async function km(t,e){return Wp(t,e)}async function K$(t,e){return Wp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G$(t,e){return Tr(t,"POST","/v1/accounts:signInWithEmailLink",wt(t,e))}async function Q$(t,e){return Tr(t,"POST","/v1/accounts:signInWithEmailLink",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Tl{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Su(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Su(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const r=await fs(e,i,"signInWithPassword");return Sm(e,r)}else return Sm(e,i).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await fs(e,i,"signInWithPassword");return Sm(e,s)}else return Promise.reject(r)});case"emailLink":return G$(e,{email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return nA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Q$(e,{idToken:n,email:this._email,oobCode:this._password});default:Pt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pr(t,e){return Tr(t,"POST","/v1/accounts:signInWithIdp",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$="http://localhost";class Hi extends Tl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=P0(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Hi(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,pr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pr(e,n)}buildRequest(){const e={requestUri:Y$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(t,e){return St(t,"POST","/v1/accounts:sendVerificationCode",wt(t,e))}async function J$(t,e){return Tr(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,e))}async function Z$(t,e){const n=await Tr(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,e));if(n.temporaryProof)throw yc(t,"account-exists-with-different-credential",n);return n}const eU={USER_NOT_FOUND:"user-not-found"};async function tU(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Tr(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,n),eU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Tl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new mo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new mo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return J$(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Z$(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return tU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new mo({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iU(t){const e=ka(mc(t)).link,n=e?ka(mc(e)).deep_link_id:null,i=ka(mc(t)).deep_link_id;return(i?ka(mc(i)).link:null)||i||n||e||t}class Hp{constructor(e){var n,i,r,s,o,a;const l=ka(mc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=nU((r=l.mode)!==null&&r!==void 0?r:null);P(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=iU(e);try{return new Hp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.providerId=As.PROVIDER_ID}static credential(e,n){return Su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Hp.parseLink(n);return P(i,"argument-error"),Su._fromEmailAndCode(e,i.code,i.tenantId)}}As.PROVIDER_ID="password";As.EMAIL_PASSWORD_SIGN_IN_METHOD="password";As.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends kr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fa extends kl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return P("providerId"in n&&"signInMethod"in n,"argument-error"),Hi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return P(e.idToken||e.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=e;if(!i&&!r&&!n&&!s||!a)return null;try{return new Fa(a)._credential({idToken:n,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends kl{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hi._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return pi.credential(n,i)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends kl{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.GITHUB_SIGN_IN_METHOD="github.com";Di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU="http://localhost";class tl extends Tl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return pr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,pr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new tl(i,s)}static _create(e,n){return new tl(e,n)}buildRequest(){return{requestUri:rU,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="saml.";class Df extends kr{constructor(e){P(e.startsWith(sU),"argument-error"),super(e)}static credentialFromResult(e){return Df.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Df.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=tl.fromJSON(e);return P(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return tl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends kl{constructor(){super("twitter.com")}static credential(e,n){return Hi._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ri.credential(n,i)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t,e){return Tr(t,"POST","/v1/accounts:signUp",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await po._fromIdTokenResponse(e,i,r),o=DE(i);return new ai({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=DE(i);return new ai({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function DE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t){var e;const n=ft(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ai({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Ud(n,{returnSecureToken:!0}),r=await ai._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends jt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Rf(e,n,i,r)}}function iA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e){const n=W(t);await qp(!0,n,e);const{providerUserInfo:i}=await _$(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=rA(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function $0(t,e,n=!1){const i=await _r(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",i)}async function qp(t,e,n){await Iu(e);const i=rA(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";P(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await _r(t,iA(i,r,e,t),n);P(s.idToken,i,"internal-error");const o=jp(s.idToken);P(o,i,"internal-error");const{sub:a}=o;return P(t.uid===a,i,"user-mismatch"),ai._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e,n=!1){const i="signIn",r=await iA(t,i,e),s=await ai._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Kp(t,e){return oA(ft(t),e)}async function aA(t,e){const n=W(t);return await qp(!1,n,e.providerId),$0(n,e)}async function lA(t,e){return sA(W(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(t,e){return Tr(t,"POST","/v1/accounts:signInWithCustomToken",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e){const n=ft(t),i=await lU(n,{token:e,returnSecureToken:!0}),r=await ai._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?U0._fromServerResponse(e,n):"totpInfo"in n?V0._fromServerResponse(e,n):Pt(e,"internal-error")}}class U0 extends oh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new U0(n)}}class V0 extends oh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new V0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){var i;P(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),P(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e,n){var i;const r=ft(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const o=await fs(r,s,"getOobCode",!0);n&&$a(r,o,n),await Tm(r,o)}else n&&$a(r,s,n),await Tm(r,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await fs(r,s,"getOobCode",!0);n&&$a(r,a,n),await Tm(r,a)}else return Promise.reject(o)})}async function hU(t,e,n){await tA(W(t),{oobCode:e,newPassword:n})}async function dU(t,e){await H$(W(t),{oobCode:e})}async function cA(t,e){const n=W(t),i=await tA(n,{oobCode:e}),r=i.requestType;switch(P(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":P(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":P(i.mfaInfo,n,"internal-error");default:P(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=oh._fromServerResponse(ft(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function fU(t,e){const{data:n}=await cA(W(t),e);return n.email}async function pU(t,e,n){var i;const r=ft(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const c=await fs(r,s,"signUpPassword");o=Ud(r,c)}else o=Ud(r,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await fs(r,s,"signUpPassword");return Ud(r,u)}else return Promise.reject(c)});const a=await o.catch(c=>Promise.reject(c)),l=await ai._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function gU(t,e,n){return Kp(W(t),As.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e,n){var i;const r=ft(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,l){P(l.handleCodeInApp,r,"argument-error"),l&&$a(r,a,l)}if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const a=await fs(r,s,"getOobCode",!0);o(a,n),await km(r,a)}else o(s,n),await km(r,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await fs(r,s,"getOobCode",!0);o(l,n),await km(r,l)}else return Promise.reject(a)})}function yU(t,e){const n=Hp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function vU(t,e,n){const i=W(t),r=As.credentialWithLink(e,n||bu());return P(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Kp(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){return St(t,"POST","/v1/accounts:createAuthUri",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(t,e){const n=O0()?bu():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await wU(W(t),i);return r||[]}async function bU(t,e){const n=W(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&$a(n.auth,r,e);const{email:s}=await q$(n.auth,r);s!==t.email&&await t.reload()}async function IU(t,e,n){const i=W(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&$a(i.auth,s,n);const{email:o}=await K$(i.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){return St(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=W(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await _r(i,EU(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function TU(t,e){return uA(W(t),e,null)}function kU(t,e){return uA(W(t),null,e)}async function uA(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await _r(t,nA(i,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const o=(n=(e=jp(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ua(s,a)}}if(!i)return null;switch(i){case"facebook.com":return new CU(s,r);case"github.com":return new AU(s,r);case"google.com":return new DU(s,r);case"twitter.com":return new RU(s,r,t.screenName||null);case"custom":case"anonymous":return new Ua(s,null);default:return new Ua(s,i,r)}}class Ua{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class hA extends Ua{constructor(e,n,i,r){super(e,n,i),this.username=r}}class CU extends Ua{constructor(e,n){super(e,"facebook.com",n)}}class AU extends hA{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class DU extends Ua{constructor(e,n){super(e,"google.com",n)}}class RU extends hA{constructor(e,n,i){super(e,"twitter.com",n,i)}}function PU(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:xU(n)}function NU(t,e,n,i){return W(t).onIdTokenChanged(e,n,i)}function OU(t,e,n){return W(t).beforeAuthStateChanged(e,n)}class so{constructor(e,n,i){this.type=e,this.credential=n,this.auth=i}static _fromIdtoken(e,n){return new so("enroll",e,n)}static _fromMfaPendingCredential(e){return new so("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return so._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return so._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=ft(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(a=>oh._fromServerResponse(i,a));P(r.mfaPendingCredential,i,"internal-error");const o=so._fromMfaPendingCredential(r.mfaPendingCredential);return new B0(o,s,async a=>{const l=await a._process(i,o);delete r.mfaInfo,delete r.mfaPendingCredential;const c=Object.assign(Object.assign({},r),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await ai._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(u.user),u;case"reauthenticate":return P(n.user,i,"internal-error"),ai._forOperation(n.user,n.operationType,c);default:Pt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function MU(t,e){var n;const i=W(t),r=e;return P(e.customData.operationType,i,"argument-error"),P((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),B0._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:start",wt(t,e))}function FU(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:finalize",wt(t,e))}function $U(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(t,e))}class z0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>oh._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new z0(e)}async getSession(){return so._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const i=e,r=await this.getSession(),s=await _r(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await _r(this.user,$U(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const xm=new WeakMap;function UU(t){const e=W(t);return xm.has(e)||xm.set(e,z0._fromUser(e)),xm.get(e)}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(){const t=Xe();return L0(t)||Sl(t)}const BU=1e3,zU=10;class fA extends dA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=VU()&&N$(),this.fallbackToPolling=KC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);P$()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,zU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fA.type="LOCAL";const Gp=fA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends dA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pA.type="SESSION";const ps=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await jU(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ah("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return window}function HU(t){mt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){return typeof mt().WorkerGlobalScope<"u"&&typeof mt().importScripts=="function"}async function qU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GU(){return j0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebaseLocalStorageDb",QU=1,Nf="firebaseLocalStorage",mA="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yp(t,e){return t.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function YU(){const t=indexedDB.deleteDatabase(gA);return new lh(t).toPromise()}function pv(){const t=indexedDB.open(gA,QU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Nf,{keyPath:mA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Nf)?e(i):(i.close(),await YU(),e(await pv()))})})}async function RE(t,e,n){const i=Yp(t,!0).put({[mA]:e,value:n});return new lh(i).toPromise()}async function XU(t,e){const n=Yp(t,!1).get(e),i=await new lh(n).toPromise();return i===void 0?null:i.value}function PE(t,e){const n=Yp(t,!0).delete(e);return new lh(n).toPromise()}const JU=800,ZU=3;class yA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ZU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance(GU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qU(),!this.activeServiceWorker)return;this.sender=new WU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pv();return await RE(e,Pf,"1"),await PE(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>RE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>XU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Yp(r,!1).getAll();return new lh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yA.type="LOCAL";const nl=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t,e){return St(t,"POST","/v2/accounts/mfaSignIn:start",wt(t,e))}function tV(t,e){return St(t,"POST","/v2/accounts/mfaSignIn:finalize",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=500,iV=6e4,Jh=1e12;class rV{constructor(e){this.auth=e,this.counter=Jh,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new sV(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Jh;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Jh;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Jh;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class sV{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;P(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=oV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},iV)},nV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function oV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=XC("rcb"),aV=new rh(3e4,6e4),lV="https://www.google.com/recaptcha/api.js?";class cV{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=mt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return P(uV(n),e,"argument-error"),this.shouldResolveImmediately(n)&&kE(mt().grecaptcha)?Promise.resolve(mt().grecaptcha):new Promise((i,r)=>{const s=mt().setTimeout(()=>{r(Ht(e,"network-request-failed"))},aV.get());mt()[Cm]=()=>{mt().clearTimeout(s),delete mt()[Cm];const a=mt().grecaptcha;if(!a||!kE(a)){r(Ht(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,i(a)};const o=`${lV}?${bl({onload:Cm,render:"explicit",hl:n})}`;F0(o).catch(()=>{clearTimeout(s),r(Ht(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=mt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function uV(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class hV{async load(e){return new rV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="recaptcha",dV={theme:"light",type:"image"};let fV=class{constructor(e,n=Object.assign({},dV),i){this.parameters=n,this.type=vA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(i),this.isInvisible=this.parameters.size==="invisible",P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof e=="string"?document.getElementById(e):e;P(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hV:new cV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=mt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){P(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){P(O0()&&!j0(),this.auth,"internal-error"),await pV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await O$(this.auth);P(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function pV(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=mo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function gV(t,e,n){const i=ft(t),r=await Xp(i,e,W(n));return new W0(r,s=>Kp(i,s))}async function mV(t,e,n){const i=W(t);await qp(!1,i,"phone");const r=await Xp(i.auth,e,W(n));return new W0(r,s=>aA(i,s))}async function yV(t,e,n){const i=W(t),r=await Xp(i.auth,e,W(n));return new W0(r,s=>lA(i,s))}async function Xp(t,e,n){var i;const r=await n.verify();try{P(typeof r=="string",t,"argument-error"),P(n.type===vA,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return P(o.type==="enroll",t,"internal-error"),(await LU(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{P(o.type==="signin",t,"internal-error");const a=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return P(a,t,"missing-multi-factor-info"),(await eV(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await X$(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{n._reset()}}async function vV(t,e){await $0(W(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo=class Vd{constructor(e){this.providerId=Vd.PROVIDER_ID,this.auth=ft(e)}verifyPhoneNumber(e,n){return Xp(this.auth,e,W(n))}static credential(e,n){return mo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Vd.credentialFromTaggedObject(n)}static credentialFromError(e){return Vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?mo._fromTokenResponse(n,i):null}};xo.PROVIDER_ID="phone";xo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t,e){return e?Bn(e):(P(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0 extends Tl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wV(t){return oA(t.auth,new H0(t),t.bypassAuthState)}function _V(t){const{auth:e,user:n}=t;return P(n,e,"internal-error"),sA(n,new H0(t),t.bypassAuthState)}async function bV(t){const{auth:e,user:n}=t;return P(n,e,"internal-error"),$0(n,new H0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wV;case"linkViaPopup":case"linkViaRedirect":return bV;case"reauthViaPopup":case"reauthViaRedirect":return _V;default:Pt(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=new rh(2e3,1e4);async function _A(t,e,n){const i=ft(t);El(t,e,kr);const r=qo(i,n);return new ar(i,"signInViaPopup",e,r).executeNotNull()}async function EV(t,e,n){const i=W(t);El(i.auth,e,kr);const r=qo(i.auth,n);return new ar(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function SV(t,e,n){const i=W(t);El(i.auth,e,kr);const r=qo(i.auth,n);return new ar(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class ar extends wA{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return P(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=ah();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ht(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ht(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IV.get())};e()}}ar.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="pendingRedirect",Vc=new Map;class kV extends wA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const i=await xV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xV(t,e){const n=IA(e),i=bA(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function q0(t,e){return bA(t)._set(IA(e),"true")}function CV(){Vc.clear()}function K0(t,e){Vc.set(t._key(),e)}function bA(t){return Bn(t._redirectPersistence)}function IA(t){return go(TV,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t,e,n){return DV(t,e,n)}async function DV(t,e,n){const i=ft(t);El(t,e,kr),await i._initializationPromise;const r=qo(i,n);return await q0(r,i),r._openRedirect(i,e,"signInViaRedirect")}function RV(t,e,n){return PV(t,e,n)}async function PV(t,e,n){const i=W(t);El(i.auth,e,kr),await i.auth._initializationPromise;const r=qo(i.auth,n);await q0(r,i.auth);const s=await EA(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function NV(t,e,n){return OV(t,e,n)}async function OV(t,e,n){const i=W(t);El(i.auth,e,kr),await i.auth._initializationPromise;const r=qo(i.auth,n);await qp(!1,i,e.providerId),await q0(r,i.auth);const s=await EA(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function MV(t,e){return await ft(t)._initializationPromise,Jp(t,e,!1)}async function Jp(t,e,n=!1){const i=ft(t),r=qo(i,e),o=await new kV(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function EA(t){const e=ah(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=10*60*1e3;class SA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!TA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ht(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LV&&this.cachedEventUids.clear(),this.cachedEventUids.has(NE(e))}saveEventToCache(e){this.cachedEventUids.add(NE(e)),this.lastProcessedEventTime=Date.now()}}function NE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e={}){return St(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UV=/^https?/;async function VV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kA(t);for(const n of e)try{if(BV(n))return}catch{}Pt(t,"unauthorized-domain")}function BV(t){const e=bu(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!UV.test(n))return!1;if($V.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=new rh(3e4,6e4);function OE(){const t=mt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jV(t){return new Promise((e,n)=>{var i,r,s;function o(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),n(Ht(t,"network-request-failed"))},timeout:zV.get()})}if(!((r=(i=mt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=mt().gapi)===null||s===void 0)&&s.load)o();else{const a=XC("iframefcb");return mt()[a]=()=>{gapi.load?o():n(Ht(t,"network-request-failed"))},F0(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Bd=null,e})}let Bd=null;function WV(t){return Bd=Bd||jV(t),Bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new rh(5e3,15e3),qV="__/auth/iframe",KV="emulator/auth/iframe",GV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YV(t){const e=t.config;P(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?M0(e,KV):`https://${t.config.authDomain}/${qV}`,i={apiKey:e.apiKey,appName:t.name,v:Sr},r=QV.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${bl(i).slice(1)}`}async function XV(t){const e=await WV(t),n=mt().gapi;return P(n,t,"internal-error"),e.open({where:document.body,url:YV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GV,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Ht(t,"network-request-failed"),a=mt().setTimeout(()=>{s(o)},HV.get());function l(){mt().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZV=500,eB=600,tB="_blank",nB="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iB(t,e,n,i=ZV,r=eB){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},JV),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Xe().toLowerCase();n&&(a=jC(c)?tB:n),zC(c)&&(e=e||nB,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(R$(c)&&a!=="_self")return rB(e||"",a),new ME(null);const h=window.open(e||"",a,u);P(h,t,"popup-blocked");try{h.focus()}catch{}return new ME(h)}function rB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="__/auth/handler",oB="emulator/auth/handler",aB=encodeURIComponent("fac");async function gv(t,e,n,i,r,s){P(t.config.authDomain,t,"auth-domain-config-required"),P(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Sr,eventId:r};if(e instanceof kr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",H2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof kl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${aB}=${encodeURIComponent(l)}`:"";return`${lB(t)}?${bl(a).slice(1)}${c}`}function lB({config:t}){return t.emulator?M0(t,oB):`https://${t.authDomain}/${sB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="webStorageSupport";class cB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ps,this._completeRedirectFn=Jp,this._overrideRedirectResult=K0}async _openPopup(e,n,i,r){var s;_i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gv(e,n,i,bu(),r);return iB(e,o,ah())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await gv(e,n,i,bu(),r);return HU(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(_i(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await XV(e),i=new SA(e);return n.register("authEvent",r=>(P(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Am,{type:Am},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Am];o!==void 0&&n(!!o),Pt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KC()||L0()||Sl()}}const xA=cB;class uB{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Mi("unexpected MultiFactorSessionType")}}}class G0 extends uB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new G0(e)}_finalizeEnroll(e,n,i){return FU(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return tV(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class CA{constructor(){}static assertion(e){return G0._fromCredential(e)}}CA.FACTOR_ID="phone";var LE="@firebase/auth",FE="0.23.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function fB(t){Pn(new Gt("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:i.name}),P(!(a!=null&&a.includes(":")),"argument-error",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GC(t)},c=new V$(i,r,s,l);return z$(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Pn(new Gt("auth-internal",e=>{const n=ft(e.getProvider("auth").getImmediate());return(i=>new hB(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(LE,FE,dB(t)),Wt(LE,FE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=5*60,gB=wC("authIdTokenMaxAge")||pB;let $E=null;const mB=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>gB)return;const r=n==null?void 0:n.token;$E!==r&&($E=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function yB(t=zp()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=B$(t,{popupRedirectResolver:xA,persistence:[nl,Gp,ps]}),i=wC("authTokenSyncURL");if(i){const s=mB(i);OU(n,s,()=>s(n.currentUser)),NU(n,o=>s(o))}const r=yC("auth");return r&&ZC(n,`http://${r}`),n}fB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=2e3;async function wB(t,e,n){var i;const{BuildInfo:r}=Co();_i(e.sessionId,"AuthEvent did not contain a session ID");const s=await SB(e.sessionId),o={};return Sl()?o.ibi=r.packageName:sh()?o.apn=r.packageName:Pt(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,gv(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,o)}async function _B(t){const{BuildInfo:e}=Co(),n={};Sl()?n.iosBundleId=e.packageName:sh()?n.androidPackageName=e.packageName:Pt(t,"operation-not-supported-in-this-environment"),await kA(t,n)}function bB(t){const{cordova:e}=Co();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,D$()?"_blank":"_system","location=yes"),n(r)})})}async function IB(t,e,n){const{cordova:i}=Co();let r=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const d=(h=i.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Ht(t,"redirect-cancelled-by-user"))},vB))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),sh()&&document.addEventListener("visibilitychange",u,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}function EB(t){var e,n,i,r,s,o,a,l,c,u;const h=Co();P(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P(typeof((s=(r=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P(typeof((u=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function SB(t){const e=TB(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function TB(t){if(_i(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=20;class xB extends SA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function CB(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:RB(),postBody:null,tenantId:t.tenantId,error:Ht(t,"no-auth-event")}}function AB(t,e){return mv()._set(yv(t),e)}async function UE(t){const e=await mv()._get(yv(t));return e&&await mv()._remove(yv(t)),e}function DB(t,e){var n,i;const r=NB(e);if(r.includes("/__/auth/callback")){const s=zd(r),o=s.firebaseError?PB(decodeURIComponent(s.firebaseError)):null,a=(i=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],l=a?Ht(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function RB(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<kB;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function mv(){return Bn(Gp)}function yv(t){return go("authEvent",t.config.apiKey,t.name)}function PB(t){try{return JSON.parse(t)}catch{return null}}function NB(t){const e=zd(t),n=e.link?decodeURIComponent(e.link):void 0,i=zd(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return zd(r).link||r||i||n||t}function zd(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ka(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=500;class MB{constructor(){this._redirectPersistence=ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jp,this._overrideRedirectResult=K0}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new xB(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Pt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){EB(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),CV(),await this._originValidation(e);const o=CB(e,i,r);await AB(e,o);const a=await wB(e,o,n),l=await bB(a);return IB(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_B(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Co(),o=setTimeout(async()=>{await UE(e),n.onEvent(VE())},OB),a=async u=>{clearTimeout(o);const h=await UE(e);let d=null;h&&(u!=null&&u.url)&&(d=DB(h,u.url)),n.onEvent(d||VE())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,a);const l=r,c=`${s.packageName.toLowerCase()}://`;Co().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(h){console.error(h)}}}}const LB=MB;function VE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ht("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(t,e){ft(t)._logFramework(e)}var $B="@firebase/auth-compat",UB="0.4.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=1e3;function Bc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function BB(){return Bc()==="http:"||Bc()==="https:"}function AA(t=Xe()){return!!((Bc()==="file:"||Bc()==="ionic:"||Bc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function zB(){return A0()||C0()}function jB(){return IC()&&(document==null?void 0:document.documentMode)===11}function WB(t=Xe()){return/Edge\/\d+/.test(t)}function HB(t=Xe()){return jB()||WB(t)}function DA(){try{const t=self.localStorage,e=ah();if(t)return t.setItem(e,"1"),t.removeItem(e),HB()?To():!0}catch{return Q0()&&To()}return!1}function Q0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dm(){return(BB()||bC()||AA())&&!zB()&&DA()&&!Q0()}function RA(){return AA()&&typeof document<"u"}async function qB(){return RA()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},VB);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function KB(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={LOCAL:"local",NONE:"none",SESSION:"session"},Yl=P,PA="persistence";function GB(t,e){if(Yl(Object.values(Un).includes(e),t,"invalid-persistence-type"),A0()){Yl(e!==Un.SESSION,t,"unsupported-persistence-type");return}if(C0()){Yl(e===Un.NONE,t,"unsupported-persistence-type");return}if(Q0()){Yl(e===Un.NONE||e===Un.LOCAL&&To(),t,"unsupported-persistence-type");return}Yl(e===Un.NONE||DA(),t,"unsupported-persistence-type")}async function vv(t){await t._initializationPromise;const e=NA(),n=go(PA,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function QB(t,e){const n=NA();if(!n)return[];const i=go(PA,t,e);switch(n.getItem(i)){case Un.NONE:return[el];case Un.LOCAL:return[nl,ps];case Un.SESSION:return[ps];default:return[]}}function NA(){var t;try{return((t=KB())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=P;class Hr{constructor(){this.browserResolver=Bn(xA),this.cordovaResolver=Bn(LB),this.underlyingResolver=null,this._redirectPersistence=ps,this._completeRedirectFn=Jp,this._overrideRedirectResult=K0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return RA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return YB(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await qB();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return t.unwrap()}function XB(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t){return MA(t)}function ZB(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new ez(t,MU(t,e))}else if(i){const r=MA(e),s=e;r&&(s.credential=r,s.tenantId=i.tenantId||void 0,s.email=i.email||void 0,s.phoneNumber=i.phoneNumber||void 0)}}function MA(t){const{_tokenResponse:e}=t instanceof jt?t.customData:t;if(!e)return null;if(!(t instanceof jt)&&"temporaryProof"in e&&"phoneNumber"in e)return xo.credentialFromResult(t);const n=e.providerId;if(!n||n===Ql.PASSWORD)return null;let i;switch(n){case Ql.GOOGLE:i=pi;break;case Ql.FACEBOOK:i=Ai;break;case Ql.GITHUB:i=Di;break;case Ql.TWITTER:i=Ri;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!r&&!a?null:a?n.startsWith("saml.")?tl._create(n,a):Hi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:r,accessToken:s}):new Fa(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof jt?i.credentialFromError(t):i.credentialFromResult(t)}function bn(t,e){return e.catch(n=>{throw n instanceof jt&&ZB(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:JB(n),additionalUserInfo:PU(n),user:lr.getOrCreate(r)}})}async function wv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>bn(t,n.confirm(i))}}class ez{constructor(e,n){this.resolver=n,this.auth=XB(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return bn(OA(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._delegate=e,this.multiFactor=UU(e)}static getOrCreate(e){return lr.USER_MAP.has(e)||lr.USER_MAP.set(e,new lr(e)),lr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return bn(this.auth,aA(this._delegate,e))}async linkWithPhoneNumber(e,n){return wv(this.auth,mV(this._delegate,e,n))}async linkWithPopup(e){return bn(this.auth,SV(this._delegate,e,Hr))}async linkWithRedirect(e){return await vv(ft(this.auth)),NV(this._delegate,e,Hr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return bn(this.auth,lA(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return wv(this.auth,yV(this._delegate,e,n))}reauthenticateWithPopup(e){return bn(this.auth,EV(this._delegate,e,Hr))}async reauthenticateWithRedirect(e){return await vv(ft(this.auth)),RV(this._delegate,e,Hr)}sendEmailVerification(e){return bU(this._delegate,e)}async unlink(e){return await aU(this._delegate,e),this}updateEmail(e){return TU(this._delegate,e)}updatePassword(e){return kU(this._delegate,e)}updatePhoneNumber(e){return vV(this._delegate,e)}updateProfile(e){return SU(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return IU(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=P;class _v{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Xl(i,"invalid-api-key",{appName:e.name}),Xl(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Hr:void 0;this._delegate=n.initialize({options:{persistence:tz(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(h$),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){ZC(this._delegate,e,n)}applyActionCode(e){return dU(this._delegate,e)}checkActionCode(e){return cA(this._delegate,e)}confirmPasswordReset(e,n){return hU(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return bn(this._delegate,pU(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return _U(this._delegate,e)}isSignInWithEmailLink(e){return yU(this._delegate,e)}async getRedirectResult(){Xl(Dm(),this._delegate,"operation-not-supported-in-this-environment");const e=await MV(this._delegate,Hr);return e?bn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){FB(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:o}=BE(e,n,i);return this._delegate.onAuthStateChanged(r,s,o)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:o}=BE(e,n,i);return this._delegate.onIdTokenChanged(r,s,o)}sendSignInLinkToEmail(e,n){return mU(this._delegate,e,n)}sendPasswordResetEmail(e,n){return uU(this._delegate,e,n||void 0)}async setPersistence(e){GB(this._delegate,e);let n;switch(e){case Un.SESSION:n=ps;break;case Un.LOCAL:n=await Bn(nl)._isAvailable()?nl:Gp;break;case Un.NONE:n=el;break;default:return Pt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return bn(this._delegate,oU(this._delegate))}signInWithCredential(e){return bn(this._delegate,Kp(this._delegate,e))}signInWithCustomToken(e){return bn(this._delegate,cU(this._delegate,e))}signInWithEmailAndPassword(e,n){return bn(this._delegate,gU(this._delegate,e,n))}signInWithEmailLink(e,n){return bn(this._delegate,vU(this._delegate,e,n))}signInWithPhoneNumber(e,n){return wv(this._delegate,gV(this._delegate,e,n))}async signInWithPopup(e){return Xl(Dm(),this._delegate,"operation-not-supported-in-this-environment"),bn(this._delegate,_A(this._delegate,e,Hr))}async signInWithRedirect(e){return Xl(Dm(),this._delegate,"operation-not-supported-in-this-environment"),await vv(this._delegate),AV(this._delegate,e,Hr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return fU(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}_v.Persistence=Un;function BE(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:o=>r(o&&lr.getOrCreate(o)),error:e,complete:n}}function tz(t,e){const n=QB(t,e);if(typeof self<"u"&&!n.includes(nl)&&n.push(nl),typeof window<"u")for(const i of[Gp,ps])n.includes(i)||n.push(i);return n.includes(el)||n.push(el),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.providerId="phone",this._delegate=new xo(OA(Il.auth()))}static credential(e,n){return xo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Y0.PHONE_SIGN_IN_METHOD=xo.PHONE_SIGN_IN_METHOD;Y0.PROVIDER_ID=xo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=P;class iz{constructor(e,n,i=Il.app()){var r;nz((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new fV(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="auth-compat";function sz(t){t.INTERNAL.registerComponent(new Gt(rz,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new _v(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ia.EMAIL_SIGNIN,PASSWORD_RESET:ia.PASSWORD_RESET,RECOVER_EMAIL:ia.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ia.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ia.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ia.VERIFY_EMAIL}},EmailAuthProvider:As,FacebookAuthProvider:Ai,GithubAuthProvider:Di,GoogleAuthProvider:pi,OAuthProvider:Fa,SAMLAuthProvider:Df,PhoneAuthProvider:Y0,PhoneMultiFactorGenerator:CA,RecaptchaVerifier:iz,TwitterAuthProvider:Ri,Auth:_v,AuthCredential:Tl,Error:jt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion($B,UB)}sz(Il);const oz=(t,e)=>e.some(n=>t instanceof n);let zE,jE;function az(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lz(){return jE||(jE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LA=new WeakMap,bv=new WeakMap,FA=new WeakMap,Rm=new WeakMap,X0=new WeakMap;function cz(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(os(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&LA.set(n,t)}).catch(()=>{}),X0.set(e,t),e}function uz(t){if(bv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bv.set(t,e)}let Iv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hz(t){Iv=t(Iv)}function dz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Pm(this),e,...n);return FA.set(i,e.sort?e.sort():[e]),os(i)}:lz().includes(t)?function(...e){return t.apply(Pm(this),e),os(LA.get(this))}:function(...e){return os(t.apply(Pm(this),e))}}function fz(t){return typeof t=="function"?dz(t):(t instanceof IDBTransaction&&uz(t),oz(t,az())?new Proxy(t,Iv):t)}function os(t){if(t instanceof IDBRequest)return cz(t);if(Rm.has(t))return Rm.get(t);const e=fz(t);return e!==t&&(Rm.set(t,e),X0.set(e,t)),e}const Pm=t=>X0.get(t);function pz(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=os(o);return i&&o.addEventListener("upgradeneeded",l=>{i(os(o.result),l.oldVersion,l.newVersion,os(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const gz=["get","getKey","getAll","getAllKeys","count"],mz=["put","add","delete","clear"],Nm=new Map;function WE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=mz.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||gz.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Nm.set(e,s),s}hz(t=>({...t,get:(e,n,i)=>WE(e,n)||t.get(e,n,i),has:(e,n)=>!!WE(e,n)||t.has(e,n)}));const $A="@firebase/installations",J0="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1e4,VA=`w:${J0}`,BA="FIS_v2",yz="https://firebaseinstallations.googleapis.com/v1",vz=60*60*1e3,wz="installations",_z="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Ao=new Qi(wz,_z,bz);function zA(t){return t instanceof jt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA({projectId:t}){return`${yz}/projects/${t}/installations`}function WA(t){return{token:t.token,requestStatus:2,expiresIn:Ez(t.expiresIn),creationTime:Date.now()}}async function HA(t,e){const i=(await e.json()).error;return Ao.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function qA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Iz(t,{refreshToken:e}){const n=qA(t);return n.append("Authorization",Sz(e)),n}async function KA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Ez(t){return Number(t.replace("s","000"))}function Sz(t){return`${BA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=jA(t),r=qA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:BA,appId:t.appId,sdkVersion:VA},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await KA(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:WA(c.authToken)}}else throw await HA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=/^[cdef][\w-]{21}$/,Ev="";function Cz(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Az(t);return xz.test(n)?n:Ev}catch{return Ev}}function Az(t){return kz(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Map;function YA(t,e){const n=Zp(t);XA(n,e),Dz(n,e)}function XA(t,e){const n=QA.get(t);if(n)for(const i of n)i(e)}function Dz(t,e){const n=Rz();n&&n.postMessage({key:t,fid:e}),Pz()}let oo=null;function Rz(){return!oo&&"BroadcastChannel"in self&&(oo=new BroadcastChannel("[Firebase] FID Change"),oo.onmessage=t=>{XA(t.data.key,t.data.fid)}),oo}function Pz(){QA.size===0&&oo&&(oo.close(),oo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="firebase-installations-database",Oz=1,Do="firebase-installations-store";let Om=null;function Z0(){return Om||(Om=pz(Nz,Oz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Do)}}})),Om}async function Of(t,e){const n=Zp(t),r=(await Z0()).transaction(Do,"readwrite"),s=r.objectStore(Do),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&YA(t,e.fid),e}async function JA(t){const e=Zp(t),i=(await Z0()).transaction(Do,"readwrite");await i.objectStore(Do).delete(e),await i.done}async function eg(t,e){const n=Zp(t),r=(await Z0()).transaction(Do,"readwrite"),s=r.objectStore(Do),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&YA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(t){let e;const n=await eg(t.appConfig,i=>{const r=Mz(i),s=Lz(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Ev?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Mz(t){const e=t||{fid:Cz(),registrationStatus:0};return ZA(e)}function Lz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ao.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Fz(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$z(t)}:{installationEntry:e}}async function Fz(t,e){try{const n=await Tz(t,e);return Of(t.appConfig,n)}catch(n){throw zA(n)&&n.customData.serverCode===409?await JA(t.appConfig):await Of(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function $z(t){let e=await HE(t.appConfig);for(;e.registrationStatus===1;)await GA(100),e=await HE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await e_(t);return i||n}return e}function HE(t){return eg(t,e=>{if(!e)throw Ao.create("installation-not-found");return ZA(e)})}function ZA(t){return Uz(t)?{fid:t.fid,registrationStatus:0}:t}function Uz(t){return t.registrationStatus===1&&t.registrationTime+UA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz({appConfig:t,heartbeatServiceProvider:e},n){const i=Bz(t,n),r=Iz(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:VA,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await KA(()=>fetch(i,a));if(l.ok){const c=await l.json();return WA(c)}else throw await HA("Generate Auth Token",l)}function Bz(t,{fid:e}){return`${jA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t_(t,e=!1){let n;const i=await eg(t.appConfig,s=>{if(!eD(s))throw Ao.create("not-registered");const o=s.authToken;if(!e&&Wz(o))return s;if(o.requestStatus===1)return n=zz(t,e),s;{if(!navigator.onLine)throw Ao.create("app-offline");const a=qz(s);return n=jz(t,a),a}});return n?await n:i.authToken}async function zz(t,e){let n=await qE(t.appConfig);for(;n.authToken.requestStatus===1;)await GA(100),n=await qE(t.appConfig);const i=n.authToken;return i.requestStatus===0?t_(t,e):i}function qE(t){return eg(t,e=>{if(!eD(e))throw Ao.create("not-registered");const n=e.authToken;return Kz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function jz(t,e){try{const n=await Vz(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Of(t.appConfig,i),n}catch(n){if(zA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JA(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Of(t.appConfig,i)}throw n}}function eD(t){return t!==void 0&&t.registrationStatus===2}function Wz(t){return t.requestStatus===2&&!Hz(t)}function Hz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+vz}function qz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Kz(t){return t.requestStatus===1&&t.requestTime+UA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(t){const e=t,{installationEntry:n,registrationPromise:i}=await e_(e);return i?i.catch(console.error):t_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e=!1){const n=t;return await Yz(n),(await t_(n,e)).token}async function Yz(t){const{registrationPromise:e}=await e_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t){if(!t||!t.options)throw Mm("App Configuration");if(!t.name)throw Mm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Mm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Mm(t){return Ao.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="installations",Jz="installations-internal",Zz=t=>{const e=t.getProvider("app").getImmediate(),n=Xz(e),i=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},e4=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,tD).getImmediate();return{getId:()=>Gz(n),getToken:r=>Qz(n,r)}};function t4(){Pn(new Gt(tD,Zz,"PUBLIC")),Pn(new Gt(Jz,e4,"PRIVATE"))}t4();Wt($A,J0);Wt($A,J0,"esm2017");const n4=(t,e)=>e.some(n=>t instanceof n);let KE,GE;function i4(){return KE||(KE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r4(){return GE||(GE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nD=new WeakMap,Sv=new WeakMap,iD=new WeakMap,Lm=new WeakMap,n_=new WeakMap;function s4(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nD.set(n,t)}).catch(()=>{}),n_.set(e,t),e}function o4(t){if(Sv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Sv.set(t,e)}let Tv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function a4(t){Tv=t(Tv)}function l4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Fm(this),e,...n);return iD.set(i,e.sort?e.sort():[e]),gr(i)}:r4().includes(t)?function(...e){return t.apply(Fm(this),e),gr(nD.get(this))}:function(...e){return gr(t.apply(Fm(this),e))}}function c4(t){return typeof t=="function"?l4(t):(t instanceof IDBTransaction&&o4(t),n4(t,i4())?new Proxy(t,Tv):t)}function gr(t){if(t instanceof IDBRequest)return s4(t);if(Lm.has(t))return Lm.get(t);const e=c4(t);return e!==t&&(Lm.set(t,e),n_.set(e,t)),e}const Fm=t=>n_.get(t);function tg(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=gr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(gr(o.result),l.oldVersion,l.newVersion,gr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function Va(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),gr(n).then(()=>{})}const u4=["get","getKey","getAll","getAllKeys","count"],h4=["put","add","delete","clear"],$m=new Map;function QE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($m.get(e))return $m.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=h4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||u4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return $m.set(e,s),s}a4(t=>({...t,get:(e,n,i)=>QE(e,n)||t.get(e,n,i),has:(e,n)=>!!QE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="/firebase-messaging-sw.js",f4="/firebase-cloud-messaging-push-scope",rD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",p4="https://fcmregistrations.googleapis.com/v1",sD="google.c.a.c_id",g4="google.c.a.c_l",m4="google.c.a.ts",y4="google.c.a.e";var YE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(YE||(YE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Tu;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Tu||(Tu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v4(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="fcm_token_details_db",w4=5,XE="fcm_token_object_Store";async function _4(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Um))return null;let e=null;return(await tg(Um,w4,{upgrade:async(i,r,s,o)=>{var a;if(r<2||!i.objectStoreNames.contains(XE))return;const l=o.objectStore(XE),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(r===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:tr(u.vapidKey)}}}else if(r===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:tr(u.auth),p256dh:tr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:tr(u.vapidKey)}}}else if(r===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:tr(u.auth),p256dh:tr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:tr(u.vapidKey)}}}}}})).close(),await Va(Um),await Va("fcm_vapid_details_db"),await Va("undefined"),b4(e)?e:null}function b4(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="firebase-messaging-database",E4=1,Ro="firebase-messaging-store";let Vm=null;function i_(){return Vm||(Vm=tg(I4,E4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ro)}}})),Vm}async function oD(t){const e=s_(t),i=await(await i_()).transaction(Ro).objectStore(Ro).get(e);if(i)return i;{const r=await _4(t.appConfig.senderId);if(r)return await r_(t,r),r}}async function r_(t,e){const n=s_(t),r=(await i_()).transaction(Ro,"readwrite");return await r.objectStore(Ro).put(e,n),await r.done,e}async function S4(t){const e=s_(t),i=(await i_()).transaction(Ro,"readwrite");await i.objectStore(Ro).delete(e),await i.done}function s_({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},dn=new Qi("messaging","Messaging",T4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){const n=await a_(t),i=lD(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(o_(t.appConfig),r)).json()}catch(o){throw dn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw dn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw dn.create("token-subscribe-no-token");return s.token}async function x4(t,e){const n=await a_(t),i=lD(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(`${o_(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw dn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw dn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw dn.create("token-update-no-token");return s.token}async function aD(t,e){const i={method:"DELETE",headers:await a_(t)};try{const s=await(await fetch(`${o_(t.appConfig)}/${e}`,i)).json();if(s.error){const o=s.error.message;throw dn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw dn.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function o_({projectId:t}){return`${p4}/projects/${t}/registrations`}async function a_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function lD({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==rD&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=7*24*60*60*1e3;async function A4(t){const e=await R4(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:tr(e.getKey("auth")),p256dh:tr(e.getKey("p256dh"))},i=await oD(t.firebaseDependencies);if(i){if(P4(i.subscriptionOptions,n))return Date.now()>=i.createTime+C4?D4(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await aD(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return JE(t.firebaseDependencies,n)}else return JE(t.firebaseDependencies,n)}async function cD(t){const e=await oD(t.firebaseDependencies);e&&(await aD(t.firebaseDependencies,e.token),await S4(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function D4(t,e){try{const n=await x4(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await r_(t.firebaseDependencies,i),n}catch(n){throw await cD(t),n}}async function JE(t,e){const i={token:await k4(t,e),createTime:Date.now(),subscriptionOptions:e};return await r_(t,i),i.token}async function R4(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v4(e)})}function P4(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return N4(e,t),O4(e,t),M4(e,t),e}function N4(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r);const s=e.notification.icon;s&&(t.notification.icon=s)}function O4(t,e){e.data&&(t.data=e.data)}function M4(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){return typeof t=="object"&&!!t&&sD in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");uD("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function uD(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){if(!t||!t.options)throw Bm("App Configuration Object");if(!t.name)throw Bm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw Bm(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Bm(t){return dn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $4=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=F4(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t){try{t.swRegistration=await navigator.serviceWorker.register(d4,{scope:f4}),t.swRegistration.update().catch(()=>{})}catch(e){throw dn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(t,e){if(!e&&!t.swRegistration&&await hD(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=rD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){if(!navigator)throw dn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw dn.create("permission-blocked");return await V4(t,e==null?void 0:e.vapidKey),await U4(t,e==null?void 0:e.serviceWorkerRegistration),A4(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e,n){const i=z4(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[sD],message_name:n[g4],message_time:n[m4],message_device_time:Math.floor(Date.now()/1e3)})}function z4(t){switch(t){case Tu.NOTIFICATION_CLICKED:return"notification_open";case Tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Tu.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(ZE(n)):t.onMessageHandler.next(ZE(n)));const i=n.data;L4(i)&&i[y4]==="1"&&await B4(t,n.messageType,i)}const eS="@firebase/messaging",tS="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=t=>{const e=new $4(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>j4(e,n)),e},H4=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:i=>dD(e,i)}};function q4(){Pn(new Gt("messaging",W4,"PUBLIC")),Pn(new Gt("messaging-internal",H4,"PRIVATE")),Wt(eS,tS),Wt(eS,tS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(t){if(!navigator)throw dn.create("only-available-in-window");return t.swRegistration||await hD(t),cD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t,e){if(!navigator)throw dn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function Q4(t,e){return t=W(t),dD(t,e)}function Y4(t){return t=W(t),K4(t)}function X4(t,e){return t=W(t),G4(t,e)}q4();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",J4="https://fcmregistrations.googleapis.com/v1",pD="FCM_MSG",Z4="google.c.a.c_id",ej=3,tj=1;var Mf;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Mf||(Mf={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Lf;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Lf||(Lf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nj(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="fcm_token_details_db",ij=5,nS="fcm_token_object_Store";async function rj(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(zm))return null;let e=null;return(await tg(zm,ij,{upgrade:async(i,r,s,o)=>{var a;if(r<2||!i.objectStoreNames.contains(nS))return;const l=o.objectStore(nS),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(r===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:nr(u.vapidKey)}}}else if(r===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:nr(u.auth),p256dh:nr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:nr(u.vapidKey)}}}else if(r===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:nr(u.auth),p256dh:nr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:nr(u.vapidKey)}}}}}})).close(),await Va(zm),await Va("fcm_vapid_details_db"),await Va("undefined"),sj(e)?e:null}function sj(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="firebase-messaging-database",aj=1,Po="firebase-messaging-store";let jm=null;function l_(){return jm||(jm=tg(oj,aj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Po)}}})),jm}async function c_(t){const e=h_(t),i=await(await l_()).transaction(Po).objectStore(Po).get(e);if(i)return i;{const r=await rj(t.appConfig.senderId);if(r)return await u_(t,r),r}}async function u_(t,e){const n=h_(t),r=(await l_()).transaction(Po,"readwrite");return await r.objectStore(Po).put(e,n),await r.done,e}async function lj(t){const e=h_(t),i=(await l_()).transaction(Po,"readwrite");await i.objectStore(Po).delete(e),await i.done}function h_({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},zi=new Qi("messaging","Messaging",cj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){const n=await f_(t),i=mD(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(d_(t.appConfig),r)).json()}catch(o){throw zi.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw zi.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw zi.create("token-subscribe-no-token");return s.token}async function hj(t,e){const n=await f_(t),i=mD(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(`${d_(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw zi.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw zi.create("token-update-failed",{errorInfo:o})}if(!s.token)throw zi.create("token-update-no-token");return s.token}async function gD(t,e){const i={method:"DELETE",headers:await f_(t)};try{const s=await(await fetch(`${d_(t.appConfig)}/${e}`,i)).json();if(s.error){const o=s.error.message;throw zi.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw zi.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function d_({projectId:t}){return`${J4}/projects/${t}/registrations`}async function f_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function mD({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==fD&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=7*24*60*60*1e3;async function fj(t){const e=await gj(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:nr(e.getKey("auth")),p256dh:nr(e.getKey("p256dh"))},i=await c_(t.firebaseDependencies);if(i){if(mj(i.subscriptionOptions,n))return Date.now()>=i.createTime+dj?pj(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await gD(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return iS(t.firebaseDependencies,n)}else return iS(t.firebaseDependencies,n)}async function kv(t){const e=await c_(t.firebaseDependencies);e&&(await gD(t.firebaseDependencies,e.token),await lj(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function pj(t,e){try{const n=await hj(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await u_(t.firebaseDependencies,i),n}catch(n){throw await kv(t),n}}async function iS(t,e){const i={token:await uj(t,e),createTime:Date.now(),subscriptionOptions:e};return await u_(t,i),i.token}async function gj(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nj(e)})}function mj(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return vj(e,t),wj(e,t),_j(e,t),e}function vj(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r);const s=e.notification.icon;s&&(t.notification.icon=s)}function wj(t,e){e.data&&(t.data=e.data)}function _j(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){return typeof t=="object"&&!!t&&Z4 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");yD("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function Ej(t,e){const n=Sj(e,await t.firebaseDependencies.installations.getId());Tj(t,n)}function Sj(t,e){var n,i;const r={};return t.from&&(r.project_number=t.from),t.fcmMessageId&&(r.message_id=t.fcmMessageId),r.instance_id=e,t.notification?r.message_type=Mf.DISPLAY_NOTIFICATION.toString():r.message_type=Mf.DATA_MESSAGE.toString(),r.sdk_platform=ej.toString(),r.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(r.collapse_key=t.collapse_key),r.event=tj.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(r.analytics_label=(i=t.fcmOptions)===null||i===void 0?void 0:i.analytics_label),r}function Tj(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function yD(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e){var n,i;const{newSubscription:r}=t;if(!r){await kv(e);return}const s=await c_(e.firebaseDependencies);await kv(e),e.vapidKey=(i=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&i!==void 0?i:fD,await fj(e)}async function xj(t,e){const n=Dj(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await Ej(e,n);const i=await vD();if(Pj(i))return Nj(i,n);if(n.notification&&await Oj(Aj(n)),!!e&&e.onBackgroundMessageHandler){const r=yj(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(r):e.onBackgroundMessageHandler.next(r)}}async function Cj(t){var e,n;const i=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[pD];if(i){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const r=Mj(i);if(!r)return;const s=new URL(r,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await Rj(s);if(a?a=await a.focus():(a=await self.clients.openWindow(r),await Ij(3e3)),!!a)return i.messageType=Lf.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,a.postMessage(i)}function Aj(t){const e=Object.assign({},t.notification);return e.data={[pD]:t},e}function Dj({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function Rj(t){const e=await vD();for(const n of e){const i=new URL(n.url,self.location.href);if(t.host===i.host)return n}return null}function Pj(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function Nj(t,e){e.isFirebaseMessaging=!0,e.messageType=Lf.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function vD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Oj(t){var e;const{actions:n}=t,{maxActions:i}=Notification;return n&&i&&n.length>i&&console.warn(`This browser only supports ${i} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function Mj(t){var e,n,i;const r=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(i=t.notification)===null||i===void 0?void 0:i.click_action;return r||(bj(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){if(!t||!t.options)throw Wm("App Configuration Object");if(!t.name)throw Wm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw Wm(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Wm(t){return zi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=Lj(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=t=>{const e=new Fj(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(xj(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(kj(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(Cj(n))}),e};function Uj(){Pn(new Gt("messaging-sw",$j,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t,e){if(self.document!==void 0)throw zi.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function Bj(t,e){return t=W(t),Vj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uj();const zj="@firebase/messaging-compat",jj="0.2.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){return self&&"ServiceWorkerGlobalScope"in self?qj():Hj()}function Hj(){return typeof window<"u"&&To()&&B2()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function qj(){return To()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class rS{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return Q4(this._delegate,e)}async deleteToken(){return Y4(this._delegate)}onMessage(e){return X4(this._delegate,e)}onBackgroundMessage(e){return Bj(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=t=>self&&"ServiceWorkerGlobalScope"in self?new rS(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new rS(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),Gj={isSupported:Wj};function Qj(){Il.INTERNAL.registerComponent(new Gt("messaging-compat",Kj,"PUBLIC").setServiceProps(Gj))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qj();Il.registerVersion(zj,jj);var Yj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,p_=p_||{},Z=Yj||self;function Ff(){}function ng(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ch(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Xj(t){return Object.prototype.hasOwnProperty.call(t,Hm)&&t[Hm]||(t[Hm]=++Jj)}var Hm="closure_uid_"+(1e9*Math.random()>>>0),Jj=0;function Zj(t,e,n){return t.call.apply(t.bind,arguments)}function e5(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function en(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?en=Zj:en=e5,en.apply(null,arguments)}function Zh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ot(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Ds(){this.s=this.s,this.o=this.o}var t5=0;Ds.prototype.s=!1;Ds.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),t5!=0)&&Xj(this)};Ds.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function g_(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function sS(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(ng(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function tn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}tn.prototype.h=function(){this.defaultPrevented=!0};var n5=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",Ff,e),Z.removeEventListener("test",Ff,e)}catch{}return t}();function $f(t){return/^[\s\xa0]*$/.test(t)}var oS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qm(t,e){return t<e?-1:t>e?1:0}function ig(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function Pi(t){return ig().indexOf(t)!=-1}function m_(t){return m_[" "](t),t}m_[" "]=Ff;function _D(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var i5=Pi("Opera"),il=Pi("Trident")||Pi("MSIE"),bD=Pi("Edge"),xv=bD||il,ID=Pi("Gecko")&&!(ig().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge"))&&!(Pi("Trident")||Pi("MSIE"))&&!Pi("Edge"),r5=ig().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge");function ED(){var t=Z.document;return t?t.documentMode:void 0}var Uf;e:{var Km="",Gm=function(){var t=ig();if(ID)return/rv:([^\);]+)(\)|;)/.exec(t);if(bD)return/Edge\/([\d\.]+)/.exec(t);if(il)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(r5)return/WebKit\/(\S+)/.exec(t);if(i5)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gm&&(Km=Gm?Gm[1]:""),il){var Qm=ED();if(Qm!=null&&Qm>parseFloat(Km)){Uf=String(Qm);break e}}Uf=Km}var s5={};function o5(){return _D(s5,9,function(){let t=0;const e=oS(String(Uf)).split("."),n=oS("9").split("."),i=Math.max(e.length,n.length);for(let o=0;t==0&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;t=qm(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||qm(r[2].length==0,s[2].length==0)||qm(r[2],s[2]),r=r[3],s=s[3]}while(t==0)}return 0<=t})}var Cv;if(Z.document&&il){var aS=ED();Cv=aS||parseInt(Uf,10)||void 0}else Cv=void 0;var a5=Cv;function ku(t,e){if(tn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ID){e:{try{m_(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:l5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ku.$.h.call(this)}}Ot(ku,tn);var l5={2:"touch",3:"pen",4:"mouse"};ku.prototype.h=function(){ku.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var uh="closure_listenable_"+(1e6*Math.random()|0),c5=0;function u5(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++c5,this.fa=this.ia=!1}function rg(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function y_(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function SD(t){const e={};for(const n in t)e[n]=t[n];return e}const lS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TD(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<lS.length;s++)n=lS[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function sg(t){this.src=t,this.g={},this.h=0}sg.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Dv(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new u5(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Av(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=wD(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(rg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dv(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var v_="closure_lm_"+(1e6*Math.random()|0),Ym={};function kD(t,e,n,i,r){if(i&&i.once)return CD(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kD(t,e[s],n,i,r);return null}return n=b_(n),t&&t[uh]?t.O(e,n,ch(i)?!!i.capture:!!i,r):xD(t,e,n,!1,i,r)}function xD(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ch(r)?!!r.capture:!!r,a=__(t);if(a||(t[v_]=a=new sg(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=h5(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)n5||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(DD(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function h5(){function t(n){return e.call(t.src,t.listener,n)}const e=d5;return t}function CD(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)CD(t,e[s],n,i,r);return null}return n=b_(n),t&&t[uh]?t.P(e,n,ch(i)?!!i.capture:!!i,r):xD(t,e,n,!0,i,r)}function AD(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)AD(t,e[s],n,i,r);else i=ch(i)?!!i.capture:!!i,n=b_(n),t&&t[uh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Dv(s,n,i,r),-1<n&&(rg(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=__(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dv(e,n,i,r)),(n=-1<t?e[t]:null)&&w_(n))}function w_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[uh])Av(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(DD(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=__(e))?(Av(n,t),n.h==0&&(n.src=null,e[v_]=null)):rg(t)}}}function DD(t){return t in Ym?Ym[t]:Ym[t]="on"+t}function d5(t,e){if(t.fa)t=!0;else{e=new ku(e,this);var n=t.listener,i=t.la||t.src;t.ia&&w_(t),t=n.call(i,e)}return t}function __(t){return t=t[v_],t instanceof sg?t:null}var Xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function b_(t){return typeof t=="function"?t:(t[Xm]||(t[Xm]=function(e){return t.handleEvent(e)}),t[Xm])}function Nt(){Ds.call(this),this.i=new sg(this),this.S=this,this.J=null}Ot(Nt,Ds);Nt.prototype[uh]=!0;Nt.prototype.removeEventListener=function(t,e,n,i){AD(this,t,e,n,i)};function qt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new tn(e,t);else if(e instanceof tn)e.target=e.target||t;else{var r=e;e=new tn(i,t),TD(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=ed(o,i,!0,e)&&r}if(o=e.g=t,r=ed(o,i,!0,e)&&r,r=ed(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=ed(o,i,!1,e)&&r}Nt.prototype.N=function(){if(Nt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)rg(n[i]);delete t.g[e],t.h--}}this.J=null};Nt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Nt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ed(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Av(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var I_=Z.JSON.stringify;function f5(){var t=ND;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class p5{constructor(){this.h=this.g=null}add(e,n){const i=RD.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var RD=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new g5,t=>t.reset());class g5{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function m5(t){Z.setTimeout(()=>{throw t},0)}function PD(t,e){Rv||y5(),Pv||(Rv(),Pv=!0),ND.add(t,e)}var Rv;function y5(){var t=Z.Promise.resolve(void 0);Rv=function(){t.then(v5)}}var Pv=!1,ND=new p5;function v5(){for(var t;t=f5();){try{t.h.call(t.g)}catch(n){m5(n)}var e=RD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pv=!1}function og(t,e){Nt.call(this),this.h=t||1,this.g=e||Z,this.j=en(this.qb,this),this.l=Date.now()}Ot(og,Nt);U=og.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qt(this,"tick"),this.ga&&(E_(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function E_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){og.$.N.call(this),E_(this),delete this.g};function S_(t,e,n){if(typeof t=="function")n&&(t=en(t,n));else if(t&&typeof t.handleEvent=="function")t=en(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function OD(t){t.g=S_(()=>{t.g=null,t.i&&(t.i=!1,OD(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class w5 extends Ds{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OD(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xu(t){Ds.call(this),this.h=t,this.g={}}Ot(xu,Ds);var cS=[];function MD(t,e,n,i){Array.isArray(n)||(n&&(cS[0]=n.toString()),n=cS);for(var r=0;r<n.length;r++){var s=kD(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function LD(t){y_(t.g,function(e,n){this.g.hasOwnProperty(n)&&w_(e)},t),t.g={}}xu.prototype.N=function(){xu.$.N.call(this),LD(this)};xu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ag(){this.g=!0}ag.prototype.Ea=function(){this.g=!1};function _5(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function b5(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function xa(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+E5(t,n)+(i?" "+i:"")})}function I5(t,e){t.info(function(){return"TIMEOUT: "+e})}ag.prototype.info=function(){};function E5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return I_(n)}catch{return e}}var Ko={},uS=null;function lg(){return uS=uS||new Nt}Ko.Ta="serverreachability";function FD(t){tn.call(this,Ko.Ta,t)}Ot(FD,tn);function Cu(t){const e=lg();qt(e,new FD(e))}Ko.STAT_EVENT="statevent";function $D(t,e){tn.call(this,Ko.STAT_EVENT,t),this.stat=e}Ot($D,tn);function un(t){const e=lg();qt(e,new $D(e,t))}Ko.Ua="timingevent";function UD(t,e){tn.call(this,Ko.Ua,t),this.size=e}Ot(UD,tn);function hh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var cg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},VD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function T_(){}T_.prototype.h=null;function hS(t){return t.h||(t.h=t.i())}function BD(){}var dh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function k_(){tn.call(this,"d")}Ot(k_,tn);function x_(){tn.call(this,"c")}Ot(x_,tn);var Nv;function ug(){}Ot(ug,T_);ug.prototype.g=function(){return new XMLHttpRequest};ug.prototype.i=function(){return{}};Nv=new ug;function fh(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new xu(this),this.P=S5,t=xv?125:void 0,this.V=new og(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new zD}function zD(){this.i=null,this.g="",this.h=!1}var S5=45e3,Ov={},Vf={};U=fh.prototype;U.setTimeout=function(t){this.P=t};function Mv(t,e,n){t.L=1,t.v=dg(br(e)),t.s=n,t.S=!0,jD(t,null)}function jD(t,e){t.G=Date.now(),ph(t),t.A=br(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),XD(n.i,"t",i),t.C=0,n=t.l.I,t.h=new zD,t.g=vR(t.l,n?e:null,!t.s),0<t.O&&(t.M=new w5(en(t.Pa,t,t.g),t.O)),MD(t.U,t.g,"readystatechange",t.nb),e=t.I?SD(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cu(),_5(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&cr(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const u=cr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||xv||this.g&&(this.h.h||this.g.ja()||gS(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Cu(3):Cu(2)),hg(this);var n=this.g.da();this.aa=n;t:if(WD(this)){var i=gS(this.g);t="";var r=i.length,s=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ao(this),zc(this);var o="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,b5(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$f(a)){var c=a;break t}}c=null}if(n=c)xa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lv(this,n);else{this.i=!1,this.o=3,un(12),ao(this),zc(this);break e}}this.S?(HD(this,u,o),xv&&this.i&&u==3&&(MD(this.U,this.V,"tick",this.mb),this.V.start())):(xa(this.j,this.m,o,null),Lv(this,o)),u==4&&ao(this),this.i&&!this.J&&(u==4?pR(this.l,this):(this.i=!1,ph(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,un(12)):(this.o=0,un(13)),ao(this),zc(this)}}}catch{}finally{}};function WD(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function HD(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=T5(t,n),r==Vf){e==4&&(t.o=4,un(14),i=!1),xa(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Ov){t.o=4,un(15),xa(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else xa(t.j,t.m,r,null),Lv(t,r);WD(t)&&r!=Vf&&r!=Ov&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,un(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),O_(e),e.L=!0,un(11))):(xa(t.j,t.m,n,"[Invalid Chunked Response]"),ao(t),zc(t))}U.mb=function(){if(this.g){var t=cr(this.g),e=this.g.ja();this.C<e.length&&(hg(this),HD(this,t,e),this.i&&t!=4&&ph(this))}};function T5(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Vf:(n=Number(e.substring(n,i)),isNaN(n)?Ov:(i+=1,i+n>e.length?Vf:(e=e.substr(i,n),t.C=i+n,e)))}U.cancel=function(){this.J=!0,ao(this)};function ph(t){t.Y=Date.now()+t.P,qD(t,t.P)}function qD(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=hh(en(t.lb,t),e)}function hg(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(I5(this.j,this.A),this.L!=2&&(Cu(),un(17)),ao(this),this.o=2,zc(this)):qD(this,this.Y-t)};function zc(t){t.l.H==0||t.J||pR(t.l,t)}function ao(t){hg(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,E_(t.V),LD(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Lv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Fv(n.h,t))){if(!t.K&&Fv(n.h,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jf(n),gg(n);else break e;N_(n),un(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&n.A==0&&!n.v&&(n.v=hh(en(n.ib,n),6e3));if(1>=eR(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else lo(n,11)}else if((t.K||n.g==t)&&jf(n),!$f(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.J=c[1],n.oa=c[2];const u=c[3];u!=null&&(n.qa=u,n.j.info("VER="+n.qa));const h=c[4];h!=null&&(n.Ga=h,n.j.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.h;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(C_(s,s.h),s.h=null))}if(i.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,We(i.G,i.F,g))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=yR(i,i.I?i.oa:null,i.Y),o.K){tR(i.h,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(hg(a),ph(a)),i.g=o}else dR(i);0<n.i.length&&mg(n)}else c[0]!="stop"&&c[0]!="close"||lo(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?lo(n,7):P_(n):c[0]!="noop"&&n.l&&n.l.Aa(c),n.A=0)}}Cu(4)}catch{}}function k5(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ng(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function x5(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ng(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function KD(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ng(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=x5(t),i=k5(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var GD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function yo(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof yo){this.h=e!==void 0?e:t.h,Bf(this,t.j),this.s=t.s,this.g=t.g,zf(this,t.m),this.l=t.l,e=t.i;var n=new Au;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),dS(this,n),this.o=t.o}else t&&(n=String(t).match(GD))?(this.h=!!e,Bf(this,n[1]||"",!0),this.s=vc(n[2]||""),this.g=vc(n[3]||"",!0),zf(this,n[4]),this.l=vc(n[5]||"",!0),dS(this,n[6]||"",!0),this.o=vc(n[7]||"")):(this.h=!!e,this.i=new Au(null,this.h))}yo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(wc(e,fS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(wc(e,fS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(wc(n,n.charAt(0)=="/"?R5:D5,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",wc(n,N5)),t.join("")};function br(t){return new yo(t)}function Bf(t,e,n){t.j=n?vc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dS(t,e,n){e instanceof Au?(t.i=e,O5(t.i,t.h)):(n||(e=wc(e,P5)),t.i=new Au(e,t.h))}function We(t,e,n){t.i.set(e,n)}function dg(t){return We(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,A5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function A5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var fS=/[#\/\?@]/g,D5=/[#\?:]/g,R5=/[#\?]/g,P5=/[#\?@]/g,N5=/#/g;function Au(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Rs(t){t.g||(t.g=new Map,t.h=0,t.i&&C5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=Au.prototype;U.add=function(t,e){Rs(this),this.i=null,t=xl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function QD(t,e){Rs(t),e=xl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function YD(t,e){return Rs(t),e=xl(t,e),t.g.has(e)}U.forEach=function(t,e){Rs(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};U.sa=function(){Rs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};U.Z=function(t){Rs(this);let e=[];if(typeof t=="string")YD(this,t)&&(e=e.concat(this.g.get(xl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return Rs(this),this.i=null,t=xl(this,t),YD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function XD(t,e,n){QD(t,e),0<n.length&&(t.i=null,t.g.set(xl(t,e),g_(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function xl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function O5(t,e){e&&!t.j&&(Rs(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(QD(this,i),XD(this,r,n))},t)),t.j=e}var M5=class{constructor(t,e){this.h=t,this.g=e}};function JD(t){this.l=t||L5,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var L5=10;function ZD(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function eR(t){return t.h?1:t.g?t.g.size:0}function Fv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function C_(t,e){t.g?t.g.add(e):t.h=e}function tR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}JD.prototype.cancel=function(){if(this.i=nR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function nR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return g_(t.i)}function A_(){}A_.prototype.stringify=function(t){return Z.JSON.stringify(t,void 0)};A_.prototype.parse=function(t){return Z.JSON.parse(t,void 0)};function F5(){this.g=new A_}function $5(t,e,n){const i=n||"";try{KD(t,function(r,s){let o=r;ch(r)&&(o=I_(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function U5(t,e){const n=new ag;if(Z.Image){const i=new Image;i.onload=Zh(td,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Zh(td,n,i,"TestLoadImage: error",!1,e),i.onabort=Zh(td,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Zh(td,n,i,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function td(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function gh(t){this.l=t.fc||null,this.j=t.ob||!1}Ot(gh,T_);gh.prototype.g=function(){return new fg(this.l,this.j)};gh.prototype.i=function(t){return function(){return t}}({});function fg(t,e){Nt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=D_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(fg,Nt);var D_=0;U=fg.prototype;U.open=function(t,e){if(this.readyState!=D_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Du(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mh(this)),this.readyState=D_};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Du(this)),this.g&&(this.readyState=3,Du(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function iR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mh(this):Du(this),this.readyState==3&&iR(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,mh(this))};U.Ya=function(t){this.g&&(this.response=t,mh(this))};U.ka=function(){this.g&&mh(this)};function mh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Du(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Du(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var V5=Z.JSON.parse;function ot(t){Nt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=rR,this.L=this.M=!1}Ot(ot,Nt);var rR="",B5=/^https?$/i,z5=["POST","PUT"];U=ot.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nv.g(),this.C=this.u?hS(this.u):hS(Nv),this.g.onreadystatechange=en(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){pS(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=Z.FormData&&t instanceof Z.FormData,!(0<=wD(z5,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{aR(this),0<this.B&&((this.L=j5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=en(this.ua,this)):this.A=S_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){pS(this,s)}};function j5(t){return il&&o5()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof p_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qt(this,"timeout"),this.abort(8))};function pS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,sR(t),pg(t)}function sR(t){t.F||(t.F=!0,qt(t,"complete"),qt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,qt(this,"complete"),qt(this,"abort"),pg(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pg(this,!0)),ot.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?oR(this):this.kb())};U.kb=function(){oR(this)};function oR(t){if(t.h&&typeof p_<"u"&&(!t.C[1]||cr(t)!=4||t.da()!=2)){if(t.v&&cr(t)==4)S_(t.La,0,t);else if(qt(t,"readystatechange"),cr(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(GD)[1]||null;if(!r&&Z.self&&Z.self.location){var s=Z.self.location.protocol;r=s.substr(0,s.length-1)}i=!B5.test(r?r.toLowerCase():"")}n=i}if(n)qt(t,"complete"),qt(t,"success");else{t.m=6;try{var o=2<cr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",sR(t)}}finally{pg(t)}}}}function pg(t,e){if(t.g){aR(t);const n=t.g,i=t.C[0]?Ff:null;t.g=null,t.C=null,e||qt(t,"ready");try{n.onreadystatechange=i}catch{}}}function aR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}function cr(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),V5(e)}};function gS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case rR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function lR(t){let e="";return y_(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function R_(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=lR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):We(t,e,n))}function Jl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cR(t){this.Ga=0,this.i=[],this.j=new ag,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jl("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jl("baseRetryDelayMs",5e3,t),this.hb=Jl("retryDelaySeedMs",1e4,t),this.eb=Jl("forwardChannelMaxRetries",2,t),this.xa=Jl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new JD(t&&t.concurrentRequestLimit),this.Ja=new F5,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}U=cR.prototype;U.qa=8;U.H=1;function P_(t){if(uR(t),t.H==3){var e=t.W++,n=br(t.G);We(n,"SID",t.J),We(n,"RID",e),We(n,"TYPE","terminate"),yh(t,n),e=new fh(t,t.j,e,void 0),e.L=2,e.v=dg(br(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon&&(n=Z.navigator.sendBeacon(e.v.toString(),"")),!n&&Z.Image&&(new Image().src=e.v,n=!0),n||(e.g=vR(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ph(e)}mR(t)}function gg(t){t.g&&(O_(t),t.g.cancel(),t.g=null)}function uR(t){gg(t),t.u&&(Z.clearTimeout(t.u),t.u=null),jf(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function mg(t){ZD(t.h)||t.m||(t.m=!0,PD(t.Na,t),t.C=0)}function W5(t,e){return eR(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=hh(en(t.Na,t,e),gR(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new fh(this,this.j,t,void 0);let s=this.s;if(this.U&&(s?(s=SD(s),TD(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hR(this,r,e),n=br(this.G),We(n,"RID",t),We(n,"CVER",22),this.F&&We(n,"X-HTTP-Session-Id",this.F),yh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(lR(s)))+"&"+e:this.o&&R_(n,this.o,s)),C_(this.h,r),this.bb&&We(n,"TYPE","init"),this.P?(We(n,"$req",e),We(n,"SID","null"),r.ba=!0,Mv(r,n,null)):Mv(r,n,e),this.H=2}}else this.H==3&&(t?mS(this,t):this.i.length==0||ZD(this.h)||mS(this))};function mS(t,e){var n;e?n=e.m:n=t.W++;const i=br(t.G);We(i,"SID",t.J),We(i,"RID",n),We(i,"AID",t.V),yh(t,i),t.o&&t.s&&R_(i,t.o,t.s),n=new fh(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=hR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),C_(t.h,n),Mv(n,i,e)}function yh(t,e){t.ma&&y_(t.ma,function(n,i){We(e,i,n)}),t.l&&KD({},function(n,i){We(e,i,n)})}function hR(t,e,n){n=Math.min(t.i.length,n);var i=t.l?en(t.l.Va,t.l,t):null;e:{var r=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const u=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{$5(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,i}function dR(t){t.g||t.u||(t.ba=1,PD(t.Ma,t),t.A=0)}function N_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=hh(en(t.Ma,t),gR(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,fR(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=hh(en(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,un(10),gg(this),fR(this))};function O_(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function fR(t){t.g=new fh(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=br(t.wa);We(e,"RID","rpc"),We(e,"SID",t.J),We(e,"CI",t.M?"0":"1"),We(e,"AID",t.V),We(e,"TYPE","xmlhttp"),yh(t,e),t.o&&t.s&&R_(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=dg(br(e)),n.s=null,n.S=!0,jD(n,t)}U.ib=function(){this.v!=null&&(this.v=null,gg(this),N_(this),un(19))};function jf(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function pR(t,e){var n=null;if(t.g==e){jf(t),O_(t),t.g=null;var i=2}else if(Fv(t.h,e))n=e.F,tR(t.h,e),i=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=lg(),qt(i,new UD(i,n)),mg(t)}else dR(t);else if(r=e.o,r==3||r==0&&0<t.ta||!(i==1&&W5(t,e)||i==2&&N_(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:lo(t,5);break;case 4:lo(t,10);break;case 3:lo(t,6);break;default:lo(t,2)}}}function gR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function lo(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=en(t.pb,t);n||(n=new yo("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||Bf(n,"https"),dg(n)),U5(n.toString(),i)}else un(2);t.H=0,t.l&&t.l.za(e),mR(t),uR(t)}U.pb=function(t){t?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function mR(t){if(t.H=0,t.pa=[],t.l){const e=nR(t.h);(e.length!=0||t.i.length!=0)&&(sS(t.pa,e),sS(t.pa,t.i),t.h.i.length=0,g_(t.i),t.i.length=0),t.l.ya()}}function yR(t,e,n){var i=n instanceof yo?br(n):new yo(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),zf(i,i.m);else{var r=Z.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new yo(null,void 0);i&&Bf(s,i),e&&(s.g=e),r&&zf(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&We(i,n,e),We(i,"VER",t.qa),yh(t,i),i}function vR(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ot(new gh({ob:!0})):new ot(t.va),e.Oa(t.I),e}function wR(){}U=wR.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.Va=function(){};function Wf(){if(il&&!(10<=Number(a5)))throw Error("Environmental error: no available transport.")}Wf.prototype.g=function(t,e){return new Wn(t,e)};function Wn(t,e){Nt.call(this),this.g=new cR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$f(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$f(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Cl(this)}Ot(Wn,Nt);Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;un(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=yR(t,null,t.Y),mg(t)};Wn.prototype.close=function(){P_(this.g)};Wn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=I_(t),t=n);e.i.push(new M5(e.fb++,t)),e.H==3&&mg(e)};Wn.prototype.N=function(){this.g.l=null,delete this.j,P_(this.g),delete this.g,Wn.$.N.call(this)};function _R(t){k_.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ot(_R,k_);function bR(){x_.call(this),this.status=1}Ot(bR,x_);function Cl(t){this.g=t}Ot(Cl,wR);Cl.prototype.Ba=function(){qt(this.g,"a")};Cl.prototype.Aa=function(t){qt(this.g,new _R(t))};Cl.prototype.za=function(t){qt(this.g,new bR)};Cl.prototype.ya=function(){qt(this.g,"b")};function H5(){this.blockSize=-1}function bi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ot(bi,H5);bi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jm(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}bi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Jm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Jm(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Jm(this,i),r=0;break}}this.h=r,this.i+=e};bi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ce(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var q5={};function M_(t){return-128<=t&&128>t?_D(q5,t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function Li(t){if(isNaN(t)||!isFinite(t))return Ba;if(0>t)return Ut(Li(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=$v;return new Ce(e,0)}function IR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ut(IR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Li(Math.pow(e,8)),i=Ba,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Li(Math.pow(e,s)),i=i.R(s).add(Li(o))):(i=i.R(n),i=i.add(Li(o)))}return i}var $v=4294967296,Ba=M_(0),Uv=M_(1),yS=M_(16777216);U=Ce.prototype;U.ea=function(){if(Zn(this))return-Ut(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:$v+i)*e,e*=$v}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ur(this))return"0";if(Zn(this))return"-"+Ut(this).toString(t);for(var e=Li(Math.pow(t,6)),n=this,i="";;){var r=qf(n,e).g;n=Hf(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,ur(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ur(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Zn(t){return t.h==-1}U.X=function(t){return t=Hf(this,t),Zn(t)?-1:ur(t)?0:1};function Ut(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ce(n,~t.h).add(Uv)}U.abs=function(){return Zn(this)?Ut(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function Hf(t,e){return t.add(Ut(e))}U.R=function(t){if(ur(this)||ur(t))return Ba;if(Zn(this))return Zn(t)?Ut(this).R(Ut(t)):Ut(Ut(this).R(t));if(Zn(t))return Ut(this.R(Ut(t)));if(0>this.X(yS)&&0>t.X(yS))return Li(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,nd(n,2*i+2*r),n[2*i+2*r+1]+=s*l,nd(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,nd(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,nd(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ce(n,0)};function nd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Zl(t,e){this.g=t,this.h=e}function qf(t,e){if(ur(e))throw Error("division by zero");if(ur(t))return new Zl(Ba,Ba);if(Zn(t))return e=qf(Ut(t),e),new Zl(Ut(e.g),Ut(e.h));if(Zn(e))return e=qf(t,Ut(e)),new Zl(Ut(e.g),e.h);if(30<t.g.length){if(Zn(t)||Zn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Uv,i=e;0>=i.X(t);)n=vS(n),i=vS(i);var r=ra(n,1),s=ra(i,1);for(i=ra(i,2),n=ra(n,2);!ur(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=ra(i,1),n=ra(n,1)}return e=Hf(t,r.R(e)),new Zl(r,e)}for(r=Ba;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Li(n),o=s.R(e);Zn(o)||0<o.X(t);)n-=i,s=Li(n),o=s.R(e);ur(s)&&(s=Uv),r=r.add(s),t=Hf(t,o)}return new Zl(r,t)}U.gb=function(t){return qf(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ce(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ce(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ce(n,this.h^t.h)};function vS(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ce(n,t.h)}function ra(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(r,t.h)}Wf.prototype.createWebChannel=Wf.prototype.g;Wn.prototype.send=Wn.prototype.u;Wn.prototype.open=Wn.prototype.m;Wn.prototype.close=Wn.prototype.close;cg.NO_ERROR=0;cg.TIMEOUT=8;cg.HTTP_ERROR=6;VD.COMPLETE="complete";BD.EventType=dh;dh.OPEN="a";dh.CLOSE="b";dh.ERROR="c";dh.MESSAGE="d";Nt.prototype.listen=Nt.prototype.O;ot.prototype.listenOnce=ot.prototype.P;ot.prototype.getLastError=ot.prototype.Sa;ot.prototype.getLastErrorCode=ot.prototype.Ia;ot.prototype.getStatus=ot.prototype.da;ot.prototype.getResponseJson=ot.prototype.Wa;ot.prototype.getResponseText=ot.prototype.ja;ot.prototype.send=ot.prototype.ha;ot.prototype.setWithCredentials=ot.prototype.Oa;bi.prototype.digest=bi.prototype.l;bi.prototype.reset=bi.prototype.reset;bi.prototype.update=bi.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=Li;Ce.fromString=IR;var K5=function(){return new Wf},G5=function(){return lg()},Zm=cg,Q5=VD,Y5=Ko,wS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},X5=gh,id=BD,J5=ot,Z5=bi,za=Ce;const _S="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Vp("@firebase/firestore");function Vv(){return gs.logLevel}function e3(t){gs.setLogLevel(t)}function A(t,...e){if(gs.logLevel<=me.DEBUG){const n=e.map(L_);gs.debug(`Firestore (${Al}): ${t}`,...n)}}function ut(t,...e){if(gs.logLevel<=me.ERROR){const n=e.map(L_);gs.error(`Firestore (${Al}): ${t}`,...n)}}function Ii(t,...e){if(gs.logLevel<=me.WARN){const n=e.map(L_);gs.warn(`Firestore (${Al}): ${t}`,...n)}}function L_(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: `+t;throw ut(e),new Error(e)}function q(t,e){t||B()}function t3(t,e){t||B()}function F(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class i3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r3{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(q(typeof i.accessToken=="string"),new ER(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new Ct(e)}}class s3{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class o3{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new s3(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l3{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=s=>{s.error!=null&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(q(typeof n.token=="string"),this.T=n.token,new a3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=c3(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function te(t,e){return t<e?-1:t>e?1:0}function rl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function TR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new qe(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new qe(0,0))}static max(){return new H(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,i){n===void 0?n=0:n>e.length&&B(),i===void 0?i=e.length-n:i>e.length-n&&B(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ru.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ru?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Ru{construct(e,n,i){return new ye(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new C(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const u3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Ru{construct(e,n,i){return new ht(e,n,i)}static isValidIdentifier(e){return u3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new C(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new C(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new C(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new C(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.path=e}static fromPath(e){return new L(ye.fromString(e))}static fromName(e){return new L(ye.fromString(e).popFirst(5))}static empty(){return new L(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new L(new ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function Bv(t){return t.fields.find(e=>e.kind===2)}function Ks(t){return t.fields.filter(e=>e.kind!==2)}kR.UNKNOWN_ID=-1;class h3{constructor(e,n){this.fieldPath=e,this.kind=n}}class Kf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Kf(0,Hn.min())}}function xR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=H.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Hn(r,L.empty(),e)}function CR(t){return new Hn(t.readTime,t.key,-1)}class Hn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Hn(H.min(),L.empty(),-1)}static max(){return new Hn(H.max(),L.empty(),-1)}}function F_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=L.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==AR)throw t;A("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,i)=>{n(e)})}static reject(e){return new S((n,i)=>{i(e)})}static waitFor(e){return new S((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=S.resolve(!1);for(const i of e)n=n.next(r=>r?S.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new S((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new S((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.R=new Rt,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{n.error?this.R.reject(new jc(e,n.error)):this.R.resolve()},this.transaction.onerror=i=>{const r=$_(i.target.error);this.R.reject(new jc(e,r))}}static open(e,n,i,r){try{return new yg(n,e.transaction(r,i))}catch(s){throw new jc(n,s)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new f3(n)}}class gi{constructor(e,n,i){this.name=e,this.version=n,this.V=i,gi.S(Xe())===12.2&&ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),Xs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!To())return!1;if(gi.C())return!0;const e=Xe(),n=gi.S(e),i=0<n&&n<10,r=gi.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.k)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(A("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;n(o)},r.onblocked=()=>{i(new jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new C(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new C(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new jc(e,o))},r.onupgradeneeded=s=>{A("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.V.$(o,r.transaction,s.oldVersion,this.version).next(()=>{A("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=n=>this.F(n)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=yg.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.P(),c)).catch(c=>(a.abort(c),S.reject(c))).toPromise();return l.catch(()=>{}),await a.v,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(A("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class d3{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Xs(this.L.delete())}}class jc extends C{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ns(t){return t.name==="IndexedDbTransactionError"}class f3{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(A("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Xs(i)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),Xs(this.store.add(e))}get(e){return Xs(this.store.get(e)).next(n=>(n===void 0&&(n=null),A("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),Xs(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),Xs(this.store.count())}j(e,n){const i=this.options(e,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.W(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new S((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new S((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}J(e,n){A("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}X(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.W(r,n)}Z(e){const n=this.cursor({});return new S((i,r)=>{n.onerror=s=>{const o=$_(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,n){const i=[];return new S((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new d3(a),c=n(a.primaryKey,a.value,l);if(c instanceof S){const u=c.catch(h=>(l.done(),S.reject(h)));i.push(u)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>S.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Xs(t){return new S((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=$_(i.target.error);n(r)}})}let bS=!1;function $_(t){const e=gi.S(Xe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new C("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bS||(bS=!0,setTimeout(()=>{throw i},0)),i}}return t}class p3{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}et(e){A("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{A("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(n){Ns(n)?A("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Ps(n)}await this.et(6e4)})}}class g3{constructor(e,n){this.localStore=e,this.persistence=n}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.st(n,e))}st(e,n){const i=new Set;let r=n,s=!0;return S.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return A("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}it(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(r,s)).next(a=>(A("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}rt(e,n){let i=e;return n.changes.forEach((r,s)=>{const o=CR(s);F_(o,i)>0&&(i=o)}),new Hn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}kn.ct=-1;function vh(t){return t==null}function Pu(t){return t===0&&1/t==-1/0}function RR(t){return typeof t=="number"&&Number.isInteger(t)&&!Pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IS(e)),e=m3(t.get(n),e);return IS(e)}function m3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function IS(t){return t+""}function Fi(t){const e=t.length;if(q(e>=2),e===2)return q(t.charAt(0)===""&&t.charAt(1)===""),ye.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&B(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:B()}s=o+2}return new ye(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e){return[t,fn(e)]}function PR(t,e,n){return[t,fn(e),n]}const y3={},v3=["prefixPath","collectionGroup","readTime","documentId"],w3=["prefixPath","collectionGroup","documentId"],_3=["collectionGroup","readTime","prefixPath","documentId"],b3=["canonicalId","targetId"],I3=["targetId","path"],E3=["path","targetId"],S3=["collectionId","parent"],T3=["indexId","uid"],k3=["uid","sequenceNumber"],x3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],C3=["indexId","uid","orderedDocumentKey"],A3=["userId","collectionPath","documentId"],D3=["userId","collectionPath","largestBatchId"],R3=["userId","collectionGroup","largestBatchId"],NR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],P3=[...NR,"documentOverlays"],OR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MR=OR,N3=[...MR,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends DR{constructor(e,n){super(),this.at=e,this.currentSequenceNumber=n}}function Mt(t,e){const n=F(t);return gi.M(n.at,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??$t.RED,this.left=r??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new $t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,n,i,r){return this}insert(t,e,n){return new $t(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new TS(this.data.getIterator())}getIteratorFrom(e){return new TS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class TS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new xn([])}unionWith(e){let n=new $e(ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new FR("Invalid base64 string: "+r):r}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const M3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(q(!!t),typeof t=="string"){let e=0;const n=M3.exec(t);if(q(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function U_(t){const e=t.mapValue.fields.__previous_value__;return vg(e)?U_(e):e}function Nu(t){const e=ms(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n,i,r,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class vs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wd={nullValue:"NULL_VALUE"};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vg(t)?4:$R(t)?9007199254740991:10:B()}function qi(t,e){if(t===e)return!0;const n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=ms(i.timestampValue),o=ms(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return ys(i.bytesValue).isEqual(ys(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return tt(i.geoPointValue.latitude)===tt(r.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return tt(i.integerValue)===tt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=tt(i.doubleValue),o=tt(r.doubleValue);return s===o?Pu(s)===Pu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(SS(s)!==SS(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!qi(s[a],o[a])))return!1;return!0}(t,e);default:return B()}}function Ou(t,e){return(t.values||[]).find(n=>qi(n,e))!==void 0}function ws(t,e){if(t===e)return 0;const n=No(t),i=No(e);if(n!==i)return te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=tt(r.integerValue||r.doubleValue),a=tt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return kS(t.timestampValue,e.timestampValue);case 4:return kS(Nu(t),Nu(e));case 5:return te(t.stringValue,e.stringValue);case 6:return function(r,s){const o=ys(r),a=ys(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=te(o[l],a[l]);if(c!==0)return c}return te(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=te(tt(r.latitude),tt(s.latitude));return o!==0?o:te(tt(r.longitude),tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=ws(o[l],a[l]);if(c)return c}return te(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===qr.mapValue&&s===qr.mapValue)return 0;if(r===qr.mapValue)return 1;if(s===qr.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=te(a[u],c[u]);if(h!==0)return h;const d=ws(o[a[u]],l[c[u]]);if(d!==0)return d}return te(a.length,c.length)}(t.mapValue,e.mapValue);default:throw B()}}function kS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=ms(t),i=ms(e),r=te(n.seconds,i.seconds);return r!==0?r:te(n.nanos,i.nanos)}function sl(t){return jv(t)}function jv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=ms(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ys(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,L.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=jv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${jv(i.fields[a])}`;return s+"}"}(t.mapValue):B();var e,n}function Oo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wv(t){return!!t&&"integerValue"in t}function Mu(t){return!!t&&"arrayValue"in t}function xS(t){return!!t&&"nullValue"in t}function CS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hd(t){return!!t&&"mapValue"in t}function Wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Wc(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $R(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function F3(t){return"nullValue"in t?Wd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Oo(vs.empty(),L.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:B()}function $3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Oo(vs.empty(),L.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?qr:B()}function AS(t,e){const n=ws(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function DS(t,e){const n=ws(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Hd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(n)}setAll(e){let n=ht.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Wc(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Hd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Hd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Go(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Vt(Wc(this.value))}}function UR(t){const e=[];return Go(t.fields,(n,i)=>{const r=new ht([n]);if(Hd(i)){const s=UR(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Le(e,0,H.min(),H.min(),H.min(),Vt.empty(),0)}static newFoundDocument(e,n,i,r){return new Le(e,1,n,H.min(),i,r,0)}static newNoDocument(e,n){return new Le(e,2,n,H.min(),H.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new Le(e,3,n,H.min(),H.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Le&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n){this.position=e,this.inclusive=n}}function RS(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=L.comparator(L.fromName(o.referenceValue),n.key):i=ws(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function PS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function U3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{}class le extends VR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new V3(e,n,i):n==="array-contains"?new j3(e,i):n==="in"?new qR(e,i):n==="not-in"?new W3(e,i):n==="array-contains-any"?new H3(e,i):new le(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new B3(e,i):new z3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ws(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ke extends VR{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new ke(e,n)}matches(e){return ol(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ol(t){return t.op==="and"}function Hv(t){return t.op==="or"}function V_(t){return BR(t)&&ol(t)}function BR(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function qv(t){if(t instanceof le)return t.field.canonicalString()+t.op.toString()+sl(t.value);if(V_(t))return t.filters.map(e=>qv(e)).join(",");{const e=t.filters.map(n=>qv(n)).join(",");return`${t.op}(${e})`}}function zR(t,e){return t instanceof le?function(n,i){return i instanceof le&&n.op===i.op&&n.field.isEqual(i.field)&&qi(n.value,i.value)}(t,e):t instanceof ke?function(n,i){return i instanceof ke&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,s,o)=>r&&zR(s,i.filters[o]),!0):!1}(t,e):void B()}function jR(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function WR(t){return t instanceof le?function(e){return`${e.field.canonicalString()} ${e.op} ${sl(e.value)}`}(t):t instanceof ke?function(e){return e.op.toString()+" {"+e.getFilters().map(WR).join(" ,")+"}"}(t):"Filter"}class V3 extends le{constructor(e,n,i){super(e,n,i),this.key=L.fromName(i.referenceValue)}matches(e){const n=L.comparator(e.key,this.key);return this.matchesComparison(n)}}class B3 extends le{constructor(e,n){super(e,"in",n),this.keys=HR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z3 extends le{constructor(e,n){super(e,"not-in",n),this.keys=HR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>L.fromName(i.referenceValue))}class j3 extends le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mu(n)&&Ou(n.arrayValue,this.value)}}class qR extends le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ou(this.value.arrayValue,n)}}class W3 extends le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ou(this.value.arrayValue,n)}}class H3 extends le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ou(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function Kv(t,e=null,n=[],i=[],r=null,s=null,o=null){return new q3(t,e,n,i,r,s,o)}function Mo(t){const e=F(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>qv(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>sl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>sl(i)).join(",")),e.ft=n}return e.ft}function wh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PS(t.startAt,e.startAt)&&PS(t.endAt,e.endAt)}function Gf(t){return L.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qf(t,e){return t.filters.filter(n=>n instanceof le&&n.field.isEqual(e))}function NS(t,e,n){let i=Wd,r=!0;for(const s of Qf(t,e)){let o=Wd,a=!0;switch(s.op){case"<":case"<=":o=F3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Wd}AS({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];AS({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function OS(t,e,n){let i=qr,r=!0;for(const s of Qf(t,e)){let o=qr,a=!0;switch(s.op){case">=":case">":o=$3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qr}DS({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];DS({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function KR(t,e,n,i,r,s,o,a){return new xr(t,e,n,i,r,s,o,a)}function Dl(t){return new xr(t)}function MS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function wg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function z_(t){return t.collectionGroup!==null}function vo(t){const e=F(t);if(e.dt===null){e.dt=[];const n=wg(e),i=B_(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new ja(n)),e.dt.push(new ja(ht.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ja(ht.keyField(),s))}}}return e.dt}function Nn(t){const e=F(t);if(!e._t)if(e.limitType==="F")e._t=Kv(e.path,e.collectionGroup,vo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of vo(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new ja(s.field,o))}const i=e.endAt?new _s(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _s(e.startAt.position,e.startAt.inclusive):null;e._t=Kv(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function Gv(t,e){e.getFirstInequalityField(),wg(t);const n=t.filters.concat([e]);return new xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yf(t,e,n){return new xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _h(t,e){return wh(Nn(t),Nn(e))&&t.limitType===e.limitType}function GR(t){return`${Mo(Nn(t))}|lt:${t.limitType}`}function Qv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>WR(i)).join(", ")}]`),vh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>sl(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>sl(i)).join(",")),`Target(${n})`}(Nn(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):L.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of vo(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,s,o){const a=RS(r,s,o);return r.inclusive?a<=0:a<0}(n.startAt,vo(n),i)||n.endAt&&!function(r,s,o){const a=RS(r,s,o);return r.inclusive?a>=0:a>0}(n.endAt,vo(n),i))}(t,e)}function QR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YR(t){return(e,n)=>{let i=!1;for(const r of vo(t)){const s=K3(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function K3(t,e,n){const i=t.field.isKeyField()?L.comparator(e.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?ws(a,l):B()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return LR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=new Re(L.comparator);function Cn(){return G3}const XR=new Re(L.comparator);function _c(...t){let e=XR;for(const n of t)e=e.insert(n.key,n);return e}function JR(t){let e=XR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $i(){return Hc()}function ZR(){return Hc()}function Hc(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const Q3=new Re(L.comparator),Y3=new $e(L.comparator);function ne(...t){let e=Y3;for(const n of t)e=e.add(n);return e}const X3=new $e(te);function j_(){return X3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function tP(t){return{integerValue:""+t}}function nP(t,e){return RR(e)?tP(e):eP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this._=void 0}}function J3(t,e,n){return t instanceof al?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&vg(r)&&(r=U_(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Lo?rP(t,e):t instanceof Fo?sP(t,e):function(i,r){const s=iP(i,r),o=LS(s)+LS(i.wt);return Wv(s)&&Wv(i.wt)?tP(o):eP(i.serializer,o)}(t,e)}function Z3(t,e,n){return t instanceof Lo?rP(t,e):t instanceof Fo?sP(t,e):n}function iP(t,e){return t instanceof ll?Wv(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class al extends _g{}class Lo extends _g{constructor(e){super(),this.elements=e}}function rP(t,e){const n=oP(e);for(const i of t.elements)n.some(r=>qi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Fo extends _g{constructor(e){super(),this.elements=e}}function sP(t,e){let n=oP(e);for(const i of t.elements)n=n.filter(r=>!qi(r,i));return{arrayValue:{values:n}}}class ll extends _g{constructor(e,n){super(),this.serializer=e,this.wt=n}}function LS(t){return tt(t.integerValue||t.doubleValue)}function oP(t){return Mu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.field=e,this.transform=n}}function e6(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Lo&&i instanceof Lo||n instanceof Fo&&i instanceof Fo?rl(n.elements,i.elements,qi):n instanceof ll&&i instanceof ll?qi(n.wt,i.wt):n instanceof al&&i instanceof al}(t.transform,e.transform)}class t6{constructor(e,n){this.version=e,this.transformResults=n}}class He{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new He}static exists(e){return new He(void 0,e)}static updateTime(e){return new He(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bg{}function aP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pl(t.key,He.none()):new Rl(t.key,t.data,He.none());{const n=t.data,i=Vt.empty();let r=new $e(ht.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Cr(t.key,i,new xn(r.toArray()),He.none())}}function n6(t,e,n){t instanceof Rl?function(i,r,s){const o=i.value.clone(),a=$S(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Cr?function(i,r,s){if(!qd(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=$S(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(lP(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function qc(t,e,n,i){return t instanceof Rl?function(r,s,o,a){if(!qd(r.precondition,s))return o;const l=r.value.clone(),c=US(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Cr?function(r,s,o,a){if(!qd(r.precondition,s))return o;const l=US(r.fieldTransforms,a,s),c=s.data;return c.setAll(lP(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(r,s,o){return qd(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function i6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=iP(i.transform,r||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(i.field,s))}return n||null}function FS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&rl(n,i,(r,s)=>e6(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rl extends bg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cr extends bg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function $S(t,e,n){const i=new Map;q(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Z3(o,a,n[r]))}return i}function US(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,J3(s,o,e))}return i}class Pl extends bg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W_ extends bg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&n6(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=qc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=qc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ZR();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=aP(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(n,i)=>FS(n,i))&&rl(this.baseMutations,e.baseMutations,(n,i)=>FS(n,i))}}class q_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){q(e.mutations.length===i.length);let r=Q3;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new q_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,ge;function cP(t){switch(t){default:return B();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function uP(t){if(t===void 0)return ut("GRPC error has no .code"),k.UNKNOWN;switch(t){case gt.OK:return k.OK;case gt.CANCELLED:return k.CANCELLED;case gt.UNKNOWN:return k.UNKNOWN;case gt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case gt.INTERNAL:return k.INTERNAL;case gt.UNAVAILABLE:return k.UNAVAILABLE;case gt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case gt.NOT_FOUND:return k.NOT_FOUND;case gt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case gt.ABORTED:return k.ABORTED;case gt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case gt.DATA_LOSS:return k.DATA_LOSS;default:return B()}}(ge=gt||(gt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return sd}static getOrCreateInstance(){return sd===null&&(sd=new G_),sd}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let sd=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=new za([4294967295,4294967295],0);function VS(t){const e=hP().encode(t),n=new Z5;return n.update(e),new Uint8Array(n.digest())}function BS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new za([n,i],0),new za([r,s],0)]}class Q_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new bc(`Invalid padding: ${n}`);if(i<0)throw new bc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new bc(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=za.fromNumber(this.yt)}Tt(e,n,i){let r=e.add(n.multiply(za.fromNumber(i)));return r.compare(s6)===1&&(r=new za([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=VS(e),[i,r]=BS(n);for(let s=0;s<this.hashCount;s++){const o=this.Tt(i,r,s);if(!this.Et(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Q_(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.yt===0)return;const n=VS(e),[i,r]=BS(n);for(let s=0;s<this.hashCount;s++){const o=this.Tt(i,r,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Eh(H.min(),r,new Re(te),Cn(),ne())}}class Sh{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Sh(i,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,i,r){this.vt=e,this.removedTargetIds=n,this.key=i,this.Pt=r}}class dP{constructor(e,n){this.targetId=e,this.bt=n}}class fP{constructor(e,n,i=It.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class zS{constructor(){this.Vt=0,this.St=WS(),this.Dt=It.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=ne(),n=ne(),i=ne();return this.St.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:B()}}),new Sh(this.Dt,this.Ct,e,n,i)}$t(){this.xt=!1,this.St=WS()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class o6{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Cn(),this.jt=jS(),this.zt=new Re(te)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const i=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&i.Mt(e.resumeToken);break;case 1:i.qt(),i.Nt||i.$t(),i.Mt(e.resumeToken);break;case 2:i.qt(),i.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(i.Ut(),i.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),i.Mt(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((i,r)=>{this.Zt(r)&&n(r)})}ee(e){var n;const i=e.targetId,r=e.bt.count,s=this.ne(i);if(s){const o=s.target;if(Gf(o))if(r===0){const a=new L(o.path);this.Jt(i,a,Le.newNoDocument(a,H.min()))}else q(r===1);else{const a=this.se(i);if(a!==r){const l=this.ie(e,a);if(l!==0){this.te(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(i,c)}(n=G_.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var d,f,p,g,w,y;const m={localCacheCount:u,existenceFilterCount:h.count},v=h.unchangedNames;return v&&(m.bloomFilter={applied:c===0,hashCount:(d=v==null?void 0:v.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(g=(p=(f=v==null?void 0:v.bits)===null||f===void 0?void 0:f.bitmap)===null||p===void 0?void 0:p.length)!==null&&g!==void 0?g:0,padding:(y=(w=v==null?void 0:v.bits)===null||w===void 0?void 0:w.padding)!==null&&y!==void 0?y:0}),m}(l,a,e.bt))}}}}ie(e,n){const{unchangedNames:i,count:r}=e.bt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=ys(s).toUint8Array()}catch(u){if(u instanceof FR)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Q_(l,o,a)}catch(u){return Ii(u instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.yt===0?1:r!==n-this.re(e.targetId,c)?2:0}re(e,n){const i=this.Kt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Kt.oe(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.At(a)||(this.Jt(e,s,null),r++)}),r}ue(e){const n=new Map;this.Gt.forEach((s,o)=>{const a=this.ne(o);if(a){if(s.current&&Gf(a.target)){const l=new L(a.target.path);this.Qt.get(l)!==null||this.ce(o,l)||this.Jt(o,l,Le.newNoDocument(l,e))}s.kt&&(n.set(o,s.Ot()),s.$t())}});let i=ne();this.jt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ne(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qt.forEach((s,o)=>o.setReadTime(e));const r=new Eh(e,n,this.zt,this.Qt,i);return this.Qt=Cn(),this.jt=jS(),this.zt=new Re(te),r}Ht(e,n){if(!this.Zt(e))return;const i=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,i),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,i){if(!this.Zt(e))return;const r=this.Xt(e);this.ce(e,n)?r.Ft(n,1):r.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),i&&(this.Qt=this.Qt.insert(n,i))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new zS,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new $e(te),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||A("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new zS),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function jS(){return new Re(L.comparator)}function WS(){return new Re(L.comparator)}const a6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),l6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),c6=(()=>({and:"AND",or:"OR"}))();class u6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yv(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h6(t,e){return cl(t,e.toTimestamp())}function dt(t){return q(!!t),H.fromTimestamp(function(e){const n=ms(e);return new qe(n.seconds,n.nanos)}(t))}function Y_(t,e){return function(n){return new ye(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function gP(t){const e=ye.fromString(t);return q(SP(e)),e}function Lu(t,e){return Y_(t.databaseId,e.path)}function ji(t,e){const n=gP(e);if(n.get(1)!==t.databaseId.projectId)throw new C(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new L(yP(n))}function Xv(t,e){return Y_(t.databaseId,e)}function mP(t){const e=gP(t);return e.length===4?ye.emptyPath():yP(e)}function Fu(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yP(t){return q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HS(t,e,n){return{name:Lu(t,e),fields:n.value.mapValue.fields}}function vP(t,e,n){const i=ji(t,e.name),r=dt(e.updateTime),s=e.createTime?dt(e.createTime):H.min(),o=new Vt({mapValue:{fields:e.fields}}),a=Le.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function d6(t,e){return"found"in e?function(n,i){q(!!i.found),i.found.name,i.found.updateTime;const r=ji(n,i.found.name),s=dt(i.found.updateTime),o=i.found.createTime?dt(i.found.createTime):H.min(),a=new Vt({mapValue:{fields:i.found.fields}});return Le.newFoundDocument(r,s,o,a)}(t,e):"missing"in e?function(n,i){q(!!i.missing),q(!!i.readTime);const r=ji(n,i.missing),s=dt(i.readTime);return Le.newNoDocument(r,s)}(t,e):B()}function f6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(q(c===void 0||typeof c=="string"),It.fromBase64String(c||"")):(q(c===void 0||c instanceof Uint8Array),It.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?k.UNKNOWN:uP(l.code);return new C(c,l.message||"")}(o);n=new fP(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ji(t,i.document.name),s=dt(i.document.updateTime),o=i.document.createTime?dt(i.document.createTime):H.min(),a=new Vt({mapValue:{fields:i.document.fields}}),l=Le.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Kd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ji(t,i.document),s=i.readTime?dt(i.readTime):H.min(),o=Le.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Kd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ji(t,i.document),s=i.removedTargetIds||[];n=new Kd([],s,r,null)}else{if(!("filter"in e))return B();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new r6(r,s),a=i.targetId;n=new dP(a,o)}}return n}function $u(t,e){let n;if(e instanceof Rl)n={update:HS(t,e.key,e.value)};else if(e instanceof Pl)n={delete:Lu(t,e.key)};else if(e instanceof Cr)n={update:HS(t,e.key,e.data),updateMask:w6(e.fieldMask)};else{if(!(e instanceof W_))return B();n={verify:Lu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof al)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Lo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Fo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ll)return{fieldPath:s.field.canonicalString(),increment:o.wt};throw B()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:h6(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:B()}(t,e.precondition)),n}function Jv(t,e){const n=e.currentDocument?function(r){return r.updateTime!==void 0?He.updateTime(dt(r.updateTime)):r.exists!==void 0?He.exists(r.exists):He.none()}(e.currentDocument):He.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let a=null;if("setToServerValue"in o)q(o.setToServerValue==="REQUEST_TIME"),a=new al;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Lo(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Fo(c)}else"increment"in o?a=new ll(s,o.increment):B();const l=ht.fromServerFormat(o.fieldPath);return new Ih(l,a)}(t,r)):[];if(e.update){e.update.name;const r=ji(t,e.update.name),s=new Vt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new xn(l.map(c=>ht.fromServerFormat(c)))}(e.updateMask);return new Cr(r,s,o,n,i)}return new Rl(r,s,n,i)}if(e.delete){const r=ji(t,e.delete);return new Pl(r,n)}if(e.verify){const r=ji(t,e.verify);return new W_(r,n)}return B()}function p6(t,e){return t&&t.length>0?(q(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?dt(i.updateTime):dt(r);return s.isEqual(H.min())&&(s=dt(r)),new t6(s,i.transformResults||[])}(n,e))):[]}function wP(t,e){return{documents:[Xv(t,e.path)]}}function _P(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Xv(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Xv(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(l.length!==0)return EP(ke.create(l,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:ua(u.field),direction:m6(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Yv(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function bP(t){let e=mP(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){q(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const h=IP(u);return h instanceof ke&&V_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new ja(ha(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,vh(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new _s(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new _s(d,h)}(n.endAt)),KR(e,r,o,s,a,"F",l,c)}function g6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IP(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ha(e.unaryFilter.field);return le.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=ha(e.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ha(e.unaryFilter.field);return le.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ha(e.unaryFilter.field);return le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(e){return le.create(ha(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return ke.create(e.compositeFilter.filters.map(n=>IP(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return B()}}(e.compositeFilter.op))}(t):B()}function m6(t){return a6[t]}function y6(t){return l6[t]}function v6(t){return c6[t]}function ua(t){return{fieldPath:t.canonicalString()}}function ha(t){return ht.fromServerFormat(t.fieldPath)}function EP(t){return t instanceof le?function(e){if(e.op==="=="){if(CS(e.value))return{unaryFilter:{field:ua(e.field),op:"IS_NAN"}};if(xS(e.value))return{unaryFilter:{field:ua(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(CS(e.value))return{unaryFilter:{field:ua(e.field),op:"IS_NOT_NAN"}};if(xS(e.value))return{unaryFilter:{field:ua(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(e.field),op:y6(e.op),value:e.value}}}(t):t instanceof ke?function(e){const n=e.getFilters().map(i=>EP(i));return n.length===1?n[0]:{compositeFilter:{op:v6(e.op),filters:n}}}(t):B()}function w6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,r,s=H.min(),o=H.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.le=e}}function _6(t,e){let n;if(e.document)n=vP(t.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=L.fromSegments(e.noDocument.path),r=Uo(e.noDocument.readTime);n=Le.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return B();{const i=L.fromSegments(e.unknownDocument.path),r=Uo(e.unknownDocument.version);n=Le.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(i){const r=new qe(i[0],i[1]);return H.fromTimestamp(r)}(e.readTime)),n}function qS(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(r,s){return{name:Lu(r,s.key),fields:s.data.value.mapValue.fields,updateTime:cl(r,s.version.toTimestamp()),createTime:cl(r,s.createTime.toTimestamp())}}(t.le,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:$o(e.version)};else{if(!e.isUnknownDocument())return B();i.unknownDocument={path:n.path.toArray(),version:$o(e.version)}}return i}function Xf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $o(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uo(t){const e=new qe(t.seconds,t.nanoseconds);return H.fromTimestamp(e)}function Js(t,e){const n=(e.baseMutations||[]).map(s=>Jv(t.le,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>Jv(t.le,s)),r=qe.fromMillis(e.localWriteTimeMs);return new H_(e.batchId,r,n,i)}function Ic(t){const e=Uo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Uo(t.lastLimboFreeSnapshotVersion):H.min();let i;var r;return t.query.documents!==void 0?(q((r=t.query).documents.length===1),i=Nn(Dl(mP(r.documents[0])))):i=function(s){return Nn(bP(s))}(t.query),new hr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,It.fromBase64String(t.resumeToken))}function kP(t,e){const n=$o(e.snapshotVersion),i=$o(e.lastLimboFreeSnapshotVersion);let r;r=Gf(e.target)?wP(t.le,e.target):_P(t.le,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function X_(t){const e=bP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yf(e,e.limit,"L"):e}function ey(t,e){return new K_(e.largestBatchId,Jv(t.le,e.overlayMutation))}function KS(t,e){const n=e.path.lastSegment();return[t,fn(e.path.popLast()),n]}function GS(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:$o(i.readTime),documentKey:fn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{getBundleMetadata(e,n){return QS(e).get(n).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Uo(r.createTime),version:r.version};var r})}saveBundleMetadata(e,n){return QS(e).put({bundleId:(i=n).id,createTime:$o(dt(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return YS(e).get(n).next(i=>{if(i)return{name:(r=i).name,query:X_(r.bundledQuery),readTime:Uo(r.readTime)};var r})}saveNamedQuery(e,n){return YS(e).put(function(i){return{name:i.name,readTime:$o(dt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function QS(t){return Mt(t,"bundles")}function YS(t){return Mt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.serializer=e,this.userId=n}static fe(e,n){const i=n.uid||"";return new Ig(e,i)}getOverlay(e,n){return ec(e).get(KS(this.userId,n)).next(i=>i?ey(this.serializer,i):null)}getOverlays(e,n){const i=$i();return S.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,o)=>{const a=new K_(n,o);r.push(this.de(e,a))}),S.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(o=>r.add(fn(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(ec(e).J("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,n,i){const r=$i(),s=fn(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ec(e).j("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=ey(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=$i();let o;const a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ec(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=ey(this.serializer,c);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}de(e,n){return ec(e).put(function(i,r,s){const[o,a,l]=KS(r,s.mutation.key);return{userId:r,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$u(i.le,s.mutation)}}(this.serializer,this.userId,n))}}function ec(t){return Mt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){}_e(e,n){this.we(e,n),n.me()}we(e,n){if("nullValue"in e)this.ge(n,5);else if("booleanValue"in e)this.ge(n,10),n.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(n,15),n.ye(tt(e.integerValue));else if("doubleValue"in e){const i=tt(e.doubleValue);isNaN(i)?this.ge(n,13):(this.ge(n,15),Pu(i)?n.ye(0):n.ye(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ge(n,20),typeof i=="string"?n.pe(i):(n.pe(`${i.seconds||""}`),n.ye(i.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,n),this.Te(n);else if("bytesValue"in e)this.ge(n,30),n.Ee(ys(e.bytesValue)),this.Te(n);else if("referenceValue"in e)this.Ae(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.ge(n,45),n.ye(i.latitude||0),n.ye(i.longitude||0)}else"mapValue"in e?$R(e)?this.ge(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Te(n)):"arrayValue"in e?(this.ve(e.arrayValue,n),this.Te(n)):B()}Ie(e,n){this.ge(n,25),this.Pe(e,n)}Pe(e,n){n.pe(e)}Re(e,n){const i=e.fields||{};this.ge(n,55);for(const r of Object.keys(i))this.Ie(r,n),this.we(i[r],n)}ve(e,n){const i=e.values||[];this.ge(n,50);for(const r of i)this.we(r,n)}Ae(e,n){this.ge(n,37),L.fromName(e).path.forEach(i=>{this.ge(n,60),this.Pe(i,n)})}ge(e,n){e.ye(n)}Te(e){e.ye(2)}}Zs.be=new Zs;function I6(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function XS(t){const e=64-function(n){let i=0;for(let r=0;r<8;++r){const s=I6(255&n[r]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class E6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Se(i.value),i=n.next();this.De()}Ce(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.xe(i.value),i=n.next();this.Ne()}ke(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{const r=n.codePointAt(0);this.Se(240|r>>>18),this.Se(128|63&r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r)}}this.De()}Me(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{const r=n.codePointAt(0);this.xe(240|r>>>18),this.xe(128|63&r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r)}}this.Ne()}Oe(e){const n=this.$e(e),i=XS(n);this.Fe(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Be(e){const n=this.$e(e),i=XS(n);this.Fe(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const n=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Se(e){const n=255&e;n===0?(this.qe(0),this.qe(255)):n===255?(this.qe(255),this.qe(0)):this.qe(n)}xe(e){const n=255&e;n===0?(this.Ke(0),this.Ke(255)):n===255?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class S6{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class T6{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class tc{constructor(){this.Qe=new E6,this.je=new S6(this.Qe),this.ze=new T6(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return e===0?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}He(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new eo(this.indexId,this.documentKey,this.arrayValue,i)}}function Nr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=JS(t.arrayValue,e.arrayValue),n!==0?n:(n=JS(t.directionalValue,e.directionalValue),n!==0?n:L.comparator(t.documentKey,e.documentKey)))}function JS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const n of e.filters){const i=n;i.isInequality()?this.Xe=i:this.Ye.push(i)}}Ze(e){q(e.collectionGroup===this.collectionId);const n=Bv(e);if(n!==void 0&&!this.tn(n))return!1;const i=Ks(e);let r=0,s=0;for(;r<i.length&&this.tn(i[r]);++r);if(r===i.length)return!0;if(this.Xe!==void 0){const o=i[r];if(!this.en(this.Xe,o)||!this.nn(this.Je[s++],o))return!1;++r}for(;r<i.length;++r){const o=i[r];if(s>=this.Je.length||!this.nn(this.Je[s++],o))return!1}return!0}tn(e){for(const n of this.Ye)if(this.en(n,e))return!0;return!1}en(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}nn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){var e,n;if(q(t instanceof le||t instanceof ke),t instanceof le){if(t instanceof qR){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>le.create(t.field,"==",s)))||[];return ke.create(r,"or")}return t}const i=t.filters.map(r=>xP(r));return ke.create(i,t.op)}function x6(t){if(t.getFilters().length===0)return[];const e=tw(xP(t));return q(CP(e)),Zv(e)||ew(e)?[e]:e.getFilters()}function Zv(t){return t instanceof le}function ew(t){return t instanceof ke&&V_(t)}function CP(t){return Zv(t)||ew(t)||function(e){if(e instanceof ke&&Hv(e)){for(const n of e.getFilters())if(!Zv(n)&&!ew(n))return!1;return!0}return!1}(t)}function tw(t){if(q(t instanceof le||t instanceof ke),t instanceof le)return t;if(t.filters.length===1)return tw(t.filters[0]);const e=t.filters.map(i=>tw(i));let n=ke.create(e,t.op);return n=Jf(n),CP(n)?n:(q(n instanceof ke),q(ol(n)),q(n.filters.length>1),n.filters.reduce((i,r)=>J_(i,r)))}function J_(t,e){let n;return q(t instanceof le||t instanceof ke),q(e instanceof le||e instanceof ke),n=t instanceof le?e instanceof le?function(i,r){return ke.create([i,r],"and")}(t,e):ZS(t,e):e instanceof le?ZS(e,t):function(i,r){if(q(i.filters.length>0&&r.filters.length>0),ol(i)&&ol(r))return jR(i,r.getFilters());const s=Hv(i)?i:r,o=Hv(i)?r:i,a=s.filters.map(l=>J_(l,o));return ke.create(a,"or")}(t,e),Jf(n)}function ZS(t,e){if(ol(e))return jR(e,t.getFilters());{const n=e.filters.map(i=>J_(t,i));return ke.create(n,"or")}}function Jf(t){if(q(t instanceof le||t instanceof ke),t instanceof le)return t;const e=t.getFilters();if(e.length===1)return Jf(e[0]);if(BR(t))return t;const n=e.map(r=>Jf(r)),i=[];return n.forEach(r=>{r instanceof le?i.push(r):r instanceof ke&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:ke.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.sn=new Z_}addToCollectionParentIndex(e,n){return this.sn.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(Hn.min())}updateCollectionGroup(e,n,i){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}}class Z_{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new $e(ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new $e(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Uint8Array(0);class A6{constructor(e,n){this.user=e,this.databaseId=n,this.rn=new Z_,this.on=new Os(i=>Mo(i),(i,r)=>wh(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.rn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.rn.add(n)});const s={collectionId:i,parent:fn(r)};return e1(e).put(s)}return S.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[TR(n),""],!1,!0);return e1(e).j(r).next(s=>{for(const o of s){if(o.collectionId!==n)break;i.push(Fi(o.parent))}return i})}addFieldIndex(e,n){const i=ad(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const o=ic(e);return s.next(a=>{o.put(GS(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=ad(e),r=ic(e),s=nc(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const i=nc(e);let r=!0;const s=new Map;return S.forEach(this.un(n),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=ne();const a=[];return S.forEach(s,(l,c)=>{var u;A("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${Mo(n)}`);const h=function(v,_){const I=Bv(_);if(I===void 0)return null;for(const E of Qf(v,I.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),d=function(v,_){const I=new Map;for(const E of Ks(_))for(const T of Qf(v,E.fieldPath))switch(T.op){case"==":case"in":I.set(E.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return I.set(E.fieldPath.canonicalString(),T.value),Array.from(I.values())}return null}(c,l),f=function(v,_){const I=[];let E=!0;for(const T of Ks(_)){const x=T.kind===0?NS(v,T.fieldPath,v.startAt):OS(v,T.fieldPath,v.startAt);I.push(x.value),E&&(E=x.inclusive)}return new _s(I,E)}(c,l),p=function(v,_){const I=[];let E=!0;for(const T of Ks(_)){const x=T.kind===0?OS(v,T.fieldPath,v.endAt):NS(v,T.fieldPath,v.endAt);I.push(x.value),E&&(E=x.inclusive)}return new _s(I,E)}(c,l),g=this.an(l,c,f),w=this.an(l,c,p),y=this.hn(l,c,d),m=this.ln(l.indexId,h,g,f.inclusive,w,p.inclusive,y);return S.forEach(m,v=>i.H(v,n.limit).next(_=>{_.forEach(I=>{const E=L.fromSegments(I.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return S.resolve(null)})}un(e){let n=this.on.get(e);return n||(e.filters.length===0?n=[e]:n=x6(ke.create(e.filters,"and")).map(i=>Kv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,n),n)}ln(e,n,i,r,s,o,a){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const d=n?this.fn(n[h/c]):od,f=this.dn(e,d,i[h%c],r),p=this._n(e,d,s[h%c],o),g=a.map(w=>this.dn(e,d,w,!0));u.push(...this.createRange(f,p,g))}return u}dn(e,n,i,r){const s=new eo(e,L.empty(),n,i);return r?s:s.He()}_n(e,n,i,r){const s=new eo(e,L.empty(),n,i);return r?s.He():s}cn(e,n){const i=new k6(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.Ze(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2;const r=this.un(n);return S.forEach(r,s=>this.cn(e,s).next(o=>{o?i!==0&&o.fields.length<function(a){let l=new $e(ht.comparator),c=!1;for(const u of a.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}wn(e,n){const i=new tc;for(const r of Ks(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const o=i.We(r.kind);Zs.be._e(s,o)}return i.Ge()}fn(e){const n=new tc;return Zs.be._e(e,n.We(0)),n.Ge()}mn(e,n){const i=new tc;return Zs.be._e(Oo(this.databaseId,n),i.We(function(r){const s=Ks(r);return s.length===0?0:s[s.length-1].kind}(e))),i.Ge()}hn(e,n,i){if(i===null)return[];let r=[];r.push(new tc);let s=0;for(const o of Ks(e)){const a=i[s++];for(const l of r)if(this.gn(n,o.fieldPath)&&Mu(a))r=this.yn(r,o,a);else{const c=l.We(o.kind);Zs.be._e(a,c)}}return this.pn(r)}an(e,n,i){return this.hn(e,n,i.position)}pn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Ge();return n}yn(e,n,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new tc;l.seed(a.Ge()),Zs.be._e(o,l.We(n.kind)),s.push(l)}return s}gn(e,n){return!!e.filters.find(i=>i instanceof le&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=ad(e),r=ic(e);return(n?i.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.j()).next(s=>{const o=[];return S.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const h=u?new Kf(u.sequenceNumber,new Hn(Uo(u.readTime),new L(Fi(u.documentKey)),u.largestBatchId)):Kf.empty(),d=c.fields.map(([f,p])=>new h3(ht.fromServerFormat(f),p));return new kR(c.indexId,c.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:te(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=ad(e),s=ic(e);return this.In(e).next(o=>r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,l=>s.put(GS(l.indexId,this.user,o,i)))))}updateIndexEntries(e,n){const i=new Map;return S.forEach(n,(r,s)=>{const o=i.get(r.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),S.forEach(a,l=>this.Tn(e,r,l).next(c=>{const u=this.En(s,l);return c.isEqual(u)?S.resolve():this.An(e,s,l,c,u)}))))})}Rn(e,n,i,r){return nc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(e,n,i,r){return nc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}Tn(e,n,i){const r=nc(e);let s=new $e(Nr);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(o,a)=>{s=s.add(new eo(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}En(e,n){let i=new $e(Nr);const r=this.wn(n,e);if(r==null)return i;const s=Bv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Mu(o))for(const a of o.arrayValue.values||[])i=i.add(new eo(n.indexId,e.key,this.fn(a),r))}else i=i.add(new eo(n.indexId,e.key,od,r));return i}An(e,n,i,r,s){A("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,h){const d=a.getIterator(),f=l.getIterator();let p=sa(d),g=sa(f);for(;p||g;){let w=!1,y=!1;if(p&&g){const m=c(p,g);m<0?y=!0:m>0&&(w=!0)}else p!=null?y=!0:w=!0;w?(u(g),g=sa(f)):y?(h(p),p=sa(d)):(p=sa(d),g=sa(f))}}(r,s,Nr,a=>{o.push(this.Rn(e,n,i,a))},a=>{o.push(this.vn(e,n,i,a))}),S.waitFor(o)}In(e){let n=1;return ic(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>Nr(o,a)).filter((o,a,l)=>!a||Nr(o,l[a-1])!==0);const r=[];r.push(e);for(const o of i){const a=Nr(o,e),l=Nr(o,n);if(a===0)r[0]=e.He();else if(a>0&&l<0)r.push(o),r.push(o.He());else if(l>0)break}r.push(n);const s=[];for(let o=0;o<r.length;o+=2){if(this.Pn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,od,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,od,[]];s.push(IDBKeyRange.bound(a,l))}return s}Pn(e,n){return Nr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(t1)}getMinOffset(e,n){return S.mapArray(this.un(n),i=>this.cn(e,i).next(r=>r||B())).next(t1)}}function e1(t){return Mt(t,"collectionParents")}function nc(t){return Mt(t,"indexEntries")}function ad(t){return Mt(t,"indexConfiguration")}function ic(t){return Mt(t,"indexState")}function t1(t){q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;F_(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class In{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.X({range:o},(u,h,d)=>(a++,d.delete()));s.push(l.next(()=>{q(a===1)}));const c=[];for(const u of n.mutations){const h=PR(e,u.key.path,n.batchId);s.push(r.delete(h)),c.push(u.key)}return S.waitFor(s).next(()=>c)}function Zf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw B();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Eg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.bn={}}static fe(e,n,i,r){q(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Eg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).X({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=da(e),o=Or(e);return o.add({}).next(a=>{q(typeof a=="number");const l=new H_(a,n,i,r),c=function(d,f,p){const g=p.baseMutations.map(y=>$u(d.le,y)),w=p.mutations.map(y=>$u(d.le,y));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:w}}(this.serializer,this.userId,l),u=[];let h=new $e((d,f)=>te(d.canonicalString(),f.canonicalString()));for(const d of r){const f=PR(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,y3))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.bn[a]=l.keys()}),S.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Or(e).get(n).next(i=>i?(q(i.userId===this.userId),Js(this.serializer,i)):null)}Vn(e,n){return this.bn[n]?S.resolve(this.bn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.bn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Or(e).X({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(q(a.batchId>=i),s=Js(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Or(e).X({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).j("userMutationsIndex",n).next(i=>i.map(r=>Js(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=jd(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return da(e).X({range:r},(o,a,l)=>{const[c,u,h]=o,d=Fi(u);if(c===this.userId&&n.path.isEqual(d))return Or(e).get(h).next(f=>{if(!f)throw B();q(f.userId===this.userId),s.push(Js(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new $e(te);const r=[];return n.forEach(s=>{const o=jd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=da(e).X({range:a},(c,u,h)=>{const[d,f,p]=c,g=Fi(f);d===this.userId&&s.path.isEqual(g)?i=i.add(p):h.done()});r.push(l)}),S.waitFor(r).next(()=>this.Sn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=jd(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new $e(te);return da(e).X({range:o},(l,c,u)=>{const[h,d,f]=l,p=Fi(d);h===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Sn(e,a))}Sn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(Or(e).get(s).next(o=>{if(o===null)throw B();q(o.userId===this.userId),i.push(Js(this.serializer,o))}))}),S.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return AP(e.at,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Dn(n.batchId)}),S.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return da(e).X({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Fi(s[1]);r.push(l)}else a.done()}).next(()=>{q(r.length===0)})})}containsKey(e,n){return DP(e,this.userId,n)}Cn(e){return RP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DP(t,e,n){const i=jd(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return da(t).X({range:s,Y:!0},(a,l,c)=>{const[u,h,d]=a;u===e&&h===r&&(o=!0),c.done()}).next(()=>o)}function Or(t){return Mt(t,"mutations")}function da(t){return Mt(t,"documentMutations")}function RP(t){return Mt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Vo(0)}static kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Mn(e).next(n=>{const i=new Vo(n.highestTargetId);return n.highestTargetId=i.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(n=>H.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Mn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.On(e,r)))}addTargetData(e,n){return this.$n(e,n).next(()=>this.Mn(e).next(i=>(i.targetCount+=1,this.Fn(n,i),this.On(e,i))))}updateTargetData(e,n){return this.$n(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>oa(e).delete(n.targetId)).next(()=>this.Mn(e)).next(i=>(q(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return oa(e).X((o,a)=>{const l=Ic(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>S.waitFor(s)).next(()=>r)}forEachTarget(e,n){return oa(e).X((i,r)=>{const s=Ic(r);n(s)})}Mn(e){return i1(e).get("targetGlobalKey").next(n=>(q(n!==null),n))}On(e,n){return i1(e).put("targetGlobalKey",n)}$n(e,n){return oa(e).put(kP(this.serializer,n))}Fn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Mn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Mo(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return oa(e).X({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=Ic(a);wh(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=Br(e);return n.forEach(o=>{const a=fn(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),S.waitFor(r)}removeMatchingKeys(e,n,i){const r=Br(e);return S.forEach(n,s=>{const o=fn(s.path);return S.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=Br(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Br(e);let s=ne();return r.X({range:i,Y:!0},(o,a,l)=>{const c=Fi(o[1]),u=new L(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const i=fn(n.path),r=IDBKeyRange.bound([i],[TR(i)],!1,!0);let s=0;return Br(e).X({index:"documentTargetsIndex",Y:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}he(e,n){return oa(e).get(n).next(i=>i?Ic(i):null)}}function oa(t){return Mt(t,"targets")}function i1(t){return Mt(t,"targetGlobal")}function Br(t){return Mt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1([t,e],[n,i]){const r=te(t,n);return r===0?te(e,i):r}class R6{constructor(e){this.Bn=e,this.buffer=new $e(r1),this.Ln=0}qn(){return++this.Ln}Un(e){const n=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();r1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class P6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Kn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return this.Kn!==null}Gn(e){A("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Kn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ns(n)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ps(n)}await this.Gn(3e5)})}}class N6{constructor(e,n){this.Qn=e,this.params=n}calculateTargetCount(e,n){return this.Qn.jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return S.resolve(kn.ct);const i=new R6(n);return this.Qn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.Qn.zn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Qn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Qn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(A("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(n1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n1):this.Wn(e,n))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),Vv()<=me.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}}function O6(t,e){return new N6(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.db=e,this.garbageCollector=O6(this,n)}jn(e){const n=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Hn(e){let n=0;return this.zn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}zn(e,n){return this.Jn(e,(i,r)=>n(r))}addReference(e,n,i){return ld(e,i)}removeReference(e,n,i){return ld(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return ld(e,n)}Yn(e,n){return function(i,r){let s=!1;return RP(i).Z(o=>DP(i,o,r).next(a=>(a&&(s=!0),S.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Jn(e,(o,a)=>{if(a<=n){const l=this.Yn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,H.min()),Br(e).delete([0,fn(o.path)])))});r.push(l)}}).next(()=>S.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return ld(e,n)}Jn(e,n){const i=Br(e);let r,s=kn.ct;return i.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==kn.ct&&n(new L(Fi(r)),s),s=c,r=l):s=kn.ct}).next(()=>{s!==kn.ct&&n(new L(Fi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ld(t,e){return Br(t).put(function(n,i){return{targetId:0,path:fn(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?S.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Us(e).put(i)}removeEntry(e,n,i){return Us(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Xf(s),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Xn(e,i)))}getEntry(e,n){let i=Le.newInvalidDocument(n);return Us(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rc(n))},(r,s)=>{i=this.Zn(n,s)}).next(()=>i)}ts(e,n){let i={size:0,document:Le.newInvalidDocument(n)};return Us(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rc(n))},(r,s)=>{i={document:this.Zn(n,s),size:Zf(s)}}).next(()=>i)}getEntries(e,n){let i=Cn();return this.es(e,n,(r,s)=>{const o=this.Zn(r,s);i=i.insert(r,o)}).next(()=>i)}ns(e,n){let i=Cn(),r=new Re(L.comparator);return this.es(e,n,(s,o)=>{const a=this.Zn(s,o);i=i.insert(s,a),r=r.insert(s,Zf(o))}).next(()=>({documents:i,ss:r}))}es(e,n,i){if(n.isEmpty())return S.resolve();let r=new $e(a1);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(rc(r.first()),rc(r.last())),o=r.getIterator();let a=o.getNext();return Us(e).X({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=L.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&a1(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.G(rc(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Xf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Us(e).j(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=Cn();for(const u of l){const h=this.Zn(L.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(bh(n,h)||r.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,i,r){let s=Cn();const o=o1(n,i),a=o1(n,Hn.max());return Us(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.Zn(L.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new F6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return s1(e).get("remoteDocumentGlobalKey").next(n=>(q(!!n),n))}Xn(e,n){return s1(e).put("remoteDocumentGlobalKey",n)}Zn(e,n){if(n){const i=_6(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(H.min())))return i}return Le.newInvalidDocument(e)}}function NP(t){return new L6(t)}class F6 extends PP{constructor(e,n){super(),this.rs=e,this.trackRemovals=n,this.os=new Os(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new $e((s,o)=>te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.os.get(s);if(n.push(this.rs.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=qS(this.rs.serializer,o);r=r.add(s.path.popLast());const c=Zf(l);i+=c-a.size,n.push(this.rs.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=qS(this.rs.serializer,o.convertToNoDocument(H.min()));n.push(this.rs.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.rs.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.rs.updateMetadata(e,i)),S.waitFor(n)}getFromCache(e,n){return this.rs.ts(e,n).next(i=>(this.os.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.rs.ns(e,n).next(({documents:i,ss:r})=>(r.forEach((s,o)=>{this.os.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function s1(t){return Mt(t,"remoteDocumentGlobal")}function Us(t){return Mt(t,"remoteDocumentsV14")}function rc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o1(t,e){const n=e.documentKey.path.toArray();return[t,Xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a1(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=te(n[s],i[s]),r)return r;return r=te(n.length,i.length),r||(r=te(n[n.length-2],i[i.length-2]),r||te(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&qc(i.mutation,r,xn.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ne()){const r=$i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=_c();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ne()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Cn();const o=Hc(),a=Hc();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Cr)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),qc(u.mutation,c,u.mutation.getFieldMask(),qe.now())):o.set(c.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new $6(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Hc();let r=new Re((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||xn.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||ne()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=ZR();u.forEach(d=>{if(!s.has(d)){const f=aP(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return S.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return L.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):S.resolve($i());let a=-1,l=s;return o.next(c=>S.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?S.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ne())).next(u=>({batchId:a,changes:JR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new L(n)).next(i=>{let r=_c();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let s=_c();return this.indexManager.getCollectionParents(e,r).next(o=>S.forEach(o,a=>{const l=function(c,u){return new xr(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(s=>{r.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Le.newInvalidDocument(c)))});let o=_c();return s.forEach((a,l)=>{const c=r.get(a);c!==void 0&&qc(c.mutation,l,xn.empty(),qe.now()),bh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return S.resolve(this.us.get(n))}saveBundleMetadata(e,n){var i;return this.us.set(n.id,{id:(i=n).id,version:i.version,createTime:dt(i.createTime)}),S.resolve()}getNamedQuery(e,n){return S.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(i){return{name:i.name,query:X_(i.bundledQuery),readTime:dt(i.readTime)}}(n)),S.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.overlays=new Re(L.comparator),this.hs=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$i();return S.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.de(e,n,s)}),S.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hs.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hs.delete(i)),S.resolve()}getOverlaysForCollection(e,n,i){const r=$i(),s=n.length+1,o=new L(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return S.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Re((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=$i(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=$i(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return S.resolve(a)}de(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.hs.get(r.largestBatchId).delete(i.key);this.hs.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new K_(n,i));let s=this.hs.get(n);s===void 0&&(s=ne(),this.hs.set(n,s)),this.hs.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(){this.ls=new $e(kt.fs),this.ds=new $e(kt._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const i=new kt(e,n);this.ls=this.ls.add(i),this.ds=this.ds.add(i)}ws(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.gs(new kt(e,n))}ys(e,n){e.forEach(i=>this.removeReference(i,n))}ps(e){const n=new L(new ye([])),i=new kt(n,e),r=new kt(n,e+1),s=[];return this.ds.forEachInRange([i,r],o=>{this.gs(o),s.push(o.key)}),s}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new L(new ye([])),i=new kt(n,e),r=new kt(n,e+1);let s=ne();return this.ds.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),i=this.ls.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return L.comparator(e.key,n.key)||te(e.Es,n.Es)}static _s(e,n){return te(e.Es,n.Es)||L.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new $e(kt.fs)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new H_(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Ps(i),s=r<0?0:r;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),r=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const a=this.vs(o.Es);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new $e(te);return n.forEach(r=>{const s=new kt(r,0),o=new kt(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{i=i.add(a.Es)})}),S.resolve(this.bs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;L.isDocumentKey(s)||(s=s.child(""));const o=new kt(new L(s),0);let a=new $e(te);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Es)),!0)},o),S.resolve(this.bs(a))}bs(e){const n=[];return e.forEach(i=>{const r=this.vs(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){q(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return S.forEach(n.mutations,r=>{const s=new kt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Dn(e){}containsKey(e,n){const i=new kt(n,0),r=this.Rs.firstAfterOrEqual(i);return S.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.Ss=e,this.docs=new Re(L.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ss(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return S.resolve(i?i.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let i=Cn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Le.newInvalidDocument(r))}),S.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Cn();const o=n.path,a=new L(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||F_(CR(u),i)<=0||(r.has(u.key)||bh(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return S.resolve(s)}getAllFromCollectionGroup(e,n,i,r){B()}Ds(e,n){return S.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new j6(this)}getSize(e){return S.resolve(this.size)}}class j6 extends PP{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.rs.addEntry(e,r)):this.rs.removeEntry(i)}),S.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.persistence=e,this.Cs=new Os(n=>Mo(n),wh),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.xs=0,this.Ns=new eb,this.targetCount=0,this.ks=Vo.Nn()}forEachTarget(e,n){return this.Cs.forEach((i,r)=>n(r)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.xs&&(this.xs=n),S.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.$n(n),S.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Cs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Cs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),S.waitFor(s).next(()=>r)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){const i=this.Cs.get(n)||null;return S.resolve(i)}addMatchingKeys(e,n,i){return this.Ns.ws(n,i),S.resolve()}removeMatchingKeys(e,n,i){this.Ns.ys(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),S.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Ns.Ts(n);return S.resolve(i)}containsKey(e,n){return S.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.Ms={},this.overlays={},this.Os=new kn(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new W6(this),this.indexManager=new C6,this.remoteDocumentCache=function(i){return new z6(i)}(i=>this.referenceDelegate.Bs(i)),this.serializer=new TP(n),this.Ls=new U6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Ms[e.toKey()];return i||(i=new B6(n,this.referenceDelegate),this.Ms[e.toKey()]=i),i}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,i){A("MemoryPersistence","Starting transaction:",e);const r=new H6(this.Os.next());return this.referenceDelegate.qs(),i(r).next(s=>this.referenceDelegate.Us(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ks(e,n){return S.or(Object.values(this.Ms).map(i=>()=>i.containsKey(e,n)))}}class H6 extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Gs=new eb,this.Qs=null}static js(e){return new Sg(e)}get zs(){if(this.Qs)return this.Qs;throw B()}addReference(e,n,i){return this.Gs.addReference(i,n),this.zs.delete(i.toString()),S.resolve()}removeReference(e,n,i){return this.Gs.removeReference(i,n),this.zs.add(i.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),S.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(r=>this.zs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.zs.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.zs,i=>{const r=L.fromPath(i);return this.Ws(e,r).next(s=>{s||n.removeEntry(r,H.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(i=>{i?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return S.or([()=>S.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.serializer=e}$(e,n,i,r){const s=new yg("createOrUpgrade",n);i<1&&r>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ES,{unique:!0}),a.createObjectStore("documentMutations")}(e),l1(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return i<3&&r>=3&&(i!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),l1(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").j().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ES,{unique:!0});const u=l.store("mutations"),h=c.map(d=>u.put(d));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Js(s))),i<6&&r>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(s)))),i<7&&r>=7&&(o=o.next(()=>this.Xs(s))),i<8&&r>=8&&(o=o.next(()=>this.Zs(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ti(s))),i<11&&r>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:A3});l.createIndex("collectionPathOverlayIndex",D3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",R3,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:v3});l.createIndex("documentKeyIndex",w3),l.createIndex("collectionGroupIndex",_3)}(e)).next(()=>this.ei(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ni(e,s))),i<15&&r>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:T3}).createIndex("sequenceNumberIndex",k3,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:x3}).createIndex("documentKeyIndex",C3,{unique:!1})}(e))),o}Ys(e){let n=0;return e.store("remoteDocuments").X((i,r)=>{n+=Zf(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Js(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next(r=>S.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(a=>S.forEach(a,l=>{q(l.userId===s.userId);const c=Js(this.serializer,l);return AP(e,s.userId,c).next(()=>{})}))}))}Xs(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((o,a)=>{const l=new ye(o),c=function(u){return[0,fn(u)]}(l);s.push(n.get(c).next(u=>u?S.resolve():(h=>n.put({targetId:0,path:fn(h),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>S.waitFor(s))})}Zs(e,n){e.createObjectStore("collectionParents",{keyPath:S3});const i=n.store("collectionParents"),r=new Z_,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:fn(l)})}};return n.store("remoteDocuments").X({Y:!0},(o,a)=>{const l=new ye(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,a,l],c)=>{const u=Fi(a);return s(u.popLast())}))}ti(e){const n=e.store("targets");return n.X((i,r)=>{const s=Ic(r),o=kP(this.serializer,s);return n.put(o)})}ei(e,n){const i=n.store("remoteDocuments"),r=[];return i.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new L(ye.fromString(c.document.name).popFirst(5)):c.noDocument?L.fromSegments(c.noDocument.path):c.unknownDocument?L.fromSegments(c.unknownDocument.path):B()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>S.waitFor(r))}ni(e,n){const i=n.store("mutations"),r=NP(this.serializer),s=new MP(Sg.js,this.serializer.le);return i.j().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:ne();Js(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),S.forEach(a,(l,c)=>{const u=new Ct(c),h=Ig.fe(this.serializer,u),d=s.getIndexManager(u),f=Eg.fe(u,this.serializer,d,s.referenceDelegate);return new OP(r,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new zv(n,kn.ct),l).next()})})}}function l1(t){t.createObjectStore("targetDocuments",{keyPath:I3}).createIndex("documentTargetsIndex",E3,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",b3,{unique:!0}),t.createObjectStore("targetGlobal")}const ty="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tb{constructor(e,n,i,r,s,o,a,l,c,u,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.si=s,this.window=o,this.document=a,this.ii=c,this.ri=u,this.oi=h,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=d=>Promise.resolve(),!tb.D())throw new C(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new M6(this,r),this.fi=n+"main",this.serializer=new TP(l),this.di=new gi(this.fi,this.oi,new q6(this.serializer)),this.Fs=new D6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NP(this.serializer),this.Ls=new b6,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,u===!1&&ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new C(k.FAILED_PRECONDITION,ty);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new kn(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){return this.li=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(n=>this.isPrimary&&!n?this.Ei(e).next(()=>!1):!!n&&this.Ai(e).next(()=>!0))).catch(e=>{if(Ns(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return sc(e).get("owner").next(n=>S.resolve(this.Ri(n)))}vi(e){return cd(e).delete(this.clientId)}async Pi(){if(this.isPrimary&&!this.bi(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Mt(n,"clientMetadata");return i.j().next(r=>{const s=this.Vi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this._i)for(const n of e)this._i.removeItem(this.Si(n.clientId))}}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?S.resolve(!0):sc(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Di(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new C(k.FAILED_PRECONDITION,ty);return!1}}return!(!this.networkEnabled||!this.inForeground)||cd(e).j().next(i=>this.Vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&A("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),await this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new zv(e,kn.ct);return this.Ei(n).next(()=>this.vi(n))}),this.di.close(),this.ki()}Vi(e,n){return e.filter(i=>this.bi(i.updateTimeMs,n)&&!this.Di(i.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>cd(e).j().next(n=>this.Vi(n,18e5).map(i=>i.clientId)))}get started(){return this.$s}getMutationQueue(e,n){return Eg.fe(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A6(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return Ig.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,n,i){A("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=(o=this.oi)===15?N3:o===14?MR:o===13?OR:o===12?P3:o===11?NR:void B();var o;let a;return this.di.runTransaction(e,r,s,l=>(a=new zv(l,this.Os?this.Os.next():kn.ct),n==="readwrite-primary"?this.Ii(a).next(c=>!!c||this.Ti(a)).next(c=>{if(!c)throw ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new C(k.FAILED_PRECONDITION,AR);return i(a)}).next(c=>this.Ai(a).next(()=>c)):this.Oi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Oi(e){return sc(e).get("owner").next(n=>{if(n!==null&&this.bi(n.leaseTimestampMs,5e3)&&!this.Di(n.ownerId)&&!this.Ri(n)&&!(this.ri||this.allowTabSynchronization&&n.allowTabSynchronization))throw new C(k.FAILED_PRECONDITION,ty)})}Ai(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sc(e).put("owner",n)}static D(){return gi.D()}Ei(e){const n=sc(e);return n.get("owner").next(i=>this.Ri(i)?(A("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):S.resolve())}bi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(ut(`Detected an update time that is in the future: ${e} > ${i}`),!1))}mi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Ci();const n=/(?:Version|Mobile)\/1[456]/;U2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var n;try{const i=((n=this._i)===null||n===void 0?void 0:n.getItem(this.Si(e)))!==null;return A("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ut("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){ut("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sc(t){return Mt(t,"owner")}function cd(t){return Mt(t,"clientMetadata")}function nb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Fi=r}static Bi(e,n){let i=ne(),r=ne();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ib(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ui(e,n).next(s=>s||this.Ki(e,n,r,i)).next(s=>s||this.Gi(e,n))}Ui(e,n){if(MS(n))return S.resolve(null);let i=Nn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Yf(n,null,"F"),i=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ne(...s);return this.qi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Qi(n,a);return this.ji(n,c,o,l.readTime)?this.Ui(e,Yf(n,null,"F")):this.zi(e,c,n,l)}))})))}Ki(e,n,i,r){return MS(n)||r.isEqual(H.min())?this.Gi(e,n):this.qi.getDocuments(e,i).next(s=>{const o=this.Qi(n,s);return this.ji(n,o,i,r)?this.Gi(e,n):(Vv()<=me.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qv(n)),this.zi(e,o,n,xR(r,-1)))})}Qi(e,n){let i=new $e(YR(e));return n.forEach((r,s)=>{bh(e,s)&&(i=i.add(s))}),i}ji(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Gi(e,n){return Vv()<=me.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",Qv(n)),this.qi.getDocumentsMatchingQuery(e,n,Hn.min())}zi(e,n,i,r){return this.qi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,i,r){this.persistence=e,this.Wi=n,this.serializer=r,this.Hi=new Re(te),this.Ji=new Os(s=>Mo(s),wh),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(i)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OP(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function FP(t,e,n,i){return new K6(t,e,n,i)}async function $P(t,e){const n=F(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Zi(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ne();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({tr:c,removedBatchIds:o,addedBatchIds:a}))})})}function G6(t,e){const n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Xi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=S.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);q(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=ne();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function UP(t){const e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function Q6(t,e){const n=F(t),i=e.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(n.Fs.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Fs.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(It.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(p,g,w){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,u)&&a.push(n.Fs.updateTargetData(s,f))});let l=Cn(),c=ne();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(VP(s,o,e.documentUpdates).next(u=>{l=u.er,c=u.nr})),!i.isEqual(H.min())){const u=n.Fs.getLastRemoteSnapshotVersion(s).next(h=>n.Fs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Hi=r,s))}function VP(t,e,n){let i=ne(),r=ne();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Cn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{er:o,nr:r}})}function Y6(t,e){const n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ul(t,e){const n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Fs.getTargetData(i,e).next(s=>s?(r=s,S.resolve(r)):n.Fs.allocateTargetId(i).next(o=>(r=new hr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Hi.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(i.targetId,i),n.Ji.set(e,i.targetId)),i})}async function hl(t,e,n){const i=F(t),r=i.Hi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ns(o))throw o;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Hi=i.Hi.remove(e),i.Ji.delete(r.target)}function ep(t,e,n){const i=F(t);let r=H.min(),s=ne();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=F(a),h=u.Ji.get(c);return h!==void 0?S.resolve(u.Hi.get(h)):u.Fs.getTargetData(l,c)}(i,o,Nn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Fs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Wi.getDocumentsMatchingQuery(o,e,n?r:H.min(),n?s:ne())).next(a=>(jP(i,QR(e),a),{documents:a,sr:s})))}function BP(t,e){const n=F(t),i=F(n.Fs),r=n.Hi.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.he(s,e).next(o=>o?o.target:null))}function zP(t,e){const n=F(t),i=n.Yi.get(e)||H.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Xi.getAllFromCollectionGroup(r,e,xR(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(jP(n,e,r),r))}function jP(t,e,n){let i=t.Yi.get(e)||H.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Yi.set(e,i)}async function X6(t,e,n,i){const r=F(t);let s=ne(),o=Cn();for(const c of n){const u=e.ir(c.metadata.name);c.document&&(s=s.add(u));const h=e.rr(c);h.setReadTime(e.ur(c.metadata.readTime)),o=o.insert(u,h)}const a=r.Xi.newChangeBuffer({trackRemovals:!0}),l=await ul(r,function(c){return Nn(Dl(ye.fromString(`__bundle__/docs/${c}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>VP(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Fs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Fs.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.er,u.nr)).next(()=>u.er)))}async function J6(t,e,n=ne()){const i=await ul(t,Nn(X_(e.bundledQuery))),r=F(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=dt(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ls.saveNamedQuery(s,e);const a=i.withResumeToken(It.EMPTY_BYTE_STRING,o);return r.Hi=r.Hi.insert(a.targetId,a),r.Fs.updateTargetData(s,a).next(()=>r.Fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Fs.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ls.saveNamedQuery(s,e))})}function c1(t,e){return`firestore_clients_${t}_${e}`}function u1(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function ny(t,e){return`firestore_targets_${t}_${e}`}class tp{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static cr(e,n,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new C(r.error.code,r.error.message))),o?new tp(e,n,r.state,s):(ut("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kc{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static cr(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new C(i.error.code,i.error.message))),s?new Kc(e,i.state,r):(ut("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class np{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static cr(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=j_();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=RR(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new np(e,s):(ut("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class rb{constructor(e,n){this.clientId=e,this.onlineState=n}static cr(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new rb(n.clientId,n.onlineState):(ut("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nw{constructor(){this.activeTargetIds=j_()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iy{constructor(e,n,i,r,s){this.window=e,this.si=n,this.persistenceKey=i,this.dr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Re(te),this.started=!1,this.gr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.yr=c1(this.persistenceKey,this.dr),this.pr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new nw),this.Ir=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ar=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Mi();for(const i of e){if(i===this.dr)continue;const r=this.getItem(c1(this.persistenceKey,i));if(r){const s=np.cr(i,r);s&&(this.mr=this.mr.insert(s.clientId,s))}}this.vr();const n=this.storage.getItem(this.Ar);if(n){const i=this.Pr(n);i&&this.br(i)}for(const i of this.gr)this.wr(i);this.gr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let n=!1;return this.mr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,n,i){this.Sr(e,n,i),this.Dr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(ny(this.persistenceKey,e));if(i){const r=Kc.cr(e,i);r&&(n=r.state)}}return this.Cr.hr(e),this.vr(),n}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ny(this.persistenceKey,e))}updateQueryState(e,n,i){this.Nr(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Dr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return A("SharedClientState","READ",e,n),n}setItem(e,n){A("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){const n=e;if(n.storageArea===this.storage){if(A("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ir.test(n.key)){if(n.newValue==null){const i=this.Or(n.key);return this.$r(i,null)}{const i=this.Fr(n.key,n.newValue);if(i)return this.$r(i.clientId,i)}}else if(this.Tr.test(n.key)){if(n.newValue!==null){const i=this.Br(n.key,n.newValue);if(i)return this.Lr(i)}}else if(this.Er.test(n.key)){if(n.newValue!==null){const i=this.qr(n.key,n.newValue);if(i)return this.Ur(i)}}else if(n.key===this.Ar){if(n.newValue!==null){const i=this.Pr(n.newValue);if(i)return this.br(i)}}else if(n.key===this.pr){const i=function(r){let s=kn.ct;if(r!=null)try{const o=JSON.parse(r);q(typeof o=="number"),s=o}catch(o){ut("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);i!==kn.ct&&this.sequenceNumberHandler(i)}else if(n.key===this.Rr){const i=this.Kr(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Gr(r)))}}}else this.gr.push(n)})}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,n,i){const r=new tp(this.currentUser,e,n,i),s=u1(this.persistenceKey,this.currentUser,e);this.setItem(s,r.ar())}Dr(e){const n=u1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}kr(e){const n={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(n))}Nr(e,n,i){const r=ny(this.persistenceKey,e),s=new Kc(e,n,i);this.setItem(r,s.ar())}Mr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Ir.exec(e);return n?n[1]:null}Fr(e,n){const i=this.Or(e);return np.cr(i,n)}Br(e,n){const i=this.Tr.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return tp.cr(new Ct(s),r,n)}qr(e,n){const i=this.Er.exec(e),r=Number(i[1]);return Kc.cr(r,n)}Pr(e){return rb.cr(e)}Kr(e){return JSON.parse(e)}async Lr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Qr(e.batchId,e.state,e.error);A("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,n){const i=n?this.mr.insert(e,n):this.mr.remove(e),r=this.Vr(this.mr),s=this.Vr(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.zr(o,a).then(()=>{this.mr=i})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let n=j_();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class WP{constructor(){this.Wr=new nw,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,i){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new nw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function ry(){return ud===null?ud=268435456+Math.round(2147483648*Math.random()):ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class n9 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,i,r,s){const o=ry(),a=this.Io(e,n);A("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.To(l,r,s),this.Eo(e,a,l,i).then(c=>(A("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Ii("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Ao(e,n,i,r,s,o){return this.po(e,n,i,r,s)}To(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Al,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Io(e,n){const i=e9[e];return`${this.wo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,i,r){const s=ry();return new Promise((o,a)=>{const l=new J5;l.setWithCredentials(!0),l.listenOnce(Q5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zm.NO_ERROR:const u=l.getResponseJson();A(Jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Zm.TIMEOUT:A(Jt,`RPC '${e}' ${s} timed out`),a(new C(k.DEADLINE_EXCEEDED,"Request time out"));break;case Zm.HTTP_ERROR:const h=l.getStatus();if(A(Jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const w=g.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(w)>=0?w:k.UNKNOWN}(f.status);a(new C(p,f.message))}else a(new C(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new C(k.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{A(Jt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);A(Jt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Ro(e,n,i){const r=ry(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=K5(),a=G5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new X5({})),this.To(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const c=s.join("");A(Jt,`Creating RPC '${e}' stream ${r}: ${c}`,l);const u=o.createWebChannel(c,l);let h=!1,d=!1;const f=new t9({io:g=>{d?A(Jt,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(h||(A(Jt,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),A(Jt,`RPC '${e}' stream ${r} sending:`,g),u.send(g))},ro:()=>u.close()}),p=(g,w,y)=>{g.listen(w,m=>{try{y(m)}catch(v){setTimeout(()=>{throw v},0)}})};return p(u,id.EventType.OPEN,()=>{d||A(Jt,`RPC '${e}' stream ${r} transport opened.`)}),p(u,id.EventType.CLOSE,()=>{d||(d=!0,A(Jt,`RPC '${e}' stream ${r} transport closed`),f.fo())}),p(u,id.EventType.ERROR,g=>{d||(d=!0,Ii(Jt,`RPC '${e}' stream ${r} transport errored:`,g),f.fo(new C(k.UNAVAILABLE,"The operation could not be completed")))}),p(u,id.EventType.MESSAGE,g=>{var w;if(!d){const y=g.data[0];q(!!y);const m=y,v=m.error||((w=m[0])===null||w===void 0?void 0:w.error);if(v){A(Jt,`RPC '${e}' stream ${r} received error:`,v);const _=v.status;let I=function(T){const x=gt[T];if(x!==void 0)return uP(x)}(_),E=v.message;I===void 0&&(I=k.INTERNAL,E="Unknown error status: "+_+" with message "+v.message),d=!0,f.fo(new C(I,E)),u.close()}else A(Jt,`RPC '${e}' stream ${r} received:`,y),f._o(y)}}),p(a,Y5.STAT_EVENT,g=>{g.stat===wS.PROXY?A(Jt,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===wS.NOPROXY&&A(Jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.lo()},0),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){return typeof window<"u"?window:null}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){return new u6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.vo=i,this.Po=r,this.bo=s,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),i=Math.max(0,Date.now()-this.Do),r=Math.max(0,n-i);r>0&&A("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n,i,r,s,o,a,l){this.si=e,this.Mo=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new sb(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ut(n.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.$o===n&&this.Xo(i,r)},i=>{e(()=>{const r=new C(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Zo(r)})})}Xo(e,n){const i=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{i(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(r=>{i(()=>this.Zo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i9 extends qP{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=f6(this.serializer,e),i=function(r){if(!("targetChange"in r))return H.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?dt(s.readTime):H.min()}(e);return this.listener.eu(n,i)}nu(e){const n={};n.database=Fu(this.serializer),n.addTarget=function(r,s){let o;const a=s.target;if(o=Gf(a)?{documents:wP(r,a)}:{query:_P(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=pP(r,s.resumeToken);const l=Yv(r,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(H.min())>0){o.readTime=cl(r,s.snapshotVersion.toTimestamp());const l=Yv(r,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const i=g6(this.serializer,e);i&&(n.labels=i),this.zo(n)}su(e){const n={};n.database=Fu(this.serializer),n.removeTarget=e,this.zo(n)}}class r9 extends qP{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=p6(e.writeResults,e.commitTime),i=dt(e.commitTime);return this.listener.uu(i,n)}return q(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Fu(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>$u(this.serializer,i))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new C(k.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.po(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new C(k.UNKNOWN,r.toString())})}Ao(e,n,i,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ao(e,n,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(k.UNKNOWN,s.toString())})}terminate(){this.hu=!0}}class o9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(ut(n),this.wu=!1):A("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=s,this.vu.Jr(o=>{i.enqueueAndForget(async()=>{Ms(this)&&(A("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=F(a);l.Au.add(4),await Nl(l),l.Pu.set("Unknown"),l.Au.delete(4),await kh(l)}(this))})}),this.Pu=new o9(i,r)}}async function kh(t){if(Ms(t))for(const e of t.Ru)await e(!0)}async function Nl(t){for(const e of t.Ru)await e(!1)}function Tg(t,e){const n=F(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),lb(n)?ab(n):Ml(n).Uo()&&ob(n,e))}function Uu(t,e){const n=F(t),i=Ml(n);n.Eu.delete(e),i.Uo()&&KP(n,e),n.Eu.size===0&&(i.Uo()?i.Qo():Ms(n)&&n.Pu.set("Unknown"))}function ob(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).nu(e)}function KP(t,e){t.bu.Lt(e),Ml(t).su(e)}function ab(t){t.bu=new o6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.Pu.mu()}function lb(t){return Ms(t)&&!Ml(t).qo()&&t.Eu.size>0}function Ms(t){return F(t).Au.size===0}function GP(t){t.bu=void 0}async function l9(t){t.Eu.forEach((e,n)=>{ob(t,e)})}async function c9(t,e){GP(t),lb(t)?(t.Pu.pu(e),ab(t)):t.Pu.set("Unknown")}async function u9(t,e,n){if(t.Pu.set("Online"),e instanceof fP&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Eu.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Eu.delete(o),i.bu.removeTarget(o))}(t,e)}catch(i){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ip(t,i)}else if(e instanceof Kd?t.bu.Wt(e):e instanceof dP?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(H.min()))try{const i=await UP(t.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.bu.ue(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Eu.get(l);c&&r.Eu.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=r.Eu.get(a);if(!c)return;r.Eu.set(a,c.withResumeToken(It.EMPTY_BYTE_STRING,c.snapshotVersion)),KP(r,a);const u=new hr(c.target,a,l,c.sequenceNumber);ob(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){A("RemoteStore","Failed to raise snapshot:",i),await ip(t,i)}}async function ip(t,e,n){if(!Ns(e))throw e;t.Au.add(1),await Nl(t),t.Pu.set("Offline"),n||(n=()=>UP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{A("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await kh(t)})}function QP(t,e){return e().catch(n=>ip(t,n,e))}async function Ol(t){const e=F(t),n=bs(e);let i=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;h9(e);)try{const r=await Y6(e.localStore,i);if(r===null){e.Tu.length===0&&n.Qo();break}i=r.batchId,d9(e,r)}catch(r){await ip(e,r)}YP(e)&&XP(e)}function h9(t){return Ms(t)&&t.Tu.length<10}function d9(t,e){t.Tu.push(e);const n=bs(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function YP(t){return Ms(t)&&!bs(t).qo()&&t.Tu.length>0}function XP(t){bs(t).start()}async function f9(t){bs(t).au()}async function p9(t){const e=bs(t);for(const n of t.Tu)e.ou(n.mutations)}async function g9(t,e,n){const i=t.Tu.shift(),r=q_.from(i,e,n);await QP(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ol(t)}async function m9(t,e){e&&bs(t).ru&&await async function(n,i){if(r=i.code,cP(r)&&r!==k.ABORTED){const s=n.Tu.shift();bs(n).Go(),await QP(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ol(n)}var r}(t,e),YP(t)&&XP(t)}async function d1(t,e){const n=F(t);n.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");const i=Ms(n);n.Au.add(3),await Nl(n),i&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await kh(n)}async function iw(t,e){const n=F(t);e?(n.Au.delete(2),await kh(n)):e||(n.Au.add(2),await Nl(n),n.Pu.set("Unknown"))}function Ml(t){return t.Vu||(t.Vu=function(e,n,i){const r=F(e);return r.lu(),new i9(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:l9.bind(null,t),co:c9.bind(null,t),eu:u9.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),lb(t)?ab(t):t.Pu.set("Unknown")):(await t.Vu.stop(),GP(t))})),t.Vu}function bs(t){return t.Su||(t.Su=function(e,n,i){const r=F(e);return r.lu(),new r9(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:f9.bind(null,t),co:m9.bind(null,t),cu:p9.bind(null,t),uu:g9.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await Ol(t)):(await t.Su.stop(),t.Tu.length>0&&(A("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new cb(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new C(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ll(t,e){if(ut("AsyncQueue",`${e}: ${t}`),Ns(t))return new C(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.comparator=e?(n,i)=>e(n,i)||L.comparator(n.key,i.key):(n,i)=>L.comparator(n.key,i.key),this.keyedMap=_c(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Wa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.Du=new Re(L.comparator)}track(e){const n=e.doc.key,i=this.Du.get(n);i?e.type!==0&&i.type===3?this.Du=this.Du.insert(n,e):e.type===3&&i.type!==1?this.Du=this.Du.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Du=this.Du.remove(n):e.type===1&&i.type===2?this.Du=this.Du.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):B():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,i)=>{e.push(i)}),e}}class dl{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new dl(e,n,Wa.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(){this.xu=void 0,this.listeners=[]}}class v9{constructor(){this.queries=new Os(e=>GR(e),_h),this.onlineState="Unknown",this.Nu=new Set}}async function ub(t,e){const n=F(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new y9),r)try{s.xu=await n.onListen(i)}catch(o){const a=Ll(o,`Initialization of query '${Qv(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.listeners.push(e),e.ku(n.onlineState),s.xu&&e.Mu(s.xu)&&db(n)}async function hb(t,e){const n=F(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function w9(t,e){const n=F(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Mu(r)&&(i=!0);o.xu=r}}i&&db(n)}function _9(t,e,n){const i=F(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function db(t){t.Nu.forEach(e=>{e.next()})}class fb{constructor(e,n,i){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=i||{}}Mu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new dl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Uu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.Ku=e,this.byteLength=n}Gu(){return"metadata"in this.Ku}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.serializer=e}ir(e){return ji(this.serializer,e)}rr(e){return e.metadata.exists?vP(this.serializer,e.document,!1):Le.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return dt(e)}}class I9{constructor(e,n,i){this.Qu=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JP(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++n;const i=ye.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}zu(e){const n=new Map,i=new p1(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.ir(r.metadata.name);for(const o of r.metadata.queries){const a=(n.get(o)||ne()).add(s);n.set(o,a)}}return n}async complete(){const e=await X6(this.localStore,new p1(this.serializer),this.documents,this.Qu.id),n=this.zu(this.documents);for(const i of this.queries)await J6(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:e}}}function JP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.key=e}}class eN{constructor(e){this.key=e}}class tN{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=ne(),this.mutatedKeys=ne(),this.Zu=YR(e),this.tc=new Wa(this.Zu)}get ec(){return this.Ju}nc(e,n){const i=n?n.sc:new f1,r=n?n.tc:this.tc;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=bh(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),w=!0):this.ic(d,f)||(i.track({type:2,doc:f}),w=!0,(l&&this.Zu(f,l)>0||c&&this.Zu(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),w=!0):d&&!f&&(i.track({type:1,doc:d}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{tc:o,sc:i,ji:a,mutatedKeys:s}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const s=e.sc.Cu();s.sort((c,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return f(h)-f(d)}(c.type,u.type)||this.Zu(c.doc,u.doc)),this.rc(i);const o=n?this.oc():[],a=this.Xu.size===0&&this.current?1:0,l=a!==this.Yu;return this.Yu=a,s.length!==0||l?{snapshot:new dl(this.query,e.tc,r,s,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new f1,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=ne(),this.tc.forEach(i=>{this.cc(i.key)&&(this.Xu=this.Xu.add(i.key))});const n=[];return e.forEach(i=>{this.Xu.has(i)||n.push(new eN(i))}),this.Xu.forEach(i=>{e.has(i)||n.push(new ZP(i))}),n}ac(e){this.Ju=e.sr,this.Xu=ne();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return dl.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class E9{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class S9{constructor(e){this.key=e,this.lc=!1}}class T9{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new Os(a=>GR(a),_h),this._c=new Map,this.wc=new Set,this.mc=new Re(L.comparator),this.gc=new Map,this.yc=new eb,this.Ic={},this.Tc=new Map,this.Ec=Vo.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function k9(t,e){const n=vb(t);let i,r;const s=n.dc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.hc();else{const o=await ul(n.localStore,Nn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await pb(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&Tg(n.remoteStore,o)}return r}async function pb(t,e,n,i,r){t.Rc=(h,d,f)=>async function(p,g,w,y){let m=g.view.nc(w);m.ji&&(m=await ep(p.localStore,g.query,!1).then(({documents:I})=>g.view.nc(I,m)));const v=y&&y.targetChanges.get(g.targetId),_=g.view.applyChanges(m,p.isPrimaryClient,v);return rw(p,g.targetId,_.uc),_.snapshot}(t,h,d,f);const s=await ep(t.localStore,e,!0),o=new tN(e,s.sr),a=o.nc(s.documents),l=Sh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);rw(t,n,c.uc);const u=new E9(e,n,o);return t.dc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function x9(t,e){const n=F(t),i=n.dc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(s=>!_h(s,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await hl(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Uu(n.remoteStore,i.targetId),fl(n,i.targetId)}).catch(Ps)):(fl(n,i.targetId),await hl(n.localStore,i.targetId,!0))}async function C9(t,e,n){const i=wb(t);try{const r=await function(s,o){const a=F(s),l=qe.now(),c=o.reduce((d,f)=>d.add(f.key),ne());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Cn(),p=ne();return a.Xi.getEntries(d,c).next(g=>{f=g,f.forEach((w,y)=>{y.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(g=>{u=g;const w=[];for(const y of o){const m=i6(y,u.get(y.key).overlayedDocument);m!=null&&w.push(new Cr(y.key,m,UR(m.value.mapValue),He.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(g=>{h=g;const w=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(d,g.batchId,w)})}).then(()=>({batchId:h.batchId,changes:JR(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.Ic[s.currentUser.toKey()];l||(l=new Re(te)),l=l.insert(o,a),s.Ic[s.currentUser.toKey()]=l}(i,r.batchId,n),await Ar(i,r.changes),await Ol(i.remoteStore)}catch(r){const s=Ll(r,"Failed to persist write");n.reject(s)}}async function nN(t,e){const n=F(t);try{const i=await Q6(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.gc.get(s);o&&(q(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.lc=!0:r.modifiedDocuments.size>0?q(o.lc):r.removedDocuments.size>0&&(q(o.lc),o.lc=!1))}),await Ar(n,i,e)}catch(i){await Ps(i)}}function g1(t,e,n){const i=F(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.dc.forEach((s,o)=>{const a=o.view.ku(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=F(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.ku(o)&&(l=!0)}),l&&db(a)}(i.eventManager,e),r.length&&i.fc.eu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A9(t,e,n){const i=F(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.gc.get(e),s=r&&r.key;if(s){let o=new Re(L.comparator);o=o.insert(s,Le.newNoDocument(s,H.min()));const a=ne().add(s),l=new Eh(H.min(),new Map,new Re(te),o,a);await nN(i,l),i.mc=i.mc.remove(s),i.gc.delete(e),yb(i)}else await hl(i.localStore,e,!1).then(()=>fl(i,e,n)).catch(Ps)}async function D9(t,e){const n=F(t),i=e.batch.batchId;try{const r=await G6(n.localStore,e);mb(n,i,null),gb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ar(n,r)}catch(r){await Ps(r)}}async function R9(t,e,n){const i=F(t);try{const r=await function(s,o){const a=F(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(q(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);mb(i,e,n),gb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ar(i,r)}catch(r){await Ps(r)}}async function P9(t,e){const n=F(t);Ms(n.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(s){const o=F(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(i===-1)return void e.resolve();const r=n.Tc.get(i)||[];r.push(e),n.Tc.set(i,r)}catch(i){const r=Ll(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function gb(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function mb(t,e,n){const i=F(t);let r=i.Ic[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ic[i.currentUser.toKey()]=r}}function fl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.dc.delete(i),n&&t.fc.vc(i,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(i=>{t.yc.containsKey(i)||iN(t,i)})}function iN(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(Uu(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),yb(t))}function rw(t,e,n){for(const i of n)i instanceof ZP?(t.yc.addReference(i.key,e),N9(t,i)):i instanceof eN?(A("SyncEngine","Document no longer in limbo: "+i.key),t.yc.removeReference(i.key,e),t.yc.containsKey(i.key)||iN(t,i.key)):B()}function N9(t,e){const n=e.key,i=n.path.canonicalString();t.mc.get(n)||t.wc.has(i)||(A("SyncEngine","New document in limbo: "+n),t.wc.add(i),yb(t))}function yb(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new L(ye.fromString(e)),i=t.Ec.next();t.gc.set(i,new S9(n)),t.mc=t.mc.insert(n,i),Tg(t.remoteStore,new hr(Nn(Dl(n.path)),i,"TargetPurposeLimboResolution",kn.ct))}}async function Ar(t,e,n){const i=F(t),r=[],s=[],o=[];i.dc.isEmpty()||(i.dc.forEach((a,l)=>{o.push(i.Rc(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=ib.Bi(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.fc.eu(r),await async function(a,l){const c=F(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>S.forEach(l,h=>S.forEach(h.$i,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>S.forEach(h.Fi,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Ns(u))throw u;A("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Hi.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.Hi=c.Hi.insert(h,p)}}}(i.localStore,s))}async function O9(t,e){const n=F(t);if(!n.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());const i=await $P(n.localStore,e);n.currentUser=e,function(r,s){r.Tc.forEach(o=>{o.forEach(a=>{a.reject(new C(k.CANCELLED,s))})}),r.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ar(n,i.tr)}}function M9(t,e){const n=F(t),i=n.gc.get(e);if(i&&i.lc)return ne().add(i.key);{let r=ne();const s=n._c.get(e);if(!s)return r;for(const o of s){const a=n.dc.get(o);r=r.unionWith(a.view.ec)}return r}}async function L9(t,e){const n=F(t),i=await ep(n.localStore,e.query,!0),r=e.view.ac(i);return n.isPrimaryClient&&rw(n,e.targetId,r.uc),r}async function F9(t,e){const n=F(t);return zP(n.localStore,e).then(i=>Ar(n,i))}async function $9(t,e,n,i){const r=F(t),s=await function(o,a){const l=F(o),c=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.Vn(u,a).next(h=>h?l.localDocuments.getDocuments(u,h):S.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Ol(r.remoteStore):n==="acknowledged"||n==="rejected"?(mb(r,e,i||null),gb(r,e),function(o,a){F(F(o).mutationQueue).Dn(a)}(r.localStore,e)):B(),await Ar(r,s)):A("SyncEngine","Cannot apply mutation batch with id: "+e)}async function U9(t,e){const n=F(t);if(vb(n),wb(n),e===!0&&n.Ac!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await m1(n,i.toArray());n.Ac=!0,await iw(n.remoteStore,!0);for(const s of r)Tg(n.remoteStore,s)}else if(e===!1&&n.Ac!==!1){const i=[];let r=Promise.resolve();n._c.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(fl(n,o),hl(n.localStore,o,!0))),Uu(n.remoteStore,o)}),await r,await m1(n,i),function(s){const o=F(s);o.gc.forEach((a,l)=>{Uu(o.remoteStore,l)}),o.yc.Is(),o.gc=new Map,o.mc=new Re(L.comparator)}(n),n.Ac=!1,await iw(n.remoteStore,!1)}}async function m1(t,e,n){const i=F(t),r=[],s=[];for(const o of e){let a;const l=i._c.get(o);if(l&&l.length!==0){a=await ul(i.localStore,Nn(l[0]));for(const c of l){const u=i.dc.get(c),h=await L9(i,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await BP(i.localStore,o);a=await ul(i.localStore,c),await pb(i,rN(c),o,!1,a.resumeToken)}r.push(a)}return i.fc.eu(s),r}function rN(t){return KR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function V9(t){const e=F(t);return F(F(e.localStore).persistence).Mi()}async function B9(t,e,n,i){const r=F(t);if(r.Ac)return void A("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await zP(r.localStore,QR(s[0])),a=Eh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",It.EMPTY_BYTE_STRING);await Ar(r,o,a);break}case"rejected":await hl(r.localStore,e,!0),fl(r,e,i);break;default:B()}}async function z9(t,e,n){const i=vb(t);if(i.Ac){for(const r of e){if(i._c.has(r)){A("SyncEngine","Adding an already active target "+r);continue}const s=await BP(i.localStore,r),o=await ul(i.localStore,s);await pb(i,rN(s),o.targetId,!1,o.resumeToken),Tg(i.remoteStore,o)}for(const r of n)i._c.has(r)&&await hl(i.localStore,r,!1).then(()=>{Uu(i.remoteStore,r),fl(i,r)}).catch(Ps)}}function vb(t){const e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A9.bind(null,e),e.fc.eu=w9.bind(null,e.eventManager),e.fc.vc=_9.bind(null,e.eventManager),e}function wb(t){const e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R9.bind(null,e),e}function j9(t,e,n){const i=F(t);(async function(r,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=F(h),p=dt(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",g=>f.Ls.getBundleMetadata(g,d.id)).then(g=>!!g&&g.createTime.compareTo(p)>=0)}(r.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(JP(a));const l=new I9(a,r.localStore,s.serializer);let c=await s.Pc();for(;c;){const h=await l.ju(c);h&&o._updateProgress(h),c=await s.Pc()}const u=await l.complete();return await Ar(r,u.Hu,void 0),await function(h,d){const f=F(h);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Ls.saveBundleMetadata(p,d))}(r.localStore,a),o._completeWith(u.progress),Promise.resolve(u.Wu)}catch(a){return Ii("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class sw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Th(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return FP(this.persistence,new LP,e.initialUser,this.serializer)}createPersistence(e){return new MP(Sg.js,this.serializer)}createSharedClientState(e){return new WP}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sN extends sw{constructor(e,n,i){super(),this.bc=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.bc.initialize(this,e),await wb(this.bc.syncEngine),await Ol(this.bc.remoteStore),await this.persistence.pi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return FP(this.persistence,new LP,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new P6(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new g3(n,this.persistence);return new p3(e.asyncQueue,i)}createPersistence(e){const n=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new tb(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,HP(),Gd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new WP}}class W9 extends sN{constructor(e,n){super(e,n,!1),this.bc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.bc.syncEngine;this.sharedClientState instanceof iy&&(this.sharedClientState.syncEngine={Qr:$9.bind(null,n),jr:B9.bind(null,n),zr:z9.bind(null,n),Mi:V9.bind(null,n),Gr:F9.bind(null,n)},await this.sharedClientState.start()),await this.persistence.pi(async i=>{await U9(this.bc.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=HP();if(!iy.D(n))throw new C(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iy(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class _b{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>g1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O9.bind(null,this.syncEngine),await iw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new v9}createDatastore(e){const n=Th(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new n9(r));var r;return function(s,o,a,l){return new s9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>g1(this.syncEngine,a,0),o=h1.D()?new h1:new Z6,new a9(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(e,n){return function(i,r,s,o,a,l,c){const u=new T9(i,r,s,o,a,l);return c&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=F(e);A("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await Nl(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n){this.Dc=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(i=>{i&&i.Gu()?this.metadata.resolve(i.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Ku)}`))},i=>this.metadata.reject(i))}close(){return this.Dc.cancel()}async getMetadata(){return this.metadata.promise}async Pc(){return await this.getMetadata(),this.xc()}async xc(){const e=await this.Nc();if(e===null)return null;const n=this.Cc.decode(e),i=Number(n);isNaN(i)&&this.kc(`length string (${n}) is not valid number`);const r=await this.Mc(i);return new b9(JSON.parse(r),e.length+i)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Nc(){for(;this.Oc()<0&&!await this.$c(););if(this.buffer.length===0)return null;const e=this.Oc();e<0&&this.kc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Mc(e){for(;this.buffer.length<e;)await this.$c()&&this.kc("Reached the end of bundle when more is expected.");const n=this.Cc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Dc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,r){const s=F(i),o=Fu(s.serializer)+"/documents",a={documents:r.map(h=>Lu(s.serializer,h))},l=await s.Ao("BatchGetDocuments",o,a,r.length),c=new Map;l.forEach(h=>{const d=d6(s.serializer,h);c.set(d.key.toString(),d)});const u=[];return r.forEach(h=>{const d=c.get(h.toString());q(!!d),u.push(d)}),u}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=L.fromPath(i);this.mutations.push(new W_(r,this.precondition(r)))}),await async function(n,i){const r=F(n),s=Fu(r.serializer)+"/documents",o={writes:i.map(a=>$u(r.serializer,a))};await r.po("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw B();n=H.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new C(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(H.min())?He.exists(!1):He.updateTime(n):He.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(H.min()))throw new C(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(n)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Fc=i.maxAttempts,this.Lo=new sb(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){this.Lo.xo(async()=>{const e=new q9(this.datastore),n=this.Lc(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.qc(r)}))}).catch(i=>{this.qc(i)})})}Lc(e){try{const n=this.updateFunction(e);return!vh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!cP(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=SR.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{A("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(A("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ll(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $P(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ow(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bb(t);A("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>d1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d1(e.remoteStore,s)),t._onlineComponents=e}function oN(t){return t.name==="FirebaseError"?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function bb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){A("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!oN(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new sw)}}else A("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new sw);return t._offlineComponents}async function xg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(A("FirestoreClient","Using user provided OnlineComponentProvider"),await ow(t,t._uninitializedComponentsProvider._online)):(A("FirestoreClient","Using default OnlineComponentProvider"),await ow(t,new _b))),t._onlineComponents}function aN(t){return bb(t).then(e=>e.persistence)}function Ib(t){return bb(t).then(e=>e.localStore)}function lN(t){return xg(t).then(e=>e.remoteStore)}function Eb(t){return xg(t).then(e=>e.syncEngine)}function Q9(t){return xg(t).then(e=>e.datastore)}async function pl(t){const e=await xg(t),n=e.eventManager;return n.onListen=k9.bind(null,e.syncEngine),n.onUnlisten=x9.bind(null,e.syncEngine),n}function Y9(t){return t.asyncQueue.enqueue(async()=>{const e=await aN(t),n=await lN(t);return e.setNetworkEnabled(!0),function(i){const r=F(i);return r.Au.delete(0),kh(r)}(n)})}function X9(t){return t.asyncQueue.enqueue(async()=>{const e=await aN(t),n=await lN(t);return e.setNetworkEnabled(!1),async function(i){const r=F(i);r.Au.add(0),await Nl(r),r.Pu.set("Offline")}(n)})}function J9(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await function(a,l){const c=F(a);return c.persistence.runTransaction("read document","readonly",u=>c.localDocuments.getDocument(u,l))}(i,r);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new C(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ll(o,`Failed to get document '${r} from cache`);s.reject(a)}}(await Ib(t),e,n)),n.promise}function cN(t,e,n={}){const i=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new kg({next:h=>{s.enqueueAndForget(()=>hb(r,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new C(k.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new C(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new fb(Dl(o.path),c,{includeMetadataChanges:!0,Uu:!0});return ub(r,u)}(await pl(t),t.asyncQueue,e,n,i)),i.promise}function Z9(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,r,s){try{const o=await ep(i,r,!0),a=new tN(r,o.sr),l=a.nc(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=Ll(o,`Failed to execute query '${r} against cache`);s.reject(a)}}(await Ib(t),e,n)),n.promise}function uN(t,e,n={}){const i=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new kg({next:h=>{s.enqueueAndForget(()=>hb(r,u)),h.fromCache&&a.source==="server"?l.reject(new C(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new fb(o,c,{includeMetadataChanges:!0,Uu:!0});return ub(r,u)}(await pl(t),t.asyncQueue,e,n,i)),i.promise}function eW(t,e){const n=new kg(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,r){F(i).Nu.add(r),r.next()}(await pl(t),n)),()=>{n.Sc(),t.asyncQueue.enqueueAndForget(async()=>function(i,r){F(i).Nu.delete(r)}(await pl(t),n))}}function tW(t,e,n,i){const r=function(s,o){let a;return a=typeof s=="string"?hP().encode(s):s,function(l,c){return new H9(l,c)}(function(l,c){if(l instanceof Uint8Array)return y1(l,c);if(l instanceof ArrayBuffer)return y1(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Th(e));t.asyncQueue.enqueueAndForget(async()=>{j9(await Eb(t),r,i)})}function nW(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){const r=F(n);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ls.getNamedQuery(s,i))}(await Ib(t),e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e,n){if(!n)throw new C(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hN(t,e,n,i){if(e===!0&&i===!0)throw new C(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w1(t){if(!L.isDocumentKey(t))throw new C(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _1(t){if(L.isDocumentKey(t))throw new C(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function we(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cg(t);throw new C(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dN(t,e){if(e<=0)throw new C(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new C(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new C(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new C(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b1(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new n3;switch(n.type){case"firstParty":return new o3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new C(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=v1.get(e);n&&(A("ComponentProvider","Removing Datastore"),v1.delete(e),n.terminate())}(this),Promise.resolve()}}function fN(t,e,n,i={}){var r;const s=(t=we(t,xh))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Ii("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let o,a;if(typeof i.mockUserToken=="string")o=i.mockUserToken,a=Ct.MOCK_USER;else{o=_C(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new C(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ct(l)}t._authCredentials=new i3(new ER(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}}class Qt{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qt(this.firestore,e,this._query)}}class Wi extends Qt{constructor(e,n,i){super(e,n,Dl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new L(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function Ni(t,e,...n){if(t=W(t),Sb("collection","path",e),t instanceof xh){const i=ye.fromString(e,...n);return _1(i),new Wi(t,null,i)}{if(!(t instanceof Ue||t instanceof Wi))throw new C(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return _1(i),new Wi(t.firestore,null,i)}}function iW(t,e){if(t=we(t,xh),Sb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new C(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qt(t,null,function(n){return new xr(ye.emptyPath(),n)}(e))}function ti(t,e,...n){if(t=W(t),arguments.length===1&&(e=SR.A()),Sb("doc","path",e),t instanceof xh){const i=ye.fromString(e,...n);return w1(i),new Ue(t,null,new L(i))}{if(!(t instanceof Ue||t instanceof Wi))throw new C(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ye.fromString(e,...n));return w1(i),new Ue(t.firestore,t instanceof Wi?t.converter:null,new L(i))}}function pN(t,e){return t=W(t),e=W(e),(t instanceof Ue||t instanceof Wi)&&(e instanceof Ue||e instanceof Wi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function gN(t,e){return t=W(t),e=W(e),t instanceof Qt&&e instanceof Qt&&t.firestore===e.firestore&&_h(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new sb(this,"async_queue_retry"),this.Yc=()=>{const n=Gd();n&&A("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=Gd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new Rt;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!Ns(e))throw e;A("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(i=>{this.zc=i,this.Wc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw ut("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Wc=!1,i))));return this.Kc=n,n}enqueueAfterDelay(e,n,i){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const r=cb.createAndSchedule(this,e,n,i,s=>this.ea(s));return this.jc.push(r),r}Xc(){this.zc&&B()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}function aw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class sW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW=-1;class at extends xh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new rW,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mN(this),this._firestoreClient.terminate()}}function aW(t,e){const n=typeof t=="object"?t:zp(),i=typeof t=="string"?t:e||"(default)",r=Cs(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=vC("firestore");s&&fN(r,...s)}return r}function Lt(t){return t._firestoreClient||mN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mN(t){var e,n,i;const r=t._freezeSettings(),s=function(o,a,l,c){return new L3(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new G9(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function lW(t,e){vN(t=we(t,at));const n=Lt(t);if(n._uninitializedComponentsProvider)throw new C(k.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new _b;return yN(n,r,new sN(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function cW(t){vN(t=we(t,at));const e=Lt(t);if(e._uninitializedComponentsProvider)throw new C(k.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new _b;return yN(e,i,new W9(i,n.cacheSizeBytes))}function yN(t,e,n){const i=new Rt;return t.asyncQueue.enqueue(async()=>{try{await Qd(t,n),await ow(t,e),i.resolve()}catch(r){const s=r;if(!oN(s))throw s;Ii("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function uW(t){if(t._initialized&&!t._terminated)throw new C(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!gi.D())return Promise.resolve();const i=n+"main";await gi.delete(i)}(nb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function hW(t){return function(e){const n=new Rt;return e.asyncQueue.enqueueAndForget(async()=>P9(await Eb(e),n)),n.promise}(Lt(t=we(t,at)))}function dW(t){return Y9(Lt(t=we(t,at)))}function fW(t){return X9(Lt(t=we(t,at)))}function pW(t,e){const n=Lt(t=we(t,at)),i=new sW;return tW(n,t._databaseId,e,i),i}function gW(t,e){return nW(Lt(t=we(t,at)),e).then(n=>n?new Qt(t,null,n.query):null)}function vN(t){if(t._initialized||t._terminated)throw new C(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(It.fromBase64String(e))}catch(n){throw new C(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new C(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW=/^__.*__$/;class yW{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rl(e,this.data,n,this.fieldTransforms)}}class wN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _N(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class Dg{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.oa(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.la(e),r}fa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.oa(),r}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return rp(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(_N(this.ua)&&mW.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vW{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Th(e)}ga(e,n,i,r=!1){return new Dg({ua:e,methodName:n,ma:i,path:ht.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yo(t){const e=t._freezeSettings(),n=Th(t._databaseId);return new vW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rg(t,e,n,i,r,s={}){const o=t.ga(s.merge||s.mergeFields?2:0,e,n,r);Cb("Data must be an object, but it was:",o,i);const a=EN(i,o);let l,c;if(s.merge)l=new xn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=lw(e,h,n);if(!o.contains(d))throw new C(k.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);TN(u,d)||u.push(d)}l=new xn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new yW(new Vt(a),l,c)}class Ch extends Qo{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function bN(t,e,n){return new Dg({ua:3,ma:e.settings.ma,methodName:t._methodName,ha:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tb extends Qo{_toFieldTransform(e){return new Ih(e.path,new al)}isEqual(e){return e instanceof Tb}}class wW extends Qo{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=bN(this,e,!0),i=this.ya.map(s=>Xo(s,n)),r=new Lo(i);return new Ih(e.path,r)}isEqual(e){return this===e}}class _W extends Qo{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=bN(this,e,!0),i=this.ya.map(s=>Xo(s,n)),r=new Fo(i);return new Ih(e.path,r)}isEqual(e){return this===e}}class bW extends Qo{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=new ll(e.serializer,nP(e.serializer,this.pa));return new Ih(e.path,n)}isEqual(e){return this===e}}function kb(t,e,n,i){const r=t.ga(1,e,n);Cb("Data must be an object, but it was:",r,i);const s=[],o=Vt.empty();Go(i,(l,c)=>{const u=Ab(e,l,n);c=W(c);const h=r.fa(u);if(c instanceof Ch)s.push(u);else{const d=Xo(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new xn(s);return new wN(o,a,r.fieldTransforms)}function xb(t,e,n,i,r,s){const o=t.ga(1,e,n),a=[lw(e,i,n)],l=[r];if(s.length%2!=0)throw new C(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(lw(e,s[d])),l.push(s[d+1]);const c=[],u=Vt.empty();for(let d=a.length-1;d>=0;--d)if(!TN(c,a[d])){const f=a[d];let p=l[d];p=W(p);const g=o.fa(f);if(p instanceof Ch)c.push(f);else{const w=Xo(p,g);w!=null&&(c.push(f),u.set(f,w))}}const h=new xn(c);return new wN(u,h,o.fieldTransforms)}function IN(t,e,n,i=!1){return Xo(n,t.ga(i?4:3,e))}function Xo(t,e){if(SN(t=W(t)))return Cb("Unsupported field value:",e,t),EN(t,e);if(t instanceof Qo)return function(n,i){if(!_N(i.ua))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=Xo(o,i.da(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=W(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nP(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=qe.fromDate(n);return{timestampValue:cl(i.serializer,r)}}if(n instanceof qe){const r=new qe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:cl(i.serializer,r)}}if(n instanceof Ag)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ki)return{bytesValue:pP(i.serializer,n._byteString)};if(n instanceof Ue){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Y_(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${Cg(n)}`)}(t,e)}function EN(t,e){const n={};return LR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(t,(i,r)=>{const s=Xo(r,e.aa(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function SN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Ag||t instanceof Ki||t instanceof Ue||t instanceof Qo)}function Cb(t,e,n){if(!SN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Cg(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function lw(t,e,n){if((e=W(e))instanceof Is)return e._internalPath;if(typeof e=="string")return Ab(t,e);throw rp("Field path arguments must be of type string or ",t,!1,void 0,n)}const IW=new RegExp("[~\\*/\\[\\]]");function Ab(t,e,n){if(e.search(IW)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Is(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rp(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new C(k.INVALID_ARGUMENT,a+t+l)}function TN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EW extends Vu{data(){return super.data()}}function Pg(t,e){return typeof e=="string"?Ab(t,e):e instanceof Is?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new C(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Db{}class Ah extends Db{}function Mr(t,e,...n){let i=[];e instanceof Db&&i.push(e),i=i.concat(n),function(r){const s=r.filter(a=>a instanceof Rb).length,o=r.filter(a=>a instanceof Ng).length;if(s>1||s>0&&o>0)throw new C(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ng extends Ah{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ng(e,n,i)}_apply(e){const n=this._parse(e);return CN(e._query,n),new Qt(e.firestore,e.converter,Gv(e._query,n))}_parse(e){const n=Yo(e.firestore);return function(r,s,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new C(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){E1(u,c);const d=[];for(const f of u)d.push(I1(a,r,f));h={arrayValue:{values:d}}}else h=I1(a,r,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||E1(u,c),h=IN(o,s,u,c==="in"||c==="not-in");return le.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function SW(t,e,n){const i=e,r=Pg("where",t);return Ng._create(r,i,n)}class Rb extends Db{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rb(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const a of o)CN(s,a),s=Gv(s,a)}(e._query,n),new Qt(e.firestore,e.converter,Gv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pb extends Ah{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pb(e,n)}_apply(e){const n=function(i,r,s){if(i.startAt!==null)throw new C(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new C(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ja(r,s);return function(a,l){if(B_(a)===null){const c=wg(a);c!==null&&AN(a,c,l.field)}}(i,o),o}(e._query,this._field,this._direction);return new Qt(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new xr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function TW(t,e="asc"){const n=e,i=Pg("orderBy",t);return Pb._create(i,n)}class Og extends Ah{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Og(e,n,i)}_apply(e){return new Qt(e.firestore,e.converter,Yf(e._query,this._limit,this._limitType))}}function kW(t){return dN("limit",t),Og._create("limit",t,"F")}function xW(t){return dN("limitToLast",t),Og._create("limitToLast",t,"L")}class Mg extends Ah{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Mg(e,n,i)}_apply(e){const n=xN(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,function(i,r){return new xr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)}(e._query,n))}}function CW(...t){return Mg._create("startAt",t,!0)}function AW(...t){return Mg._create("startAfter",t,!1)}class Lg extends Ah{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Lg(e,n,i)}_apply(e){const n=xN(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,function(i,r){return new xr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)}(e._query,n))}}function DW(...t){return Lg._create("endBefore",t,!1)}function RW(...t){return Lg._create("endAt",t,!0)}function xN(t,e,n,i){if(n[0]=W(n[0]),n[0]instanceof Vu)return function(r,s,o,a,l){if(!a)throw new C(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of vo(r))if(u.field.isKeyField())c.push(Oo(s,a.key));else{const h=a.data.field(u.field);if(vg(h))throw new C(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=u.field.canonicalString();throw new C(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}c.push(h)}return new _s(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Yo(t.firestore);return function(s,o,a,l,c,u){const h=s.explicitOrderBy;if(c.length>h.length)throw new C(k.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<c.length;f++){const p=c[f];if(h[f].field.isKeyField()){if(typeof p!="string")throw new C(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!z_(s)&&p.indexOf("/")!==-1)throw new C(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const g=s.path.child(ye.fromString(p));if(!L.isDocumentKey(g))throw new C(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const w=new L(g);d.push(Oo(o,w))}else{const g=IN(a,l,p);d.push(g)}}return new _s(d,u)}(t._query,t.firestore._databaseId,r,e,n,i)}}function I1(t,e,n){if(typeof(n=W(n))=="string"){if(n==="")throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&n.indexOf("/")!==-1)throw new C(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ye.fromString(n));if(!L.isDocumentKey(i))throw new C(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Oo(t,new L(i))}if(n instanceof Ue)return Oo(t,n._key);throw new C(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cg(n)}.`)}function E1(t,e){if(!Array.isArray(t)||t.length===0)throw new C(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CN(t,e){if(e.isInequality()){const i=wg(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new C(k.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=B_(t);s!==null&&AN(t,r,s)}const n=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new C(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new C(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function AN(t,e,n){if(!n.isEqual(e))throw new C(k.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Nb{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Ag(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=U_(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=ms(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ye.fromString(e);q(SP(i));const r=new vs(i.get(1),i.get(3)),s=new L(i.popFirst(5));return r.isEqual(n)||ut(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class PW extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ir extends Vu{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Pg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Gc extends Ir{data(e={}){return super.data(e)}}class Es{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new co(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Gc(this._firestore,this._userDataWriter,i.key,i,new co(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const a=new Gc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new co(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Gc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new co(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:NW(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function DN(t,e){return t instanceof Ir&&e instanceof Ir?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Es&&e instanceof Es&&t._firestore===e._firestore&&gN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){t=we(t,Ue);const e=we(t.firestore,at);return cN(Lt(e),t._key).then(n=>Ob(e,t,n))}class Jo extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function OW(t){t=we(t,Ue);const e=we(t.firestore,at),n=Lt(e),i=new Jo(e);return J9(n,t._key).then(r=>new Ir(e,i,t._key,r,new co(r!==null&&r.hasLocalMutations,!0),t.converter))}function MW(t){t=we(t,Ue);const e=we(t.firestore,at);return cN(Lt(e),t._key,{source:"server"}).then(n=>Ob(e,t,n))}function Qc(t){t=we(t,Qt);const e=we(t.firestore,at),n=Lt(e),i=new Jo(e);return kN(t._query),uN(n,t._query).then(r=>new Es(e,i,t,r))}function LW(t){t=we(t,Qt);const e=we(t.firestore,at),n=Lt(e),i=new Jo(e);return Z9(n,t._query).then(r=>new Es(e,i,t,r))}function FW(t){t=we(t,Qt);const e=we(t.firestore,at),n=Lt(e),i=new Jo(e);return uN(n,t._query,{source:"server"}).then(r=>new Es(e,i,t,r))}function cw(t,e,n){t=we(t,Ue);const i=we(t.firestore,at),r=Fg(t.converter,e,n);return Dh(i,[Rg(Yo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,He.none())])}function uw(t,e,n,...i){t=we(t,Ue);const r=we(t.firestore,at),s=Yo(r);let o;return o=typeof(e=W(e))=="string"||e instanceof Is?xb(s,"updateDoc",t._key,e,n,i):kb(s,"updateDoc",t._key,e),Dh(r,[o.toMutation(t._key,He.exists(!0))])}function $W(t){return Dh(we(t.firestore,at),[new Pl(t._key,He.none())])}function zu(t,e){const n=we(t.firestore,at),i=ti(t),r=Fg(t.converter,e);return Dh(n,[Rg(Yo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,He.exists(!1))]).then(()=>i)}function RN(t,...e){var n,i,r;t=W(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||aw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(aw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof Ue)c=we(t.firestore,at),u=Dl(t._key.path),l={next:h=>{e[o]&&e[o](Ob(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=we(t,Qt);c=we(h.firestore,at),u=h._query;const d=new Jo(c);l={next:f=>{e[o]&&e[o](new Es(c,d,h,f))},error:e[o+1],complete:e[o+2]},kN(t._query)}return function(h,d,f,p){const g=new kg(p),w=new fb(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>ub(await pl(h),w)),()=>{g.Sc(),h.asyncQueue.enqueueAndForget(async()=>hb(await pl(h),w))}}(Lt(c),u,a,l)}function UW(t,e){return eW(Lt(t=we(t,at)),aw(e)?e:{next:e})}function Dh(t,e){return function(n,i){const r=new Rt;return n.asyncQueue.enqueueAndForget(async()=>C9(await Eb(n),i,r)),r.promise}(Lt(t),e)}function Ob(t,e,n){const i=n.docs.get(e._key),r=new Jo(t);return new Ir(t,r,e._key,i,new co(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yo(e)}set(e,n,i){this._verifyNotCommitted();const r=zr(e,this._firestore),s=Fg(r.converter,n,i),o=Rg(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,He.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=zr(e,this._firestore);let o;return o=typeof(n=W(n))=="string"||n instanceof Is?xb(this._dataReader,"WriteBatch.update",s._key,n,i,r):kb(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zr(e,this._firestore);return this._mutations=this._mutations.concat(new Pl(n._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new C(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zr(t,e){if((t=W(t)).firestore!==e)throw new C(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Yo(e)}get(e){const n=zr(e,this._firestore),i=new PW(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return B();const s=r[0];if(s.isFoundDocument())return new Vu(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Vu(this._firestore,i,n._key,null,n.converter);throw B()})}set(e,n,i){const r=zr(e,this._firestore),s=Fg(r.converter,n,i),o=Rg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(e,n,i,...r){const s=zr(e,this._firestore);let o;return o=typeof(n=W(n))=="string"||n instanceof Is?xb(this._dataReader,"Transaction.update",s._key,n,i,r):kb(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=zr(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=zr(e,this._firestore),i=new Jo(this._firestore);return super.get(e).then(r=>new Ir(this._firestore,i,n._key,r._document,new co(!1,!1),n.converter))}}function jW(t,e,n){t=we(t,at);const i=Object.assign(Object.assign({},VW),n);return function(r){if(r.maxAttempts<1)throw new C(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,o){const a=new Rt;return r.asyncQueue.enqueueAndForget(async()=>{const l=await Q9(r);new K9(r.asyncQueue,l,o,s,a).run()}),a.promise}(Lt(t),r=>e(new zW(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(){return new Ch("deleteField")}function HW(){return new Tb("serverTimestamp")}function qW(...t){return new wW("arrayUnion",t)}function KW(...t){return new _W("arrayRemove",t)}function GW(t){return new bW("increment",t)}(function(t,e=!0){(function(n){Al=n})(Sr),Pn(new Gt("firestore",(n,{instanceIdentifier:i,options:r})=>{const s=n.getProvider("app").getImmediate(),o=new at(new r3(n.getProvider("auth-internal")),new l3(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new C(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vs(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Wt(_S,"3.11.0",t),Wt(_S,"3.11.0","esm2017")})();const QW="@firebase/firestore-compat",YW="0.3.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new C("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){if(typeof Uint8Array>"u")throw new C("unimplemented","Uint8Arrays are not available in this environment.")}function T1(){if(!O3())throw new C("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ju{constructor(e){this._delegate=e}static fromBase64String(e){return T1(),new ju(Ki.fromBase64String(e))}static fromUint8Array(e){return S1(),new ju(Ki.fromUint8Array(e))}toBase64(){return T1(),this._delegate.toBase64()}toUint8Array(){return S1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){return XW(t,["next","error","complete"])}function XW(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{enableIndexedDbPersistence(e,n){return lW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return cW(e._delegate)}clearIndexedDbPersistence(e){return uW(e._delegate)}}class PN{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof vs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){fN(this._delegate,e,n,i)}enableNetwork(){return dW(this._delegate)}disableNetwork(){return fW(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,hN("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hW(this._delegate)}onSnapshotsInSync(e){return UW(this._delegate,e)}get app(){if(!this._appCompat)throw new C("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gl(this,Ni(this._delegate,e))}catch(n){throw cn(n,"collection()","Firestore.collection()")}}doc(e){try{return new ni(this,ti(this._delegate,e))}catch(n){throw cn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ln(this,iW(this._delegate,e))}catch(n){throw cn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jW(this._delegate,n=>e(new NN(this,n)))}batch(){return Lt(this._delegate),new ON(new BW(this._delegate,e=>Dh(this._delegate,e)))}loadBundle(e){return pW(this._delegate,e)}namedQuery(e){return gW(this._delegate,e).then(n=>n?new ln(this,n):null)}}class $g extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(new Ki(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ni.forKey(n,this.firestore,null)}}function ZW(t){e3(t)}class NN{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new $g(e)}get(e){const n=uo(e);return this._delegate.get(n).then(i=>new Wu(this._firestore,new Ir(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=uo(e);return i?(Mb("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=uo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=uo(e);return this._delegate.delete(n),this}}class ON{constructor(e){this._delegate=e}set(e,n,i){const r=uo(e);return i?(Mb("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=uo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=uo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Gc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hu(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Bo.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new Bo(e,new $g(e),n),r.set(n,s)),s}}Bo.INSTANCES=new WeakMap;class ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $g(e)}static forPath(e,n,i){if(e.length%2!==0)throw new C("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ni(n,new Ue(n._delegate,i,new L(e)))}static forKey(e,n,i){return new ni(n,new Ue(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new gl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gl(this.firestore,Ni(this._delegate,e))}catch(n){throw cn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=W(e),e instanceof Ue?pN(this._delegate,e):!1}set(e,n){n=Mb("DocumentReference.set",n);try{return n?cw(this._delegate,e,n):cw(this._delegate,e)}catch(i){throw cn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?uw(this._delegate,e):uw(this._delegate,e,n,...i)}catch(r){throw cn(r,"updateDoc()","DocumentReference.update()")}}delete(){return $W(this._delegate)}onSnapshot(...e){const n=MN(e),i=LN(e,r=>new Wu(this.firestore,new Ir(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return RN(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=OW(this._delegate):(e==null?void 0:e.source)==="server"?n=MW(this._delegate):n=Bu(this._delegate),n.then(i=>new Wu(this.firestore,new Ir(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new ni(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function cn(t,e,n){return t.message=t.message.replace(e,n),t}function MN(t){for(const e of t)if(typeof e=="object"&&!hw(e))return e;return{}}function LN(t,e){var n,i;let r;return hw(t[0])?r=t[0]:hw(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Wu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ni(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return DN(this._delegate,e._delegate)}}class Hu extends Wu{data(e){const n=this._delegate.data(e);return t3(n!==void 0),n}}class ln{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $g(e)}where(e,n,i){try{return new ln(this.firestore,Mr(this._delegate,SW(e,n,i)))}catch(r){throw cn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ln(this.firestore,Mr(this._delegate,TW(e,n)))}catch(i){throw cn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ln(this.firestore,Mr(this._delegate,kW(e)))}catch(n){throw cn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ln(this.firestore,Mr(this._delegate,xW(e)))}catch(n){throw cn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ln(this.firestore,Mr(this._delegate,CW(...e)))}catch(n){throw cn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ln(this.firestore,Mr(this._delegate,AW(...e)))}catch(n){throw cn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ln(this.firestore,Mr(this._delegate,DW(...e)))}catch(n){throw cn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ln(this.firestore,Mr(this._delegate,RW(...e)))}catch(n){throw cn(n,"endAt()","Query.endAt()")}}isEqual(e){return gN(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=LW(this._delegate):(e==null?void 0:e.source)==="server"?n=FW(this._delegate):n=Qc(this._delegate),n.then(i=>new dw(this.firestore,new Es(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=MN(e),i=LN(e,r=>new dw(this.firestore,new Es(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return RN(this._delegate,n,i)}withConverter(e){return new ln(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class eH{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ln(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new eH(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Hu(this._firestore,i))})}isEqual(e){return DN(this._delegate,e._delegate)}}class gl extends ln{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ni(this.firestore,e):null}doc(e){try{return e===void 0?new ni(this.firestore,ti(this._delegate)):new ni(this.firestore,ti(this._delegate,e))}catch(n){throw cn(n,"doc()","CollectionReference.doc()")}}add(e){return zu(this._delegate,e).then(n=>new ni(this.firestore,n))}isEqual(e){return pN(this._delegate,e._delegate)}withConverter(e){return new gl(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function uo(t){return we(t,Ue)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(...e){this._delegate=new Is(...e)}static documentId(){return new Lb(ht.keyField().canonicalString())}isEqual(e){return e=W(e),e instanceof Is?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._delegate=e}static serverTimestamp(){const e=HW();return e._methodName="FieldValue.serverTimestamp",new to(e)}static delete(){const e=WW();return e._methodName="FieldValue.delete",new to(e)}static arrayUnion(...e){const n=qW(...e);return n._methodName="FieldValue.arrayUnion",new to(n)}static arrayRemove(...e){const n=KW(...e);return n._methodName="FieldValue.arrayRemove",new to(n)}static increment(e){const n=GW(e);return n._methodName="FieldValue.increment",new to(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH={Firestore:PN,GeoPoint:Ag,Timestamp:qe,Blob:ju,Transaction:NN,WriteBatch:ON,DocumentReference:ni,DocumentSnapshot:Wu,Query:ln,QueryDocumentSnapshot:Hu,QuerySnapshot:dw,CollectionReference:gl,FieldPath:Lb,FieldValue:to,setLogLevel:ZW,CACHE_SIZE_UNLIMITED:oW};function nH(t,e){t.INTERNAL.registerComponent(new Gt("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},tH)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t){nH(t,(e,n)=>new PN(e,n,new JW)),t.registerVersion(QW,YW)}iH(Il);var rH="firebase",sH="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt(rH,sH,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebasestorage.googleapis.com",oH="storageBucket",aH=2*60*1e3,lH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends jt{constructor(e,n,i=0){super(sy(e),`Firebase Storage: ${n} (${sy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gi||(Gi={}));function sy(t){return"storage/"+t}function cH(){const t="An unknown error occurred, please check the error payload for server response.";return new Yi(Gi.UNKNOWN,t)}function uH(){return new Yi(Gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hH(){return new Yi(Gi.CANCELED,"User canceled the upload/download.")}function dH(t){return new Yi(Gi.INVALID_URL,"Invalid URL '"+t+"'.")}function fH(t){return new Yi(Gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function k1(t){return new Yi(Gi.INVALID_ARGUMENT,t)}function $N(){return new Yi(Gi.APP_DELETED,"The Firebase app was deleted.")}function pH(t){return new Yi(Gi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=mi.makeFromUrl(e,n)}catch{return new mi(e,"")}if(i.path==="")return i;throw fH(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(_){_.path_=decodeURIComponent(_.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),p={bucket:1,path:3},g=n===FN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",y=new RegExp(`^https?://${g}/${r}/${w}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let _=0;_<v.length;_++){const I=v[_],E=I.regex.exec(e);if(E){const T=E[I.indices.bucket];let x=E[I.indices.path];x||(x=""),i=new mi(T,x),I.postModify(i);break}}if(i==null)throw dH(e);return i}}class gH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function h(w){r=setTimeout(()=>{r=null,t(f,l())},w)}function d(){s&&clearTimeout(s)}function f(w,...y){if(c){d();return}if(w){d(),u.call(null,w,...y);return}if(l()||o){d(),u.call(null,w,...y);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,h(v)}let p=!1;function g(w){p||(p=!0,d(),!c&&(r!==null?(w||(a=2),clearTimeout(r),h(0)):w||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function yH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){return t!==void 0}function x1(t,e,n,i){if(i<e)throw k1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw k1(`Invalid value for '${t}'. Expected ${n} or less.`)}function wH(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(sp||(sp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(e,n,i,r,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new hd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===sp.NO_ERROR,l=s.getStatus();if(!a||_H(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===sp.ABORT;i(!1,new hd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new hd(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());vH(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=cH();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?$N():hH();o(l)}else{const l=uH();o(l)}};this.canceled_?n(!1,new hd(!1,null,!0)):this.backoffId_=mH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function IH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kH(t,e,n,i,r,s,o=!0){const a=wH(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return SH(c,e),IH(c,n),EH(c,s),TH(c,i),new bH(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new op(e,n)}get root(){const e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CH(this._location.path)}get storage(){return this._service}get parent(){const e=xH(this._location.path);if(e===null)return null;const n=new mi(this._location.bucket,e);return new op(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pH(e)}}function C1(t,e){const n=e==null?void 0:e[oH];return n==null?null:mi.makeFromBucketSpec(n,t)}function AH(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:_C(r,t.app.options.projectId))}class DH{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=FN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aH,this._maxUploadRetryTime=lH,this._requests=new Set,r!=null?this._bucket=mi.makeFromBucketSpec(r,this._host):this._bucket=C1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=C1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new op(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new gH($N());{const o=kH(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const A1="@firebase/storage",D1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="storage";function RH(t=zp(),e){t=W(t);const i=Cs(t,UN).getImmediate({identifier:e}),r=vC("storage");return r&&PH(i,...r),i}function PH(t,e,n,i={}){AH(t,e,n,i)}function NH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new DH(n,i,r,e,Sr)}function OH(){Pn(new Gt(UN,NH,"PUBLIC").setMultipleInstances(!0)),Wt(A1,D1,""),Wt(A1,D1,"esm2017")}OH();const MH={apiKey:"AIzaSyDE9nF_Ghno85E9jdPY3qf5ASxTc3odNVM",authDomain:"slimpossible-34902.firebaseapp.com",databaseURL:"https://slimpossible-34902-default-rtdb.firebaseio.com",projectId:"slimpossible-34902",storageBucket:"slimpossible-34902.appspot.com",messagingSenderId:"858747206804",appId:"1:858747206804:web:2567fcbd6f40a1fbcb0881"},Fb=Bp(MH),Yn=aW(Fb),LH="users",FH=yB(Fb);RH(Fb);const $H=new pi;/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qu.apply(this,arguments)}var Kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kr||(Kr={}));const R1="popstate";function UH(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return fw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ap(r)}return BH(e,n,null,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $b(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VH(){return Math.random().toString(36).substr(2,8)}function P1(t,e){return{usr:t.state,key:t.key,idx:e}}function fw(t,e,n,i){return n===void 0&&(n=null),qu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fl(e):e,{state:n,key:e&&e.key||i||VH()})}function ap(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Fl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function BH(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Kr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(qu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Kr.Pop;let w=u(),y=w==null?null:w-c;c=w,l&&l({action:a,location:g.location,delta:y})}function d(w,y){a=Kr.Push;let m=fw(g.location,w,y);n&&n(m,w),c=u()+1;let v=P1(m,c),_=g.createHref(m);try{o.pushState(v,"",_)}catch{r.location.assign(_)}s&&l&&l({action:a,location:g.location,delta:1})}function f(w,y){a=Kr.Replace;let m=fw(g.location,w,y);n&&n(m,w),c=u();let v=P1(m,c),_=g.createHref(m);o.replaceState(v,"",_),s&&l&&l({action:a,location:g.location,delta:0})}function p(w){let y=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof w=="string"?w:ap(w);return vt(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let g={get action(){return a},get location(){return t(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(R1,h),l=w,()=>{r.removeEventListener(R1,h),l=null}},createHref(w){return e(r,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(w){return o.go(w)}};return g}var N1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(N1||(N1={}));function zH(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Fl(e):e,r=Ub(i.pathname||"/",n);if(r==null)return null;let s=VN(t);jH(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=JH(s[a],tq(r));return o}function VN(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=as([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VN(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:YH(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of BN(s.path))r(s,o,l)}),e}function BN(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=BN(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XH(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const WH=/^:\w+$/,HH=3,qH=2,KH=1,GH=10,QH=-2,O1=t=>t==="*";function YH(t,e){let n=t.split("/"),i=n.length;return n.some(O1)&&(i+=QH),e&&(i+=qH),n.filter(r=>!O1(r)).reduce((r,s)=>r+(WH.test(s)?HH:s===""?KH:GH),i)}function XH(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function JH(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=ZH({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let h=a.route;s.push({params:i,pathname:as([r,u.pathname]),pathnameBase:sq(as([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=as([r,u.pathnameBase]))}return s}function ZH(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=eq(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{if(u==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[u]=nq(a[h]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function eq(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$b(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function tq(t){try{return decodeURI(t)}catch(e){return $b(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nq(t,e){try{return decodeURIComponent(t)}catch(n){return $b(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ub(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function iq(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Fl(t):t;return{pathname:n?n.startsWith("/")?n:rq(n,e):e,search:oq(i),hash:aq(r)}}function rq(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function oy(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jN(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Fl(t):(r=qu({},t),vt(!r.pathname||!r.pathname.includes("?"),oy("?","pathname","search",r)),vt(!r.pathname||!r.pathname.includes("#"),oy("#","pathname","hash",r)),vt(!r.search||!r.search.includes("#"),oy("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=iq(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const as=t=>t.join("/").replace(/\/\/+/g,"/"),sq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lp.apply(this,arguments)}const Vb=b.createContext(null),cq=b.createContext(null),$l=b.createContext(null),Ug=b.createContext(null),Ul=b.createContext({outlet:null,matches:[]}),WN=b.createContext(null);function uq(t,e){let{relative:n}=e===void 0?{}:e;Rh()||vt(!1);let{basename:i,navigator:r}=b.useContext($l),{hash:s,pathname:o,search:a}=qN(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:as([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Rh(){return b.useContext(Ug)!=null}function Vg(){return Rh()||vt(!1),b.useContext(Ug).location}function HN(t){b.useContext($l).static||b.useLayoutEffect(t)}function Bg(){return b.useContext(Vb)!=null?Eq():hq()}function hq(){Rh()||vt(!1);let{basename:t,navigator:e}=b.useContext($l),{matches:n}=b.useContext(Ul),{pathname:i}=Vg(),r=JSON.stringify(zN(n).map(a=>a.pathnameBase)),s=b.useRef(!1);return HN(()=>{s.current=!0}),b.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=jN(a,JSON.parse(r),i,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:as([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,r,i])}function qN(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=b.useContext(Ul),{pathname:r}=Vg(),s=JSON.stringify(zN(i).map(o=>o.pathnameBase));return b.useMemo(()=>jN(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function dq(t,e){return fq(t,e)}function fq(t,e,n){Rh()||vt(!1);let{navigator:i}=b.useContext($l),{matches:r}=b.useContext(Ul),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Vg(),c;if(e){var u;let g=typeof e=="string"?Fl(e):e;a==="/"||(u=g.pathname)!=null&&u.startsWith(a)||vt(!1),c=g}else c=l;let h=c.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=zH(t,{pathname:d}),p=vq(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:as([a,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:as([a,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,n);return e&&p?b.createElement(Ug.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Kr.Pop}},p):p}function pq(){let t=Iq(),e=lq(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,s)}const gq=b.createElement(pq,null);class mq extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?b.createElement(Ul.Provider,{value:this.props.routeContext},b.createElement(WN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yq(t){let{routeContext:e,match:n,children:i}=t,r=b.useContext(Vb);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ul.Provider,{value:e},i)}function vq(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||vt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||gq);let d=e.concat(s.slice(0,c+1)),f=()=>{let p;return u?p=h:l.route.element?p=l.route.element:p=a,b.createElement(yq,{match:l,routeContext:{outlet:a,matches:d},children:p})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?b.createElement(mq,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:f(),routeContext:{outlet:null,matches:d}}):f()},null)}var pw;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(pw||(pw={}));var Ku;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ku||(Ku={}));function wq(t){let e=b.useContext(Vb);return e||vt(!1),e}function _q(t){let e=b.useContext(cq);return e||vt(!1),e}function bq(t){let e=b.useContext(Ul);return e||vt(!1),e}function KN(t){let e=bq(),n=e.matches[e.matches.length-1];return n.route.id||vt(!1),n.route.id}function Iq(){var t;let e=b.useContext(WN),n=_q(Ku.UseRouteError),i=KN(Ku.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function Eq(){let{router:t}=wq(pw.UseNavigateStable),e=KN(Ku.UseNavigateStable),n=b.useRef(!1);return HN(()=>{n.current=!0}),b.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,lp({fromRouteId:e},s)))},[t,e])}function Ec(t){vt(!1)}function Sq(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Kr.Pop,navigator:s,static:o=!1}=t;Rh()&&vt(!1);let a=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=Fl(i));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:f="default"}=i,p=b.useMemo(()=>{let g=Ub(c,a);return g==null?null:{location:{pathname:g,search:u,hash:h,state:d,key:f},navigationType:r}},[a,c,u,h,d,f,r]);return p==null?null:b.createElement($l.Provider,{value:l},b.createElement(Ug.Provider,{children:n,value:p}))}function Tq(t){let{children:e,location:n}=t;return dq(gw(e),n)}var M1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(M1||(M1={}));new Promise(()=>{});function gw(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(i,r)=>{if(!b.isValidElement(i))return;let s=[...e,r];if(i.type===b.Fragment){n.push.apply(n,gw(i.props.children,s));return}i.type!==Ec&&vt(!1),!i.props.index||!i.props.children||vt(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=gw(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mw.apply(this,arguments)}function kq(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function xq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Cq(t,e){return t.button===0&&(!e||e==="_self")&&!xq(t)}const Aq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Dq(t){let{basename:e,children:n,window:i}=t,r=b.useRef();r.current==null&&(r.current=UH({window:i,v5Compat:!0}));let s=r.current,[o,a]=b.useState({action:s.action,location:s.location});return b.useLayoutEffect(()=>s.listen(a),[s]),b.createElement(Sq,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const Rq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Pq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yw=b.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,h=kq(e,Aq),{basename:d}=b.useContext($l),f,p=!1;if(typeof c=="string"&&Pq.test(c)&&(f=c,Rq))try{let m=new URL(window.location.href),v=c.startsWith("//")?new URL(m.protocol+c):new URL(c),_=Ub(v.pathname,d);v.origin===m.origin&&_!=null?c=_+v.search+v.hash:p=!0}catch{}let g=uq(c,{relative:r}),w=Nq(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r});function y(m){i&&i(m),m.defaultPrevented||w(m)}return b.createElement("a",mw({},h,{href:f||g,onClick:p||s?i:y,ref:n,target:l}))});var L1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(L1||(L1={}));var F1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(F1||(F1={}));function Nq(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Bg(),l=Vg(),c=qN(t,{relative:o});return b.useCallback(u=>{if(Cq(u,n)){u.preventDefault();let h=i!==void 0?i:ap(l)===ap(c);a(t,{replace:h,state:r,preventScrollReset:s,relative:o})}},[l,a,c,i,r,n,t,s,o])}const $1=()=>{const t=Bg(),[e,n]=b.useState(""),i=async s=>{const o=ti(Yn,"users",s);return(await Bu(o)).data()!=null};return X("div",{className:"loginPage",children:[N("div",{className:"app-logo",children:N("img",{src:k2})}),X("form",{children:[N("button",{type:"button",onClick:()=>{_A(FH,$H).then(async function(s){var o=s.user.displayName,a=s.user.email,l=s.user.photoURL;if(localStorage.setItem("name",o),localStorage.setItem("image",l),localStorage.setItem("email",a),await i(a)){console.log("User Found!"),t("/"),window.location.reload();return}console.log("User not found");const u=ti(Yn,"users",a);cw(u,{daily_calorie_goal:null}).then(()=>{console.log('Document "userIds" created successfully'),n(""),t("/"),window.location.reload()}).catch(d=>{console.error("Error creating document: ",d),n("Error signing in. Please try again.")})}).catch(s=>{console.log(s)})},className:"login-with-google-btn",children:"Sign in with Google"}),N("h3",{className:"errorMessage",children:e})]})]})};function Oq(t,e,n){b.useEffect(()=>{if(!document)return;const i=document.querySelector('script[src="'.concat(t,'"]'));if(i!=null&&i.dataset.loaded){e==null||e();return}const r=i||document.createElement("script");i||(r.src=t);const s=()=>{r.dataset.loaded="1",e==null||e()};return r.addEventListener("load",s),n&&r.addEventListener("error",n),i||document.head.append(r),()=>{r.removeEventListener("load",s),n&&r.removeEventListener("error",n)}},[])}function Mq(t){let{chartVersion:e="current",chartPackages:n=["corechart","controls"],chartLanguage:i="en",mapsApiKey:r}=t;const[s,o]=b.useState(null),[a,l]=b.useState(!1);return Oq("https://www.gstatic.com/charts/loader.js",()=>{const c=window==null?void 0:window.google;c&&(c.charts.load(e,{packages:n,language:i,mapsApiKey:r}),c.charts.setOnLoadCallback(()=>{o(c)}))},()=>{l(!0)}),[s,a]}function Lq(t){let{onLoad:e,onError:n,...i}=t;const[r,s]=Mq(i);return b.useEffect(()=>{r&&e&&e(r)},[r]),b.useEffect(()=>{s&&n&&n()},[s]),null}const GN={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let U1=0;const Fq=()=>(U1+=1,"reactgooglegraph-".concat(U1)),$q=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],Uq=async function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((i,r)=>{const s="".concat(n.headers?"headers=".concat(n.headers):"headers=0"),o="".concat(n.query?"&tq=".concat(encodeURIComponent(n.query)):""),a="".concat(n.gid?"&gid=".concat(n.gid):""),l="".concat(n.sheet?"&sheet=".concat(n.sheet):""),c="".concat(n.access_token?"&access_token=".concat(n.access_token):""),u="".concat(s).concat(a).concat(l).concat(o).concat(c),h="".concat(e,"/gviz/tq?").concat(u);new t.visualization.Query(h).send(f=>{f.isError()?r("Error in query:  ".concat(f.getMessage()," ").concat(f.getDetailedMessage())):i(f.getDataTable())})})},{Provider:Vq,Consumer:Bq}=b.createContext(GN),zq=t=>{let{children:e,value:n}=t;return b.createElement(Vq,{value:n},e)},QN=t=>{let{render:e}=t;return b.createElement(Bq,null,n=>e(n))},jq="#CCCCCC";class Wq extends b.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:e,googleChartWrapper:n}=this.props;window.removeEventListener("resize",this.onResize),e.visualization.events.removeAllListeners(n),n.getChartType()==="Timeline"&&n.getChart()&&n.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...e){super(...e),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:n,googleChartWrapper:i}=this.props;n.visualization.events.addListener(i,"select",()=>{const s=i.getChart().getSelection(),o=i.getDataTable();if(s.length===0||s[0].row||!o)return;const a=s[0].column,l=this.getColumnID(o,a);this.state.hiddenColumns.includes(l)?this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns.filter(u=>u!==l)]})):this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns,l]}))})},this.applyFormatters=(n,i)=>{const{google:r}=this.props;for(let s of i)switch(s.type){case"ArrowFormat":{new r.visualization.ArrowFormat(s.options).format(n,s.column);break}case"BarFormat":{new r.visualization.BarFormat(s.options).format(n,s.column);break}case"ColorFormat":{const o=new r.visualization.ColorFormat(s.options),{ranges:a}=s;for(let l of a)o.addRange(...l);o.format(n,s.column);break}case"DateFormat":{new r.visualization.DateFormat(s.options).format(n,s.column);break}case"NumberFormat":{new r.visualization.NumberFormat(s.options).format(n,s.column);break}case"PatternFormat":{new r.visualization.PatternFormat(s.options).format(n,s.column);break}}},this.getColumnID=(n,i)=>n.getColumnId(i)||n.getColumnLabel(i),this.draw=async n=>{let{data:i,diffdata:r,rows:s,columns:o,options:a,legend_toggle:l,legendToggle:c,chartType:u,formatters:h,spreadSheetUrl:d,spreadSheetQueryParameters:f}=n;const{google:p,googleChartWrapper:g}=this.props;let w,y=null;if(r){const _=p.visualization.arrayToDataTable(r.old),I=p.visualization.arrayToDataTable(r.new);y=p.visualization[u].prototype.computeDiff(_,I)}i!==null?Array.isArray(i)?w=p.visualization.arrayToDataTable(i):w=new p.visualization.DataTable(i):s&&o?w=p.visualization.arrayToDataTable([o,...s]):d?w=await Uq(p,d,f):w=p.visualization.arrayToDataTable([]);const m=w.getNumberOfColumns();for(let _=0;_<m;_+=1){const I=this.getColumnID(w,_);if(this.state.hiddenColumns.includes(I)){const E=w.getColumnLabel(_),T=w.getColumnId(_),x=w.getColumnType(_);w.removeColumn(_),w.addColumn({label:E,id:T,type:x})}}const v=g.getChart();g.getChartType()==="Timeline"&&v&&v.clearChart(),g.setChartType(u),g.setOptions(a||{}),g.setDataTable(w),g.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(w),y&&(g.setDataTable(y),g.draw()),h&&(this.applyFormatters(w,h),g.setDataTable(w),g.draw()),(c===!0||l===!0)&&this.grayOutHiddenColumns({options:a})},this.grayOutHiddenColumns=n=>{let{options:i}=n;const{googleChartWrapper:r}=this.props,s=r.getDataTable();if(!s)return;const o=s.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const l=Array.from({length:o-1}).map((c,u)=>{const h=this.getColumnID(s,u+1);return this.state.hiddenColumns.includes(h)?jq:i&&i.colors?i.colors[u]:$q[u]});r.setOptions({...i,colors:l}),r.draw()},this.onResize=()=>{const{googleChartWrapper:n}=this.props;n.draw()}}}class Hq extends b.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:e,googleChartWrapper:n,googleChartDashboard:i}=this.props;return b.createElement(QN,{render:r=>b.createElement(Wq,Object.assign({},r,{google:e,googleChartWrapper:n,googleChartDashboard:i}))})}}class qq extends b.Component{shouldComponentUpdate(){return!1}listenToEvents(e){let{chartEvents:n,google:i,googleChartWrapper:r}=e;if(n){i.visualization.events.removeAllListeners(r);for(let o of n){var s=this;const{eventName:a,callback:l}=o;i.visualization.events.addListener(r,a,function(){for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];l({chartWrapper:r,props:s.props,google:i,eventArgs:u})})}}}render(){const{google:e,googleChartWrapper:n}=this.props;return b.createElement(QN,{render:i=>(this.listenToEvents({chartEvents:i.chartEvents||null,google:e,googleChartWrapper:n}),null)})}}let V1=0;class Kq extends b.Component{componentDidMount(){const{options:e,google:n,chartType:i,chartWrapperParams:r,toolbarItems:s,getChartEditor:o,getChartWrapper:a}=this.props,l={chartType:i,options:e,containerId:this.getGraphID(),...r},c=new n.visualization.ChartWrapper(l);c.setOptions(e||{}),a&&a(c,n);const u=new n.visualization.Dashboard(this.dashboard_ref),h=this.addControls(c,u);s&&n.visualization.drawToolbar(this.toolbar_ref.current,s);let d=null;o&&(d=new n.visualization.ChartEditor,o({chartEditor:d,chartWrapper:c,google:n})),this.setState({googleChartEditor:d,googleChartControls:h,googleChartDashboard:u,googleChartWrapper:c,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:e}=this.props;if(e)for(let n=0;n<e.length;n+=1){const{controlType:i,options:r,controlWrapperParams:s}=e[n];s&&"state"in s&&this.state.googleChartControls[n].control.setState(s.state),this.state.googleChartControls[n].control.setOptions(r),this.state.googleChartControls[n].control.setControlType(i)}}shouldComponentUpdate(e,n){return this.state.isReady!==n.isReady||e.controls!==this.props.controls}render(){const{width:e,height:n,options:i,style:r}=this.props,s={height:n||i&&i.height,width:e||i&&i.width,...r};return this.props.render?b.createElement("div",{ref:this.dashboard_ref,style:s},b.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):b.createElement("div",{ref:this.dashboard_ref,style:s},this.renderControl(o=>{let{controlProp:a}=o;return a.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(o=>{let{controlProp:a}=o;return a.controlPosition==="bottom"}),this.renderToolBar())}constructor(...e){var n;super(),n=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=b.createRef(),this.toolbar_ref=b.createRef(),this.getGraphID=()=>{const{graphID:i,graph_id:r}=this.props;let s;return!i&&!r?this.graphID?s=this.graphID:s=Fq():i&&!r?s=i:r&&!i?s=r:s=i,this.graphID=s,this.graphID},this.getControlID=(i,r)=>{V1+=1;let s;return typeof i>"u"?s="googlechart-control-".concat(r,"-").concat(V1):s=i,s},this.addControls=(i,r)=>{const{google:s,controls:o}=this.props,a=o?o.map((c,u)=>{const{controlID:h,controlType:d,options:f,controlWrapperParams:p}=c,g=this.getControlID(h,u);return{controlProp:c,control:new s.visualization.ControlWrapper({containerId:g,controlType:d,options:f,...p})}}):null;if(!a)return null;r.bind(a.map(c=>{let{control:u}=c;return u}),i);for(let c of a){const{control:u,controlProp:h}=c,{controlEvents:d=[]}=h;for(let f of d){var l=this;const{callback:p,eventName:g}=f;s.visualization.events.removeListener(u,g,p),s.visualization.events.addListener(u,g,function(){for(var w=arguments.length,y=new Array(w),m=0;m<w;m++)y[m]=arguments[m];p({chartWrapper:i,controlWrapper:u,props:l.props,google:s,eventArgs:y})})}}return a},this.renderChart=()=>{const{width:i,height:r,options:s,style:o,className:a,rootProps:l,google:c}=this.props,u={height:r||s&&s.height,width:i||s&&s.width,...o};return b.createElement("div",Object.assign({id:this.getGraphID(),style:u,className:a},l),this.state.isReady&&this.state.googleChartWrapper!==null?b.createElement(b.Fragment,null,b.createElement(Hq,{googleChartWrapper:this.state.googleChartWrapper,google:c,googleChartDashboard:this.state.googleChartDashboard}),b.createElement(qq,{googleChartWrapper:this.state.googleChartWrapper,google:c})):null)},this.renderControl=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r=>!0;return n.state.isReady&&n.state.googleChartControls!==null?b.createElement(b.Fragment,null,n.state.googleChartControls.filter(r=>{let{controlProp:s,control:o}=r;return i({control:o,controlProp:s})}).map(r=>{let{control:s,controlProp:o}=r;return b.createElement("div",{key:s.getContainerId(),id:s.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?b.createElement("div",{ref:this.toolbar_ref}):null}}let Bb=class extends b.Component{render(){const{chartLanguage:e,chartPackages:n,chartVersion:i,mapsApiKey:r,loader:s,errorElement:o}=this.props;return b.createElement(zq,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?b.createElement(Kq,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&o?o:s,b.createElement(Lq,{chartLanguage:e,chartPackages:n,chartVersion:i,mapsApiKey:r,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(e){const{controls:n,toolbarItems:i,getChartEditor:r}=this.props;return e&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!n||e.visualization.ChartWrapper)&&(!r||e.visualization.ChartEditor)&&(!i||e.visualization.drawToolbar)}constructor(...e){super(...e),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=n=>{if(this.props.onLoad&&this.props.onLoad(n),this.isFullyLoaded(n))this.onSuccess(n);else{const i=setInterval(()=>{const r=window.google;this._isMounted?r&&this.isFullyLoaded(r)&&(clearInterval(i),this.onSuccess(r)):clearInterval(i)},1e3)}},this.onSuccess=n=>{this.setState({loadingStatus:"ready",google:n})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}};Bb.defaultProps=GN;var B1;(function(t){t.annotation="annotation",t.annotationText="annotationText",t.certainty="certainty",t.emphasis="emphasis",t.interval="interval",t.scope="scope",t.style="style",t.tooltip="tooltip",t.domain="domain"})(B1||(B1={}));const YN=t=>{const e=t.ingredient;return X("div",{className:"Ingredient",children:[X("p",{children:[e.name,":"]}),X("p",{children:[e.amount," ",e.servingUnit||""]}),X("p",{className:"calories",children:[e.calories," kcal."]})]})},Gq=t=>{const[e,n]=b.useState([]),[i,r]=b.useState({}),s=t.block,o=s.ingredients,a=o.map((l,c)=>N(YN,{ingredient:l},c));if(e.length===0){const l=[["Ingredient","Calories"]];o.forEach(c=>{l.push([c.name,c.calories])}),n(l)}return Object.keys(i).length===0&&r({width:"100%",height:"30vh",title:"Calories Breakdown",pieHole:.4,is3D:!1,backgroundColor:"transparent"}),X("div",{className:"block",style:s.customStyle,children:[N("div",{className:"block-title1",children:N("h1",{children:s.name})}),X("div",{className:"block-content",children:[N("div",{className:"strings",style:s.stringsStyle,children:a}),N(Bb,{style:{height:"22vh",marginLeft:"8px"},chartType:"PieChart",data:e,options:i})]})]})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Ph(t){return t+.5|0}const Gr=(t,e,n)=>Math.max(Math.min(t,n),e);function Sc(t){return Gr(Ph(t*2.55),0,255)}function ls(t){return Gr(Ph(t*255),0,255)}function rr(t){return Gr(Ph(t/2.55)/100,0,1)}function z1(t){return Gr(Ph(t*100),0,100)}const Qn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vw=[..."0123456789ABCDEF"],Qq=t=>vw[t&15],Yq=t=>vw[(t&240)>>4]+vw[t&15],dd=t=>(t&240)>>4===(t&15),Xq=t=>dd(t.r)&&dd(t.g)&&dd(t.b)&&dd(t.a);function Jq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Qn[t[1]]*17,g:255&Qn[t[2]]*17,b:255&Qn[t[3]]*17,a:e===5?Qn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Qn[t[1]]<<4|Qn[t[2]],g:Qn[t[3]]<<4|Qn[t[4]],b:Qn[t[5]]<<4|Qn[t[6]],a:e===9?Qn[t[7]]<<4|Qn[t[8]]:255})),n}const Zq=(t,e)=>t<255?e(t):"";function eK(t){var e=Xq(t)?Qq:Yq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Zq(t.a,e):void 0}const tK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XN(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function nK(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function iK(t,e,n){const i=XN(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function rK(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function zb(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=rK(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function jb(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ls)}function Wb(t,e,n){return jb(XN,t,e,n)}function sK(t,e,n){return jb(iK,t,e,n)}function oK(t,e,n){return jb(nK,t,e,n)}function JN(t){return(t%360+360)%360}function aK(t){const e=tK.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Sc(+e[5]):ls(+e[5]));const r=JN(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=sK(r,s,o):e[1]==="hsv"?i=oK(r,s,o):i=Wb(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function lK(t,e){var n=zb(t);n[0]=JN(n[0]+e),n=Wb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function cK(t){if(!t)return;const e=zb(t),n=e[0],i=z1(e[1]),r=z1(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${rr(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const j1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},W1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function uK(){const t={},e=Object.keys(W1),n=Object.keys(j1);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,j1[s]);s=parseInt(W1[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let fd;function hK(t){fd||(fd=uK(),fd.transparent=[0,0,0,0]);const e=fd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const dK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function fK(t){const e=dK.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Sc(o):Gr(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Sc(i):Gr(i,0,255)),r=255&(e[4]?Sc(r):Gr(r,0,255)),s=255&(e[6]?Sc(s):Gr(s,0,255)),{r:i,g:r,b:s,a:n}}}function pK(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${rr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ay=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,aa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function gK(t,e,n){const i=aa(rr(t.r)),r=aa(rr(t.g)),s=aa(rr(t.b));return{r:ls(ay(i+n*(aa(rr(e.r))-i))),g:ls(ay(r+n*(aa(rr(e.g))-r))),b:ls(ay(s+n*(aa(rr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function pd(t,e,n){if(t){let i=zb(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Wb(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function ZN(t,e){return t&&Object.assign(e||{},t)}function H1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ls(t[3]))):(e=ZN(t,{r:0,g:0,b:0,a:1}),e.a=ls(e.a)),e}function mK(t){return t.charAt(0)==="r"?fK(t):aK(t)}class Gu{constructor(e){if(e instanceof Gu)return e;const n=typeof e;let i;n==="object"?i=H1(e):n==="string"&&(i=Jq(e)||hK(e)||mK(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ZN(this._rgb);return e&&(e.a=rr(e.a)),e}set rgb(e){this._rgb=H1(e)}rgbString(){return this._valid?pK(this._rgb):void 0}hexString(){return this._valid?eK(this._rgb):void 0}hslString(){return this._valid?cK(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=gK(this._rgb,e._rgb,n)),this}clone(){return new Gu(this.rgb)}alpha(e){return this._rgb.a=ls(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ph(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pd(this._rgb,2,e),this}darken(e){return pd(this._rgb,2,-e),this}saturate(e){return pd(this._rgb,1,e),this}desaturate(e){return pd(this._rgb,1,-e),this}rotate(e){return lK(this._rgb,e),this}}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Xi(){}const yK=(()=>{let t=0;return()=>t++})();function Ge(t){return t===null||typeof t>"u"}function nt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function be(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function At(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Fn(t,e){return At(t)?t:e}function Ee(t,e){return typeof t>"u"?e:t}const vK=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,eO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Te(t,e,n,i){let r,s,o;if(nt(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(be(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function cp(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function up(t){if(nt(t))return t.map(up);if(be(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=up(t[n[r]]);return e}return t}function tO(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function wK(t,e,n,i){if(!tO(t))return;const r=e[t],s=n[t];be(r)&&be(s)?Qu(r,s,i):e[t]=up(s)}function Qu(t,e,n){const i=nt(e)?e:[e],r=i.length;if(!be(t))return t;n=n||{};const s=n.merger||wK;let o;for(let a=0;a<r;++a){if(o=i[a],!be(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Yc(t,e){return Qu(t,e,{merger:_K})}function _K(t,e,n){if(!tO(t))return;const i=e[t],r=n[t];be(i)&&be(r)?Yc(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=up(r))}const q1={"":t=>t,x:t=>t.x,y:t=>t.y};function bK(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function IK(t){const e=bK(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Yu(t,e){return(q1[e]||(q1[e]=IK(e)))(t)}function Hb(t){return t.charAt(0).toUpperCase()+t.slice(1)}const hp=t=>typeof t<"u",Ss=t=>typeof t=="function",K1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function EK(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Et=Math.PI,it=2*Et,dp=Number.POSITIVE_INFINITY,SK=Et/180,rt=Et/2,Vs=Et/4,G1=Et*2/3,Qr=Math.log10,fp=Math.sign;function Yd(t,e,n){return Math.abs(t-e)<n}function Q1(t){const e=Math.round(t);t=Yd(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Qr(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function TK(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function pp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function kK(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function nO(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ui(t){return t*(Et/180)}function qb(t){return t*(180/Et)}function Y1(t){if(!At(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function iO(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Et&&(s+=it),{angle:s,distance:r}}function xK(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xi(t){return(t%it+it)%it}function gp(t,e,n,i){const r=xi(t),s=xi(e),o=xi(n),a=xi(s-r),l=xi(o-r),c=xi(r-s),u=xi(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ii(t,e,n){return Math.max(e,Math.min(n,t))}function CK(t){return ii(t,-32768,32767)}function Tc(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Kb(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const ww=(t,e,n,i)=>Kb(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),AK=(t,e,n)=>Kb(t,n,i=>t[i][e]>=n);function DK(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const rO=["push","pop","shift","splice","unshift"];function RK(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rO.forEach(n=>{const i="_onData"+Hb(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function X1(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(rO.forEach(s=>{delete t[s]}),delete t._chartjs)}function PK(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const sO=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function oO(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,sO.call(window,()=>{i=!1,t.apply(e,n)}))}}function NK(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const aO=t=>t==="start"?"left":t==="end"?"right":"center",Ln=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,OK=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,gd=t=>t===0||t===1,J1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*it/n)),Z1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*it/n)+1,Xc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*rt)+1,easeOutSine:t=>Math.sin(t*rt),easeInOutSine:t=>-.5*(Math.cos(Et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>gd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>gd(t)?t:J1(t,.075,.3),easeOutElastic:t=>gd(t)?t:Z1(t,.075,.3),easeInOutElastic(t){return gd(t)?t:t<.5?.5*J1(t*2,.1125,.45):.5+.5*Z1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Xc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Xc.easeInBounce(t*2)*.5:Xc.easeOutBounce(t*2-1)*.5+.5};function lO(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function eT(t){return lO(t)?t:new Gu(t)}function ly(t){return lO(t)?t:new Gu(t).saturate(.5).darken(.1).hexString()}const MK=["x","y","borderWidth","radius","tension"],LK=["color","borderColor","backgroundColor"];function FK(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:LK},numbers:{type:"number",properties:MK}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function $K(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tT=new Map;function UK(t,e){e=e||{};const n=t+JSON.stringify(e);let i=tT.get(n);return i||(i=new Intl.NumberFormat(t,e),tT.set(n,i)),i}function zg(t,e,n){return UK(e,n).format(t)}const cO={values(t){return nt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=VK(t,n)}const o=Qr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zg(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Qr(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?cO.numeric.call(this,t,e,n):""}};function VK(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var jg={formatters:cO};function BK(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zo=Object.create(null),_w=Object.create(null);function Jc(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function cy(t,e,n){return typeof e=="string"?Qu(Jc(t,e),n):Qu(Jc(t,""),e)}class zK{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>ly(r.backgroundColor),this.hoverBorderColor=(i,r)=>ly(r.borderColor),this.hoverColor=(i,r)=>ly(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return cy(this,e,n)}get(e){return Jc(this,e)}describe(e,n){return cy(_w,e,n)}override(e,n){return cy(zo,e,n)}route(e,n,i,r){const s=Jc(this,e),o=Jc(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return be(l)?Object.assign({},c,l):Ee(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var st=new zK({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[FK,$K,BK]);function jK(t){return!t||Ge(t.size)||Ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function mp(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function WK(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!nt(h))o=mp(t,r,s,o,h);else if(nt(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!nt(d)&&(o=mp(t,r,s,o,d));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Bs(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function nT(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function iT(t,e,n,i){uO(t,e,n,i,null)}function uO(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let w=(p||0)*SK;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,it):t.arc(n,i,g,0,it),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(w)*u,i-Math.cos(w)*g),w+=G1,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*g),w+=G1,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(w+Vs)*l,h=Math.cos(w+Vs)*(r?r/2-c:l),a=Math.sin(w+Vs)*l,d=Math.sin(w+Vs)*(r?r/2-c:l),t.arc(n-h,i-a,c,w-Et,w-rt),t.arc(n+d,i-o,c,w-rt,w),t.arc(n+h,i+a,c,w,w+rt),t.arc(n-d,i+o,c,w+rt,w+Et),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}w+=Vs;case"rectRot":h=Math.cos(w)*(r?r/2:g),o=Math.cos(w)*g,a=Math.sin(w)*g,d=Math.sin(w)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":w+=Vs;case"cross":h=Math.cos(w)*(r?r/2:g),o=Math.cos(w)*g,a=Math.sin(w)*g,d=Math.sin(w)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(w)*(r?r/2:g),o=Math.cos(w)*g,a=Math.sin(w)*g,d=Math.sin(w)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),w+=Vs,h=Math.cos(w)*(r?r/2:g),o=Math.cos(w)*g,a=Math.sin(w)*g,d=Math.sin(w)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(w)*g,a=Math.sin(w)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(r?r/2:g),i+Math.sin(w)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ca(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Gb(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qb(t){t.restore()}function HK(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function qK(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function KK(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ml(t,e,n,i,r,s={}){const o=nt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,HK(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&KK(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ge(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),qK(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function yp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-rt,Et,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Et,rt,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,rt,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-rt,!0),t.lineTo(n+o.topLeft,i)}const GK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,QK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YK(t,e){const n=(""+t).match(GK);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const XK=t=>+t||0;function Yb(t,e){const n={},i=be(e),r=i?Object.keys(e):e,s=be(t)?i?o=>Ee(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=XK(s(o));return n}function JK(t){return Yb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ha(t){return Yb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function pn(t){const e=JK(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bt(t,e){t=t||{},e=e||st.font;let n=Ee(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ee(t.style,e.style);i&&!(""+i).match(QK)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ee(t.family,e.family),lineHeight:YK(Ee(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ee(t.weight,e.weight),string:""};return r.string=jK(r),r}function md(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&nt(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function ZK(t,e,n){const{min:i,max:r}=t,s=eO(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Zo(t,e){return Object.assign(Object.create(t),e)}function Xb(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=pO("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Xb([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return dO(a,l,()=>a8(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return sT(a).includes(l)},ownKeys(a){return sT(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function yl(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:hO(t,i),setContext:s=>yl(t,s,n,i),override:s=>yl(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return dO(s,o,()=>t8(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function hO(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Ss(n)?n:()=>n,isIndexable:Ss(i)?i:()=>i}}const e8=(t,e)=>t?t+Hb(e):e,Jb=(t,e)=>be(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function dO(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function t8(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Ss(a)&&o.isScriptable(e)&&(a=n8(e,a,t,n)),nt(a)&&a.length&&(a=i8(e,a,t,o.isIndexable)),Jb(e,a)&&(a=yl(a,r,s&&s[e],o)),a}function n8(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Jb(t,l)&&(l=Zb(r._scopes,r,t,l)),l}function i8(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(be(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Zb(c,r,t,u);e.push(yl(h,s,o&&o[t],a))}}return e}function fO(t,e,n){return Ss(t)?t(e,n):t}const r8=(t,e)=>t===!0?e:typeof t=="string"?Yu(e,t):void 0;function s8(t,e,n,i,r){for(const s of e){const o=r8(n,s);if(o){t.add(o);const a=fO(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Zb(t,e,n,i){const r=e._rootScopes,s=fO(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=rT(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=rT(a,o,s,l,i),l===null)?!1:Xb(Array.from(a),[""],r,s,()=>o8(e,n,i))}function rT(t,e,n,i,r){for(;n;)n=s8(t,e,n,i,r);return n}function o8(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return nt(r)&&be(n)?n:r||{}}function a8(t,e,n,i){let r;for(const s of e)if(r=pO(e8(s,t),n),typeof r<"u")return Jb(t,r)?Zb(n,i,t,r):r}function pO(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function sT(t){let e=t._keys;return e||(e=t._keys=l8(t._scopes)),e}function l8(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function gO(){return typeof window<"u"&&typeof document<"u"}function eI(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vp(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Wg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function c8(t,e){return Wg(t).getPropertyValue(e)}const u8=["top","right","bottom","left"];function wo(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=u8[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const h8=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function d8(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(h8(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Gs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Wg(n),s=r.boxSizing==="border-box",o=wo(r,"padding"),a=wo(r,"border","width"),{x:l,y:c,box:u}=d8(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function f8(t,e,n){let i,r;if(e===void 0||n===void 0){const s=eI(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Wg(s),l=wo(a,"border","width"),c=wo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=vp(a.maxWidth,s,"clientWidth"),r=vp(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||dp,maxHeight:r||dp}}const yd=t=>Math.round(t*10)/10;function p8(t,e,n,i){const r=Wg(t),s=wo(r,"margin"),o=vp(r.maxWidth,t,"clientWidth")||dp,a=vp(r.maxHeight,t,"clientHeight")||dp,l=f8(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=wo(r,"border","width"),f=wo(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=yd(Math.min(c,o,l.maxWidth)),u=yd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=yd(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=yd(Math.floor(u*i))),{width:c,height:u}}function oT(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const g8=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function aT(t,e){const n=c8(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const m8=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},y8=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function qa(t,e,n){return t?m8(e,n):y8()}function mO(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function yO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class v8{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=sO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ji=new v8;const lT="transparent",w8={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=eT(t||lT),r=i.valid&&eT(e||lT);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class _8{constructor(e,n,i,r){const s=n[i];r=md([e.to,r,s,e.from]);const o=md([e.from,s,r]);this._active=!0,this._fn=e.fn||w8[e.type||typeof o],this._easing=Xc[e.easing]||Xc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=md([e.to,n,r,e.from]),this._from=md([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class vO{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!be(e))return;const n=Object.keys(st.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!be(s))return;const o={};for(const a of n)o[a]=s[a];(nt(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=I8(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&b8(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new _8(d,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ji.add(this._chart,i),!0}}function b8(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function I8(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function cT(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function E8(t,e,n){if(n===!1)return!1;const i=cT(t,n),r=cT(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function S8(t){let e,n,i,r;return be(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function wO(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function uT(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=t.values[l],At(c)&&(s||e===0||fp(e)===fp(c))&&(e+=c)}return e}}function T8(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}function hT(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function k8(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function x8(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function C8(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function dT(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function fT(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=k8(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:g,[c]:w}=p,y=p._stacks||(p._stacks={});d=y[c]=C8(r,u,g),d[a]=w,d._top=dT(d,o,!0,i.type),d._bottom=dT(d,o,!1,i.type);const m=d._visualValues||(d._visualValues={});m[a]=w}}function uy(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function A8(t,e){return Zo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function D8(t,e,n){return Zo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function oc(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const hy=t=>t==="reset"||t==="none",pT=(t,e)=>e?t:Object.assign({},t),R8=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:wO(n,!0),values:null};class Zc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hT(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,s=n.xAxisID=Ee(i.xAxisID,uy(e,"x")),o=n.yAxisID=Ee(i.yAxisID,uy(e,"y")),a=n.rAxisID=Ee(i.rAxisID,uy(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&X1(this._data,this),e._stacked&&oc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(be(n))this._data=T8(n);else if(i!==n){if(i){X1(i,this);const r=this._cachedMeta;oc(r),r._parsed=[]}n&&Object.isExtensible(n)&&RK(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=hT(n.vScale,n),n.stack!==i.stack&&(r=!0,oc(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&fT(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{nt(r[e])?d=this.parseArrayData(i,r,e,n):be(r[e])?d=this.parseObjectData(i,r,e,n):d=this.parsePrimitiveData(i,r,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&fT(this,d)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,p;for(d=0,f=r;d<f;++d)p=d+i,h[d]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=n[d],c[u]={x:s.parse(Yu(f,a),d),y:o.parse(Yu(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:wO(r,!0),values:n._stacks[e.axis]._visualValues};return uT(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=uT(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=R8(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=x8(a);let d,f;function p(){f=r[d];const g=f[a.axis];return!At(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],At(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=S8(Ee(this.options.clip,E8(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=D8(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=A8(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&hp(i);if(a)return pT(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(st.elements[e]),p=()=>this.getContext(i,r,n),g=c.resolveNamedOptions(d,f,p,h);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(pT(g,l))),g}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new vO(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||hy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){hy(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!hy(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&oc(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(Zc,"defaults",{}),Y(Zc,"datasetElementType",null),Y(Zc,"dataElementType",null);function P8(t,e,n){let i=1,r=1,s=0,o=0;if(e<it){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,_,I)=>gp(v,a,l,!0)?1:Math.max(_,_*n,I,I*n),p=(v,_,I)=>gp(v,a,l,!0)?-1:Math.min(_,_*n,I,I*n),g=f(0,c,h),w=f(rt,u,d),y=p(Et,c,h),m=p(Et+rt,u,d);i=(g-y)/2,r=(w-m)/2,s=-(g+y)/2,o=-(w+m)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class kc extends Zc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(be(i[e])){const{key:l="value"}=this._parsing;s=c=>+Yu(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Ui(this.options.rotation-90)}_getCircumference(){return Ui(this.options.circumference)}_getRotationExtents(){let e=it,n=-it;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(vK(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=P8(h,u,l),w=(i.width-o)/d,y=(i.height-o)/f,m=Math.max(Math.min(w,y)/2,0),v=eO(this.options.radius,m),_=Math.max(v*l,0),I=(v-_)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,r.total=this.calculateTotal(),this.outerRadius=v-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/it)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:w}=this._getSharedOptions(n,r);let y=this._getRotation(),m;for(m=0;m<n;++m)y+=this._circumference(m,s);for(m=n;m<n+i;++m){const v=this._circumference(m,s),_=e[m],I={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:p,innerRadius:f};w&&(I.options=g||this.resolveDataElementOptions(m,_.active?"active":r)),y+=v,this.updateElement(_,m,I,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?it*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=zg(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Ee(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(kc,"id","doughnut"),Y(kc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(kc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(kc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class bw extends kc{}Y(bw,"id","pie"),Y(bw,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function zs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tI{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(tI.prototype,e)}init(){}formats(){return zs()}parse(){return zs()}format(){return zs()}add(){return zs()}diff(){return zs()}startOf(){return zs()}endOf(){return zs()}}var N8={_date:tI};function O8(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?AK:ww;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,n-u),d=l(s,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Nh(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=O8(s[a],e,o,r);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function M8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function dy(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Nh(t,n,e,function(a,l,c){!r&&!Ca(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function L8(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=iO(o,{x:e.x,y:e.y});gp(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Nh(t,n,e,s),r}function F8(t,e,n,i,r,s){let o=[];const a=M8(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const p=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(p))&&!f)return;const w=a(e,p);w<l?(o=[{element:u,datasetIndex:h,index:d}],l=w):w===l&&o.push({element:u,datasetIndex:h,index:d})}return Nh(t,n,e,c),o}function fy(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?L8(t,e,n,r):F8(t,e,n,i,r,s)}function gT(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Nh(t,n,e,(l,c,u)=>{l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var $8={evaluateInteractionItems:Nh,modes:{index(t,e,n,i){const r=Gs(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?dy(t,r,s,i,o):fy(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=Gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?dy(t,r,s,i,o):fy(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=Gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return dy(t,r,s,i,o)},nearest(t,e,n,i){const r=Gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return fy(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Gs(e,t);return gT(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Gs(e,t);return gT(t,r,"y",n.intersect,i)}}};const _O=["left","top","right","bottom"];function ac(t,e){return t.filter(n=>n.pos===e)}function mT(t,e){return t.filter(n=>_O.indexOf(n.pos)===-1&&n.box.axis===e)}function lc(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function U8(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function V8(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!_O.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function B8(t,e){const n=V8(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function z8(t){const e=U8(t),n=lc(e.filter(c=>c.box.fullSize),!0),i=lc(ac(e,"left"),!0),r=lc(ac(e,"right")),s=lc(ac(e,"top"),!0),o=lc(ac(e,"bottom")),a=mT(e,"x"),l=mT(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ac(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function yT(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function bO(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function j8(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!be(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&bO(o,s.getPadding());const a=Math.max(0,e.outerWidth-yT(o,t,"left","right")),l=Math.max(0,e.outerHeight-yT(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function W8(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function H8(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function xc(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,H8(a.horizontal,e));const{same:h,other:d}=j8(e,n,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&xc(r,e,n,i)||u}function vd(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function vT(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;hp(c.start)&&(o=c.start),l.fullSize?vd(l,r.left,o,n.outerWidth-r.right-r.left,d):vd(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;hp(c.start)&&(s=c.start),l.fullSize?vd(l,s,r.top,d,n.outerHeight-r.bottom-r.top):vd(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Yr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=pn(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=z8(t.boxes),l=a.vertical,c=a.horizontal;Te(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,w)=>w.box.options&&w.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);bO(d,pn(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=B8(l.concat(c),h);xc(a.fullSize,f,h,p),xc(l,f,h,p),xc(c,f,h,p)&&xc(l,f,h,p),W8(f),vT(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,vT(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Te(a.chartArea,g=>{const w=g.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class IO{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class q8 extends IO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Xd="$chartjs",K8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wT=t=>t===null||t==="";function G8(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Xd]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",wT(r)){const s=aT(t,"width");s!==void 0&&(t.width=s)}if(wT(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=aT(t,"height");s!==void 0&&(t.height=s)}return t}const EO=g8?{passive:!0}:!1;function Q8(t,e,n){t.addEventListener(e,n,EO)}function Y8(t,e,n){t.canvas.removeEventListener(e,n,EO)}function X8(t,e){const n=K8[t.type]||t.type,{x:i,y:r}=Gs(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function wp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function J8(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||wp(a.addedNodes,i),o=o&&!wp(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Z8(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||wp(a.removedNodes,i),o=o&&!wp(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Xu=new Map;let _T=0;function SO(){const t=window.devicePixelRatio;t!==_T&&(_T=t,Xu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function eG(t,e){Xu.size||window.addEventListener("resize",SO),Xu.set(t,e)}function tG(t){Xu.delete(t),Xu.size||window.removeEventListener("resize",SO)}function nG(t,e,n){const i=t.canvas,r=i&&eI(i);if(!r)return;const s=oO((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),eG(t,s),o}function py(t,e,n){n&&n.disconnect(),e==="resize"&&tG(t)}function iG(t,e,n){const i=t.canvas,r=oO(s=>{t.ctx!==null&&n(X8(s,t))},t);return Q8(i,e,r),r}class rG extends IO{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(G8(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Xd])return!1;const i=n[Xd].initial;["height","width"].forEach(s=>{const o=i[s];Ge(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Xd],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:J8,detach:Z8,resize:nG}[n]||iG;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:py,detach:py,resize:py}[n]||Y8)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return p8(e,n,i,r)}isAttached(e){const n=eI(e);return!!(n&&n.isConnected)}}function sG(t){return!gO()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?q8:rG}class jo{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return pp(this.x)&&pp(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Y(jo,"defaults",{}),Y(jo,"defaultRoutes");function oG(t,e){const n=t.options.ticks,i=aG(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?cG(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return uG(e,c,s,o/r),c;const u=lG(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(wd(e,c,u,Ge(f)?0:a-f,a),h=0,d=o-1;h<d;h++)wd(e,c,u,s[h],s[h+1]);return wd(e,c,u,l,Ge(f)?e.length:l+f),c}return wd(e,c,u),c}function aG(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function lG(t,e,n){const i=hG(t),r=e.length/n;if(!i)return Math.max(r,1);const s=TK(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function cG(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function uG(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function wd(t,e,n,i,r){const s=Ee(i,0),o=Math.min(Ee(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function hG(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const dG=t=>t==="left"?"right":t==="right"?"left":t,bT=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,IT=(t,e)=>Math.min(e||t,t);function ET(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function fG(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function pG(t,e){Te(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function cc(t){return t.drawTicks?t.tickLength:0}function ST(t,e){if(!t.display)return 0;const n=Bt(t.font,e),i=pn(t.padding);return(nt(t.text)?t.text.length:1)*n.lineHeight+i.height}function gG(t,e){return Zo(t,{scale:e,type:"scale"})}function mG(t,e,n){return Zo(t,{tick:n,index:e,type:"tick"})}function yG(t,e,n){let i=aO(t);return(n&&e!=="right"||!n&&e==="right")&&(i=dG(i)),i}function vG(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const g=o-r,w=a-s;if(t.isHorizontal()){if(f=Ln(i,s,a),be(n)){const y=Object.keys(n)[0],m=n[y];p=u[y].getPixelForValue(m)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=bT(t,n,e);d=a-s}else{if(be(n)){const y=Object.keys(n)[0],m=n[y];f=u[y].getPixelForValue(m)-w+e}else n==="center"?f=(c.left+c.right)/2-w+e:f=bT(t,n,e);p=Ln(i,o,r),h=n==="left"?-rt:rt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class Vl extends jo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Fn(e,Number.POSITIVE_INFINITY),n=Fn(n,Number.NEGATIVE_INFINITY),i=Fn(i,Number.POSITIVE_INFINITY),r=Fn(r,Number.NEGATIVE_INFINITY),{min:Fn(e,i),max:Fn(n,r),minDefined:At(e),maxDefined:At(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Fn(n,Fn(i,n)),max:Fn(i,Fn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ZK(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ET(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=oG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ae(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=IT(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=ii(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-cc(e.grid)-n.padding-ST(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=qb(Math.min(Math.asin(ii((u.highest.height+6)/a,-1,1)),Math.asin(ii(l/c,-1,1))-Math.asin(ii(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ST(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=cc(s)+l):(e.height=this.maxHeight,e.width=cc(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Ui(this.labelRotation),g=Math.cos(p),w=Math.sin(p);if(a){const y=i.mirror?0:w*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=i.mirror?0:g*h.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,w,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*n.height):(d=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ge(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=ET(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/IT(n,i));let c=0,u=0,h,d,f,p,g,w,y,m,v,_,I;for(h=0;h<n;h+=l){if(p=e[h].label,g=this._resolveTickFontOptions(h),r.font=w=g.string,y=s[w]=s[w]||{data:{},gc:[]},m=g.lineHeight,v=_=0,!Ge(p)&&!nt(p))v=mp(r,y.data,y.gc,v,p),_=m;else if(nt(p))for(d=0,f=p.length;d<f;++d)I=p[d],!Ge(I)&&!nt(I)&&(v=mp(r,y.data,y.gc,v,I),_+=m);o.push(v),a.push(_),c=Math.max(v,c),u=Math.max(_,u)}pG(s,n);const E=o.indexOf(c),T=a.indexOf(u),x=$=>({width:o[$]||0,height:a[$]||0});return{first:x(0),last:x(n-1),widest:x(E),highest:x(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return CK(this._alignToPixels?Bs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=mG(this.getContext(),e,i))}return this.$context||(this.$context=gG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ui(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=cc(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,w=g/2,y=function(fe){return Bs(i,fe,g)};let m,v,_,I,E,T,x,$,M,G,J,_e;if(o==="top")m=y(this.bottom),T=this.bottom-d,$=m-w,G=y(e.top)+w,_e=e.bottom;else if(o==="bottom")m=y(this.top),G=e.top,_e=y(e.bottom)-w,T=m+w,$=this.top+d;else if(o==="left")m=y(this.right),E=this.right-d,x=m-w,M=y(e.left)+w,J=e.right;else if(o==="right")m=y(this.left),M=e.left,J=y(e.right)-w,E=m+w,x=this.left+d;else if(n==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(be(o)){const fe=Object.keys(o)[0],ie=o[fe];m=y(this.chart.scales[fe].getPixelForValue(ie))}G=e.top,_e=e.bottom,T=m+w,$=T+d}else if(n==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(be(o)){const fe=Object.keys(o)[0],ie=o[fe];m=y(this.chart.scales[fe].getPixelForValue(ie))}E=m-w,x=E-d,M=e.left,J=e.right}const Je=Ee(r.ticks.maxTicksLimit,h),se=Math.max(1,Math.ceil(h/Je));for(v=0;v<h;v+=se){const fe=this.getContext(v),ie=s.setContext(fe),O=a.setContext(fe),V=ie.lineWidth,K=ie.color,ue=O.dash||[],Ie=O.dashOffset,lt=ie.tickWidth,Ve=ie.tickColor,Pe=ie.tickBorderDash||[],R=ie.tickBorderDashOffset;_=fG(this,v,l),_!==void 0&&(I=Bs(i,_,V),c?E=x=M=J=I:T=$=G=_e=I,f.push({tx1:E,ty1:T,tx2:x,ty2:$,x1:M,y1:G,x2:J,y2:_e,width:V,color:K,borderDash:ue,borderDashOffset:Ie,tickWidth:lt,tickColor:Ve,tickBorderDash:Pe,tickBorderDashOffset:R}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=cc(i.grid),f=d+u,p=h?-u:f,g=-Ui(this.labelRotation),w=[];let y,m,v,_,I,E,T,x,$,M,G,J,_e="middle";if(r==="top")E=this.bottom-p,T=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+p,T=this._getXAxisLabelAlignment();else if(r==="left"){const se=this._getYAxisLabelAlignment(d);T=se.textAlign,I=se.x}else if(r==="right"){const se=this._getYAxisLabelAlignment(d);T=se.textAlign,I=se.x}else if(n==="x"){if(r==="center")E=(e.top+e.bottom)/2+f;else if(be(r)){const se=Object.keys(r)[0],fe=r[se];E=this.chart.scales[se].getPixelForValue(fe)+f}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")I=(e.left+e.right)/2-f;else if(be(r)){const se=Object.keys(r)[0],fe=r[se];I=this.chart.scales[se].getPixelForValue(fe)}T=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?_e="top":l==="end"&&(_e="bottom"));const Je=this._getLabelSizes();for(y=0,m=a.length;y<m;++y){v=a[y],_=v.label;const se=s.setContext(this.getContext(y));x=this.getPixelForTick(y)+s.labelOffset,$=this._resolveTickFontOptions(y),M=$.lineHeight,G=nt(_)?_.length:1;const fe=G/2,ie=se.color,O=se.textStrokeColor,V=se.textStrokeWidth;let K=T;o?(I=x,T==="inner"&&(y===m-1?K=this.options.reverse?"left":"right":y===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?c==="near"||g!==0?J=-G*M+M/2:c==="center"?J=-Je.highest.height/2-fe*M+M:J=-Je.highest.height+M/2:c==="near"||g!==0?J=M/2:c==="center"?J=Je.highest.height/2-fe*M:J=Je.highest.height-G*M,h&&(J*=-1),g!==0&&!se.showLabelBackdrop&&(I+=M/2*Math.sin(g))):(E=x,J=(1-G)*M/2);let ue;if(se.showLabelBackdrop){const Ie=pn(se.backdropPadding),lt=Je.heights[y],Ve=Je.widths[y];let Pe=J-Ie.top,R=0-Ie.left;switch(_e){case"middle":Pe-=lt/2;break;case"bottom":Pe-=lt;break}switch(T){case"center":R-=Ve/2;break;case"right":R-=Ve;break}ue={left:R,top:Pe,width:Ve+Ie.width,height:lt+Ie.height,color:se.backdropColor}}w.push({label:_,font:$,textOffset:J,options:{rotation:g,color:ie,strokeColor:O,strokeWidth:V,textAlign:K,textBaseline:_e,translation:[I,E],backdrop:ue}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ui(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Bs(e,this.left,o)-o/2,u=Bs(e,this.right,a)+a/2,h=d=l):(h=Bs(e,this.top,o)-o/2,d=Bs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Gb(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ml(i,c,0,u,l,a)}r&&Qb(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Bt(i.font),o=pn(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||be(n)?(l+=o.bottom,nt(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=vG(this,l,n,a);ml(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:yG(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ee(e.grid&&e.grid.z,-1),r=Ee(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vl.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _d{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;bG(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,wG(e,o,i),this.override&&st.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in st[r]&&(delete st[r][i],this.override&&delete zo[i])}}function wG(t,e,n){const i=Qu(Object.create(null),[n?st.get(n):{},st.get(e),t.defaults]);st.set(e,i),t.defaultRoutes&&_G(e,t.defaultRoutes),t.descriptors&&st.describe(e,t.descriptors)}function _G(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");st.route(s,r,l,a)})}function bG(t){return"id"in t&&"defaults"in t}class IG{constructor(){this.controllers=new _d(Zc,"datasets",!0),this.elements=new _d(jo,"elements"),this.plugins=new _d(Object,"plugins"),this.scales=new _d(Vl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Te(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Hb(e);Ae(i["before"+r],[],i),n[e](i),Ae(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var ki=new IG;class EG{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ae(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Ee(i.options&&i.options.plugins,{}),s=SG(i);return r===!1&&!n?[]:kG(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function SG(t){const e={},n=[],i=Object.keys(ki.plugins.items);for(let s=0;s<i.length;s++)n.push(ki.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function TG(t,e){return!e&&t===!1?null:t===!0?{}:t}function kG(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=TG(i[l],r);c!==null&&s.push({plugin:a,options:xG(t.config,{plugin:a,local:n[l]},c,o)})}return s}function xG(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Iw(t,e){const n=st.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function CG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function AG(t,e){return t===e?"_index_":"_value_"}function TT(t){if(t==="x"||t==="y"||t==="r")return t}function DG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ew(t,...e){if(TT(t))return t;for(const n of e){const i=n.axis||DG(n.position)||t.length>1&&TT(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kT(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function RG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return kT(t,"x",n[0])||kT(t,"y",n[0])}return{}}function PG(t,e){const n=zo[t.type]||{scales:{}},i=e.scales||{},r=Iw(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!be(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ew(o,a,RG(o,t),st.scales[a.type]),c=AG(l,r),u=n.scales||{};s[o]=Yc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Iw(a,e),u=(zo[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=CG(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Yc(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Yc(a,[st.scales[a.type],st.scale])}),s}function TO(t){const e=t.options||(t.options={});e.plugins=Ee(e.plugins,{}),e.scales=PG(t,e)}function kO(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function NG(t){return t=t||{},t.data=kO(t.data),TO(t),t}const xT=new Map,xO=new Set;function bd(t,e){let n=xT.get(t);return n||(n=e(),xT.set(t,n),xO.add(n)),n}const uc=(t,e,n)=>{const i=Yu(e,n);i!==void 0&&t.add(i)};class OG{constructor(e){this._config=NG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),TO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return bd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return bd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return bd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return bd(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>uc(l,e,h))),u.forEach(h=>uc(l,r,h)),u.forEach(h=>uc(l,zo[s]||{},h)),u.forEach(h=>uc(l,st,h)),u.forEach(h=>uc(l,_w,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),xO.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,zo[n]||{},st.datasets[n]||{},{type:n},st,_w]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=CT(this._resolverCache,e,r);let l=o;if(LG(o,n)){s.$shared=!1,i=Ss(i)?i():i;const c=this.createResolver(e,i,a);l=yl(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=CT(this._resolverCache,e,i);return be(n)?yl(s,n,void 0,r):s}}function CT(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Xb(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const MG=t=>be(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Ss(t[n]),!1);function LG(t,e){const{isScriptable:n,isIndexable:i}=hO(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Ss(a)||MG(a))||o&&nt(a))return!0}return!1}var FG="4.3.0";const $G=["top","bottom","left","right","chartArea"];function AT(t,e){return t==="top"||t==="bottom"||$G.indexOf(t)===-1&&e==="x"}function DT(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function RT(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ae(n&&n.onComplete,[t],e)}function UG(t){const e=t.chart,n=e.options.animation;Ae(n&&n.onProgress,[t],e)}function CO(t){return gO()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Jd={},PT=t=>{const e=CO(t);return Object.values(Jd).filter(n=>n.canvas===e).pop()};function VG(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function BG(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function zG(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}var Lr;let Oh=(Lr=class{static register(...e){ki.add(...e),NT()}static unregister(...e){ki.remove(...e),NT()}constructor(e,n){const i=this.config=new OG(n),r=CO(e),s=PT(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||sG(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=yK(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=NK(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Jd[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ji.listen(this,"complete",RT),Ji.listen(this,"progress",UG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ge(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ki}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():oT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nT(this.canvas,this.ctx),this}stop(){return Ji.stop(this),this}resize(e,n){Ji.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,oT(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Te(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Ew(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Te(s,o=>{const a=o.options,l=a.id,c=Ew(l,a),u=Ee(a.type,o.dtype);(a.position===void 0||AT(a.position,c)!==AT(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=ki.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Te(r,(o,a)=>{o||delete i[a]}),Te(i,o=>{Yr.configure(this,o,o.options),Yr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(DT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Iw(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=ki.getController(a),{datasetElementType:c,dataElementType:u}=st.datasets[a];Object.assign(l,{dataElementType:ki.getElement(u),datasetElementType:c&&ki.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Te(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Te(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(DT("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Te(this.scales,e=>{Yr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!K1(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;VG(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!K1(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Te(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ss(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ji.has(this)?this.attached&&!Ji.running(this)&&Ji.start(this):(this.draw(),RT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=zG(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Gb(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&Qb(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ca(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=$8.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Zo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);hp(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ji.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Jd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Te(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Te(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Te(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!cp(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=EK(e),c=BG(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ae(s.onHover,[e,a,this],this),l&&Ae(s.onClick,[e,a,this],this));const u=!cp(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},Y(Lr,"defaults",st),Y(Lr,"instances",Jd),Y(Lr,"overrides",zo),Y(Lr,"registry",ki),Y(Lr,"version",FG),Y(Lr,"getChart",PT),Lr);function NT(){return Te(Oh.instances,t=>t._plugins.invalidate())}function jG(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+rt,i-rt),t.closePath(),t.clip()}function WG(t){return Yb(t,["outerStart","outerEnd","innerStart","innerEnd"])}function HG(t,e,n,i){const r=WG(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return ii(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ii(r.innerStart,0,o),innerEnd:ii(r.innerEnd,0,o)}}function la(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function _p(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const se=u>0?u-i:0,fe=h>0?h-i:0,ie=(se+fe)/2,O=ie!==0?p*ie/(ie+i):p;f=(p-O)/2}const g=Math.max(.001,p*h-n/Et)/h,w=(p-g)/2,y=l+w+f,m=r-w-f,{outerStart:v,outerEnd:_,innerStart:I,innerEnd:E}=HG(e,d,h,m-y),T=h-v,x=h-_,$=y+v/T,M=m-_/x,G=d+I,J=d+E,_e=y+I/G,Je=m-E/J;if(t.beginPath(),s){const se=($+M)/2;if(t.arc(o,a,h,$,se),t.arc(o,a,h,se,M),_>0){const V=la(x,M,o,a);t.arc(V.x,V.y,_,M,m+rt)}const fe=la(J,m,o,a);if(t.lineTo(fe.x,fe.y),E>0){const V=la(J,Je,o,a);t.arc(V.x,V.y,E,m+rt,Je+Math.PI)}const ie=(m-E/d+(y+I/d))/2;if(t.arc(o,a,d,m-E/d,ie,!0),t.arc(o,a,d,ie,y+I/d,!0),I>0){const V=la(G,_e,o,a);t.arc(V.x,V.y,I,_e+Math.PI,y-rt)}const O=la(T,y,o,a);if(t.lineTo(O.x,O.y),v>0){const V=la(T,$,o,a);t.arc(V.x,V.y,v,y-rt,$)}}else{t.moveTo(o,a);const se=Math.cos($)*h+o,fe=Math.sin($)*h+a;t.lineTo(se,fe);const ie=Math.cos(M)*h+o,O=Math.sin(M)*h+a;t.lineTo(ie,O)}t.closePath()}function qG(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){_p(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%it||it))}return _p(t,e,n,i,l,r),t.fill(),l}function KG(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){_p(t,e,n,i,p,r);for(let g=0;g<s;++g)t.stroke();isNaN(a)||(p=o+(a%it||it))}f&&jG(t,e,p),s||(_p(t,e,n,i,p,r),t.stroke())}class Aa extends jo{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=iO(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,g=Ee(d,c-l)>=it||gp(o,l,c),w=Tc(a,u+f,h+f);return g&&w}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:r+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>it?Math.floor(r/it):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Et,r||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,qG(n,this,u,o,a),KG(n,this,u,o,a),n.restore()}}Y(Aa,"id","arc"),Y(Aa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Y(Aa,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Aa,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const OT=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},GG=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class MT extends jo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Bt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=OT(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const w=i+n/2+s.measureText(p.text).width;(g===0||c[c.length-1]+w+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:w,height:r},c[c.length-1]+=w+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((w,y)=>{const{itemWidth:m,itemHeight:v}=QG(i,n,s,w,r);y>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:m,height:v},d=Math.max(d,m),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=qa(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ln(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ln(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ln(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ln(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Gb(e,this),this._draw(),Qb(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=st.color,l=qa(e.rtl,this.left,this.width),c=Bt(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:w}=OT(o,h),y=function(E,T,x){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const $=Ee(x.lineWidth,1);if(r.fillStyle=Ee(x.fillStyle,a),r.lineCap=Ee(x.lineCap,"butt"),r.lineDashOffset=Ee(x.lineDashOffset,0),r.lineJoin=Ee(x.lineJoin,"miter"),r.lineWidth=$,r.strokeStyle=Ee(x.strokeStyle,a),r.setLineDash(Ee(x.lineDash,[])),o.usePointStyle){const M={radius:g*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:$},G=l.xPlus(E,p/2),J=T+d;uO(r,M,G,J,o.pointStyleWidth&&p)}else{const M=T+Math.max((h-g)/2,0),G=l.leftForLtr(E,p),J=Ha(x.borderRadius);r.beginPath(),Object.values(J).some(_e=>_e!==0)?yp(r,{x:G,y:M,w:p,h:g,radius:J}):r.rect(G,M,p,g),r.fill(),$!==0&&r.stroke()}r.restore()},m=function(E,T,x){ml(r,x.text,E,T+w/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},v=this.isHorizontal(),_=this._computeTitleHeight();v?f={x:Ln(s,this.left+u,this.right-i[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:Ln(s,this.top+_+u,this.bottom-n[0].height),line:0},mO(this.ctx,e.textDirection);const I=w+u;this.legendItems.forEach((E,T)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const x=r.measureText(E.text).width,$=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),M=p+d+x;let G=f.x,J=f.y;l.setWidth(this.width),v?T>0&&G+M+u>this.right&&(J=f.y+=I,f.line++,G=f.x=Ln(s,this.left+u,this.right-i[f.line])):T>0&&J+I>this.bottom&&(G=f.x=G+n[f.line].width+u,f.line++,J=f.y=Ln(s,this.top+_+u,this.bottom-n[f.line].height));const _e=l.x(G);if(y(_e,J,E),G=OK($,G+p+d,v?G+M:this.right,e.rtl),m(l.x(G),J,E),v)f.x+=M+u;else if(typeof E.text!="string"){const Je=c.lineHeight;f.y+=AO(E,Je)}else f.y+=I}),yO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Bt(n.font),r=pn(n.padding);if(!n.display)return;const s=qa(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ln(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,w)=>Math.max(g,w.height),0);u=c+Ln(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Ln(a,h,h+d);o.textAlign=s.textAlign(aO(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,ml(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=Bt(e.font),i=pn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Tc(e,this.left,this.right)&&Tc(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Tc(e,r.left,r.left+r.width)&&Tc(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!JG(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=GG(r,i);r&&!s&&Ae(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ae(n.onHover,[e,i,this],this)}else i&&Ae(n.onClick,[e,i,this],this)}}function QG(t,e,n,i,r){const s=YG(i,t,e,n),o=XG(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function YG(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function XG(t,e,n){let i=t;return typeof e.text!="string"&&(i=AO(e,n)),i}function AO(t,e){const n=t.text?t.text.length+.5:0;return e*n}function JG(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var DO={id:"legend",_element:MT,start(t,e,n){const i=t.legend=new MT({ctx:t.ctx,options:n,chart:t});Yr.configure(t,i,n),Yr.addBox(t,i)},stop(t){Yr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Yr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=pn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Cc={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=xK(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Si(t,e){return e&&(nt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Zi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function ZG(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function LT(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Bt(e.bodyFont),c=Bt(e.titleFont),u=Bt(e.footerFont),h=s.length,d=r.length,f=i.length,p=pn(e.padding);let g=p.height,w=0,y=i.reduce((_,I)=>_+I.before.length+I.lines.length+I.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*_+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const v=function(_){w=Math.max(w,n.measureText(_).width+m)};return n.save(),n.font=c.string,Te(t.title,v),n.font=l.string,Te(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,Te(i,_=>{Te(_.before,v),Te(_.lines,v),Te(_.after,v)}),m=0,n.font=u.string,Te(t.footer,v),n.restore(),w+=p.width,{width:w,height:g}}function e7(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function t7(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function n7(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),t7(c,t,e,n)&&(c="center"),c}function FT(t,e,n){const i=n.yAlign||e.yAlign||e7(t,n);return{xAlign:n.xAlign||e.xAlign||n7(t,e,n,i),yAlign:i}}function i7(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function r7(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function $T(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ha(o);let p=i7(e,a);const g=r7(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+r:a==="right"&&(p+=Math.max(h,f)+r),{x:ii(p,0,i.width-e.width),y:ii(g,0,i.height-e.height)}}function Id(t,e,n){const i=pn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function UT(t){return Si([],Zi(t))}function s7(t,e,n){return Zo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function VT(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const RO={beforeTitle:Xi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Xi,beforeBody:Xi,beforeLabel:Xi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ge(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xi,afterBody:Xi,beforeFooter:Xi,footer:Xi,afterFooter:Xi};function _n(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?RO[e].call(n,i):r}class Sw extends jo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new vO(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=s7(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=_n(i,"beforeTitle",this,e),s=_n(i,"title",this,e),o=_n(i,"afterTitle",this,e);let a=[];return a=Si(a,Zi(r)),a=Si(a,Zi(s)),a=Si(a,Zi(o)),a}getBeforeBody(e,n){return UT(_n(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Te(e,s=>{const o={before:[],lines:[],after:[]},a=VT(i,s);Si(o.before,Zi(_n(a,"beforeLabel",this,s))),Si(o.lines,_n(a,"label",this,s)),Si(o.after,Zi(_n(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return UT(_n(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=_n(i,"beforeFooter",this,e),s=_n(i,"footer",this,e),o=_n(i,"afterFooter",this,e);let a=[];return a=Si(a,Zi(r)),a=Si(a,Zi(s)),a=Si(a,Zi(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(ZG(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Te(a,u=>{const h=VT(e.callbacks,u);r.push(_n(h,"labelColor",this,u)),s.push(_n(h,"labelPointStyle",this,u)),o.push(_n(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Cc[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=LT(this,i),c=Object.assign({},a,l),u=FT(this.chart,i,c),h=$T(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Ha(a),{x:d,y:f}=e,{width:p,height:g}=n;let w,y,m,v,_,I;return s==="center"?(_=f+g/2,r==="left"?(w=d,y=w-o,v=_+o,I=_-o):(w=d+p,y=w+o,v=_-o,I=_+o),m=w):(r==="left"?y=d+Math.max(l,u)+o:r==="right"?y=d+p-Math.max(c,h)-o:y=this.caretX,s==="top"?(v=f,_=v-o,w=y-o,m=y+o):(v=f+g,_=v+o,w=y+o,m=y-o),I=v),{x1:w,x2:y,x3:m,y1:v,y2:_,y3:I}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=qa(i.rtl,this.x,this.width);for(e.x=Id(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Bt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Bt(s.bodyFont),h=Id(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=r.leftForLtr(d,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,iT(e,g,w,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,iT(e,g,w,y)}else{e.lineWidth=be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=r.leftForLtr(d,c),w=r.leftForLtr(r.xPlus(d,1),c-2),y=Ha(o.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,yp(e,{x:g,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),yp(e,{x:w,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Bt(i.bodyFont);let d=h.lineHeight,f=0;const p=qa(i.rtl,this.x,this.width),g=function(x){n.fillText(x,p.x(e.x+f),e.y+d/2),e.y+=d+s},w=p.textAlign(o);let y,m,v,_,I,E,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Id(this,w,i),n.fillStyle=i.bodyColor,Te(this.beforeBody,g),f=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,E=r.length;_<E;++_){for(y=r[_],m=this.labelTextColors[_],n.fillStyle=m,Te(y.before,g),v=y.lines,a&&v.length&&(this._drawColorBox(n,e,_,p,i),d=Math.max(h.lineHeight,l)),I=0,T=v.length;I<T;++I)g(v[I]),d=h.lineHeight;Te(y.after,g)}f=0,d=h.lineHeight,Te(this.afterBody,g),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=qa(i.rtl,this.x,this.width);for(e.x=Id(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Bt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Ha(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Cc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=LT(this,e),l=Object.assign({},o,this._size),c=FT(n,e,l),u=$T(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=pn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),mO(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),yO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!cp(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!cp(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n;const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Cc[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}Y(Sw,"positioners",Cc);var PO={id:"tooltip",_element:Sw,positioners:Cc,afterInit(t,e,n){n&&(t.tooltip=new Sw({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:RO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function o7(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:g,max:w}=e,y=!Ge(o),m=!Ge(a),v=!Ge(c),_=(w-g)/(h+1);let I=Q1((w-g)/p/f)*f,E,T,x,$;if(I<1e-14&&!y&&!m)return[{value:g},{value:w}];$=Math.ceil(w/I)-Math.floor(g/I),$>p&&(I=Q1($*I/p/f)*f),Ge(l)||(E=Math.pow(10,l),I=Math.ceil(I*E)/E),r==="ticks"?(T=Math.floor(g/I)*I,x=Math.ceil(w/I)*I):(T=g,x=w),y&&m&&s&&kK((a-o)/s,I/1e3)?($=Math.round(Math.min((a-o)/I,u)),I=(a-o)/$,T=o,x=a):v?(T=y?o:T,x=m?a:x,$=c-1,I=(x-T)/$):($=(x-T)/I,Yd($,Math.round($),I/1e3)?$=Math.round($):$=Math.ceil($));const M=Math.max(Y1(I),Y1(T));E=Math.pow(10,Ge(l)?M:l),T=Math.round(T*E)/E,x=Math.round(x*E)/E;let G=0;for(y&&(d&&T!==o?(n.push({value:o}),T<o&&G++,Yd(Math.round((T+G*I)*E)/E,o,BT(o,_,t))&&G++):T<o&&G++);G<$;++G){const J=Math.round((T+G*I)*E)/E;if(m&&J>a)break;n.push({value:J})}return m&&d&&x!==a?n.length&&Yd(n[n.length-1].value,a,BT(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!m||x===a)&&n.push({value:x}),n}function BT(t,e,{horizontal:n,minRotation:i}){const r=Ui(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class bp extends Vl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=fp(r),c=fp(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=o7(r,s);return e.bounds==="ticks"&&nO(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return zg(e,this.chart.options.locale,this.options.ticks.format)}}class zT extends bp{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=At(e)?e:0,this.max=At(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ui(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(zT,"id","linear"),Y(zT,"defaults",{ticks:{callback:jg.formatters.numeric}});const Ju=t=>Math.floor(Qr(t)),js=(t,e)=>Math.pow(10,Ju(t)+e);function jT(t){return t/Math.pow(10,Ju(t))===1}function WT(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function a7(t,e){const n=e-t;let i=Ju(n);for(;WT(t,e,i)>10;)i++;for(;WT(t,e,i)<10;)i--;return Math.min(i,Ju(t))}function l7(t,{min:e,max:n}){e=Fn(t.min,e);const i=[],r=Ju(e);let s=a7(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=Fn(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:jT(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=Fn(t.max,d);return i.push({value:f,major:jT(f),significand:h}),i}class HT extends Vl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=bp.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return At(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=At(e)?Math.max(0,e):null,this.max=At(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!At(this._userMin)&&(this.min=e===js(this.min,0)?js(this.min,-1):js(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(js(i,-1)),o(js(r,1)))),i<=0&&s(js(r,-1)),r<=0&&o(js(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=l7(n,this);return e.bounds==="ticks"&&nO(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":zg(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Qr(e),this._valueRange=Qr(this.max)-Qr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Qr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Y(HT,"id","logarithmic"),Y(HT,"defaults",{ticks:{callback:jg.formatters.logarithmic,major:{enabled:!0}}});function Tw(t){const e=t.ticks;if(e.display&&t.display){const n=pn(e.backdropPadding);return Ee(e.font&&e.font.size,st.font.size)+n.height}return 0}function c7(t,e,n){return n=nt(n)?n:[n],{w:WK(t,e.string,n),h:n.length*e.lineHeight}}function qT(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function u7(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Et/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),h=Bt(c.font),d=c7(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=xi(t.getIndexAngle(l)+a),p=Math.round(qb(f)),g=qT(p,u.x,d.w,0,180),w=qT(p,u.y,d.h,90,270);h7(n,e,f,g,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=p7(t,i,r)}function h7(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function d7(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(qb(xi(l.angle+rt))),u=y7(l.y,a.h,c),h=g7(c),d=m7(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function f7(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Ca({x:n,y:i},e)||Ca({x:n,y:s},e)||Ca({x:r,y:i},e)||Ca({x:r,y:s},e))}function p7(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Tw(s)/2,additionalAngle:o?Et/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const h=d7(t,u,l);i.push(h),a==="auto"&&(h.visible=f7(h,c),h.visible&&(c=h))}return i}function g7(t){return t===0||t===180?"center":t<180?"left":"right"}function m7(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function y7(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function v7(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ge(a)){const l=Ha(e.borderRadius),c=pn(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),yp(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function w7(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));v7(n,o,s);const a=Bt(o.font),{x:l,y:c,textAlign:u}=s;ml(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function NO(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,it);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function _7(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),NO(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function b7(t,e,n){return Zo(t,{label:n,index:e,type:"pointLabel"})}class Ed extends bp{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=pn(Tw(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=At(e)&&!isNaN(e)?e:0,this.max=At(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Tw(this.options))}generateTickLabels(e){bp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Ae(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?u7(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=it/(this._pointLabels.length||1),i=this.options.startAngle||0;return xi(e*n+Ui(i))}getDistanceFromCenterForValue(e){if(Ge(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Ge(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return b7(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-rt+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),NO(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&w7(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),p=s.setContext(d);_7(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=Bt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=pn(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}ml(e,a.label,0,-s,u,{color:c.color})}),e.restore()}drawTitle(){}}Y(Ed,"id","radialLinear"),Y(Ed,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:jg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Y(Ed,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Y(Ed,"descriptors",{angleLines:{_fallback:"grid"}});const Hg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sn=Object.keys(Hg);function I7(t,e){return t-e}function KT(t,e){if(Ge(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),At(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(pp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function GT(t,e,n,i){const r=Sn.length;for(let s=Sn.indexOf(t);s<r-1;++s){const o=Hg[Sn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Sn[s]}return Sn[r-1]}function E7(t,e,n,i,r){for(let s=Sn.length-1;s>=Sn.indexOf(n);s--){const o=Sn[s];if(Hg[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Sn[n?Sn.indexOf(n):0]}function S7(t){for(let e=Sn.indexOf(t)+1,n=Sn.length;e<n;++e)if(Hg[Sn[e]].common)return Sn[e]}function QT(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=Kb(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function T7(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function YT(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:T7(t,i,r,n)}class Ip extends Vl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new N8._date(e.adapters.date);r.init(n),Yc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:KT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=At(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=At(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=DK(r,s,o);return this._unit=n.unit||(i.autoSkip?GT(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):E7(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:S7(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),YT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ii(n,0,o),i=ii(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||GT(s.minUnit,n,i,this._getLabelCapacity(n)),a=Ee(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=pp(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)QT(u,d,p);return(d===i||r.bounds==="ticks"||f===1)&&QT(u,d,p),Object.keys(u).sort((g,w)=>g-w).map(g=>+g)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ae(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Ui(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,YT(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(KT(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PK(e.sort(I7))}}Y(Ip,"id","time"),Y(Ip,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Sd(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=ww(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=ww(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class XT extends Ip{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sd(n,this.min),this._tableRange=Sd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Sd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Sd(this._table,i*this._tableRange+this._minPos,!0)}}Y(XT,"id","timeseries"),Y(XT,"defaults",Ip.defaults);const OO="label";function JT(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function k7(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function MO(t,e){t.labels=e}function LO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:OO;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function x7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OO;const n={labels:[],datasets:[]};return MO(n,t.labels),LO(n,t.datasets,e),n}function C7(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=b.useRef(null),p=b.useRef(),g=()=>{f.current&&(p.current=new Oh(f.current,{type:o,data:x7(a,s),options:l&&{...l},plugins:c}),JT(e,p.current))},w=()=>{JT(e,null),p.current&&(p.current.destroy(),p.current=null)};return b.useEffect(()=>{!r&&p.current&&l&&k7(p.current,l)},[r,l]),b.useEffect(()=>{!r&&p.current&&MO(p.current.config.data,a.labels)},[r,a.labels]),b.useEffect(()=>{!r&&p.current&&a.datasets&&LO(p.current.config.data,a.datasets,s)},[r,a.datasets]),b.useEffect(()=>{p.current&&(r?(w(),setTimeout(g)):p.current.update(h))},[r,l,a.labels,a.datasets,h]),b.useEffect(()=>{p.current&&(w(),setTimeout(g))},[o]),b.useEffect(()=>(g(),()=>w()),[]),Oi.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},d),u)}const A7=b.forwardRef(C7);function D7(t,e){return Oh.register(e),b.forwardRef((n,i)=>Oi.createElement(A7,Object.assign({},n,{ref:i,type:t})))}const FO=D7("pie",bw);Oh.register(Aa,PO,DO);const R7=t=>{const e=t.option,n=e.ingredients,i=t.tryMealOption;var r=0,s=0,o=0,a=0;n.forEach(p=>{r+=p.calories,s+=p.macros.carbs,o+=p.macros.protein,a+=p.macros.fat});var l=["carbs","proteins","fats"];const u={labels:l,datasets:[{label:"# of Calories",data:[s,o,a],backgroundColor:["#245dff","#e0c342","#ff4766"],borderColor:"black",borderWidth:1}]},h={plugins:{legend:{labels:{font:{size:15}},position:"right"}}},d=n.map((p,g)=>N(YN,{ingredient:p},g)),f=p=>{var g={},w=0,y=0,m=0,v=0;n.forEach(_=>{w+=_.calories,y+=_.macros.carbs,m+=_.macros.protein,v+=_.macros.fat}),p.target.checked?(console.log("checked"),g.calories=w,g.carbohydrates=y,g.protein=m,g.fat=v,g.name=e.name):p.target.checked||console.log("unchecked"),i(g)};return X("div",{className:"block",children:[X("div",{className:"block-title",children:[N("h1",{children:e.name}),N("input",{id:"mealCheckBox",type:"checkbox",onChange:f})]}),N("div",{className:"spacer"}),X("h2",{className:"total-calories",style:{fontSize:"16px"},children:["-- Total Calories: ",r," kcal. --"]}),N("div",{className:"spacer"}),N("div",{className:"block-content",children:N("div",{className:"strings",children:d})}),N("div",{className:"ingredient-Composition-Chart",children:N(FO,{data:u,options:h})})]})};function $O(t){var e=b.useRef(t);return b.useEffect(function(){e.current=t},[t]),e}function kw(t){var e=$O(t);return b.useCallback(function(){return e.current&&e.current.apply(e,arguments)},[e])}function P7(t,e){var n=b.useRef(!0);b.useEffect(function(){if(n.current){n.current=!1;return}return t()},e)}function N7(){var t=b.useRef(!0),e=b.useRef(function(){return t.current});return b.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e.current}function O7(t){var e=b.useRef(t);return e.current=t,e}function M7(t){var e=O7(t);b.useEffect(function(){return function(){return e.current()}},[])}var xw=Math.pow(2,31)-1;function UO(t,e,n){var i=n-Date.now();t.current=i<=xw?setTimeout(e,i):setTimeout(function(){return UO(t,e,n)},xw)}function L7(){var t=N7(),e=b.useRef();return M7(function(){return clearTimeout(e.current)}),b.useMemo(function(){var n=function(){return clearTimeout(e.current)};function i(r,s){s===void 0&&(s=0),t()&&(n(),s<=xw?e.current=setTimeout(r,s):UO(e,r,Date.now()+s))}return{set:i,clear:n}},[])}const F7=["as","disabled"];function $7(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function U7(t){return!t||t.trim()==="#"}function VO({tagName:t,disabled:e,href:n,target:i,rel:r,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||i!=null||r!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=d=>{if((e||t==="a"&&U7(n))&&d.preventDefault(),e){d.stopPropagation();return}o==null||o(d)},h=d=>{d.key===" "&&(d.preventDefault(),u(d))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:u,onKeyDown:h},c]}const V7=b.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=$7(t,F7);const[s,{tagName:o}]=VO(Object.assign({tagName:n,disabled:i},r));return N(o,Object.assign({},r,s,{ref:e}))});V7.displayName="Button";const B7=["onKeyDown"];function z7(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function j7(t){return!t||t.trim()==="#"}const BO=b.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=z7(t,B7);const[r]=VO(Object.assign({tagName:"a"},i)),s=kw(o=>{r.onKeyDown(o),n==null||n(o)});return j7(i.href)||i.role==="button"?N("a",Object.assign({ref:e},i,r,{onKeyDown:s})):N("a",Object.assign({ref:e},i,{onKeyDown:n}))});BO.displayName="Anchor";const ZT=BO;var Cw={},W7={get exports(){return Cw},set exports(t){Cw=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&i.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&i.push(l)}}}return i.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(W7);const eu=Cw;function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Aw.apply(this,arguments)}function zO(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ek(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function H7(t){var e=q7(t,"string");return typeof e=="symbol"?e:String(e)}function q7(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K7(t,e,n){var i=b.useRef(t!==void 0),r=b.useState(e),s=r[0],o=r[1],a=t!==void 0,l=i.current;return i.current=a,!a&&l&&s!==e&&o(e),[a?t:s,b.useCallback(function(c){for(var u=arguments.length,h=new Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];n&&n.apply(void 0,[c].concat(h)),o(c)},[n])]}function G7(t,e){return Object.keys(e).reduce(function(n,i){var r,s=n,o=s[ek(i)],a=s[i],l=zO(s,[ek(i),i].map(H7)),c=e[i],u=K7(a,o,t[c]),h=u[0],d=u[1];return Aw({},l,(r={},r[i]=h,r[c]=d,r))},t)}function Dw(t,e){return Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Dw(t,e)}function Q7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dw(t,e)}var Y7=/-(.)/g;function X7(t){return t.replace(Y7,function(e,n){return n.toUpperCase()})}const J7=["xxl","xl","lg","md","sm","xs"],Z7="xs",jO=b.createContext({prefixes:{},breakpoints:J7,minBreakpoint:Z7});function nI(t,e){const{prefixes:n}=b.useContext(jO);return t||n[e]||e}function eQ(){const{dir:t}=b.useContext(jO);return t==="rtl"}const tQ=t=>t[0].toUpperCase()+X7(t).slice(1);function nQ(t,{displayName:e=tQ(t),Component:n,defaultProps:i}={}){const r=b.forwardRef(({className:s,bsPrefix:o,as:a=n||"div",...l},c)=>{const u={...i,...l},h=nI(o,t);return N(a,{ref:c,className:eu(s,h),...u})});return r.displayName=e,r}const iQ=nQ("carousel-caption"),WO=b.forwardRef(({as:t="div",bsPrefix:e,className:n,...i},r)=>{const s=eu(n,nI(e,"carousel-item"));return N(t,{ref:r,...i,className:s})});WO.displayName="CarouselItem";function tk(t,e){let n=0;return b.Children.map(t,i=>b.isValidElement(i)?e(i,n++):i)}function rQ(t,e){let n=0;b.Children.forEach(t,i=>{b.isValidElement(i)&&e(i,n++)})}function sQ(t){return t&&t.ownerDocument||document}function oQ(t){var e=sQ(t);return e&&e.defaultView||window}function aQ(t,e){return oQ(t).getComputedStyle(t,e)}var lQ=/([A-Z])/g;function cQ(t){return t.replace(lQ,"-$1").toLowerCase()}var uQ=/^ms-/;function Td(t){return cQ(t).replace(uQ,"-ms-")}var hQ=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function dQ(t){return!!(t&&hQ.test(t))}function HO(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Td(e))||aQ(t).getPropertyValue(Td(e));Object.keys(e).forEach(function(r){var s=e[r];!s&&s!==0?t.style.removeProperty(Td(r)):dQ(r)?i+=r+"("+s+") ":n+=Td(r)+": "+s+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}const fQ=!!(typeof window<"u"&&window.document&&window.document.createElement);var Rw=!1,Pw=!1;try{var gy={get passive(){return Rw=!0},get once(){return Pw=Rw=!0}};fQ&&(window.addEventListener("test",gy,gy),window.removeEventListener("test",gy,!0))}catch{}function pQ(t,e,n,i){if(i&&typeof i!="boolean"&&!Pw){var r=i.once,s=i.capture,o=n;!Pw&&r&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,Rw?i:s)}t.addEventListener(e,n,i)}function gQ(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function qO(t,e,n,i){return pQ(t,e,n,i),function(){gQ(t,e,n,i)}}function mQ(t,e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function yQ(t){var e=HO(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function vQ(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||mQ(t,"transitionend",!0)},e+n),s=qO(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function wQ(t,e,n,i){n==null&&(n=yQ(t)||0);var r=vQ(t,n,i),s=qO(t,"transitionend",e);return function(){r(),s()}}function nk(t,e){const n=HO(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function _Q(t,e){const n=nk(t,"transitionDuration"),i=nk(t,"transitionDelay"),r=wQ(t,s=>{s.target===t&&(r(),e(s))},n+i)}function bQ(t){t.offsetHeight}const ik={disabled:!1},KO=Oi.createContext(null);var IQ=function(e){return e.scrollTop},Ac="unmounted",Qs="exited",Ys="entering",fa="entered",Nw="exiting",Dr=function(t){Q7(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?a?(l=Qs,s.appearStatus=Ys):l=fa:i.unmountOnExit||i.mountOnEnter?l=Ac:l=Qs,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===Ac?{status:Qs}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Ys&&o!==fa&&(s=Ys):(o===Ys||o===fa)&&(s=Nw)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===Ys){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:gc.findDOMNode(this);o&&IQ(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qs&&this.setState({status:Ac})},n.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[gc.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!r&&!o||ik.disabled){this.safeSetState({status:fa},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Ys},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:fa},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:gc.findDOMNode(this);if(!s||ik.disabled){this.safeSetState({status:Qs},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Nw},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Qs},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:gc.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Ac)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=zO(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Oi.createElement(KO.Provider,{value:null},typeof o=="function"?o(r,a):Oi.cloneElement(Oi.Children.only(o),a))},e}(Oi.Component);Dr.contextType=KO;Dr.propTypes={};function ca(){}Dr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ca,onEntering:ca,onEntered:ca,onExit:ca,onExiting:ca,onExited:ca};Dr.UNMOUNTED=Ac;Dr.EXITED=Qs;Dr.ENTERING=Ys;Dr.ENTERED=fa;Dr.EXITING=Nw;var rk=function(e){return!e||typeof e=="function"?e:function(n){e.current=n}};function EQ(t,e){var n=rk(t),i=rk(e);return function(r){n&&n(r),i&&i(r)}}function SQ(t,e){return b.useMemo(function(){return EQ(t,e)},[t,e])}function TQ(t){return t&&"setState"in t?gc.findDOMNode(t):t??null}const kQ=Oi.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:s,addEndListener:o,children:a,childRef:l,...c},u)=>{const h=b.useRef(null),d=SQ(h,l),f=E=>{d(TQ(E))},p=E=>T=>{E&&h.current&&E(h.current,T)},g=b.useCallback(p(t),[t]),w=b.useCallback(p(e),[e]),y=b.useCallback(p(n),[n]),m=b.useCallback(p(i),[i]),v=b.useCallback(p(r),[r]),_=b.useCallback(p(s),[s]),I=b.useCallback(p(o),[o]);return N(Dr,{ref:u,...c,onEnter:g,onEntered:y,onEntering:w,onExit:m,onExited:_,onExiting:v,addEndListener:I,nodeRef:h,children:typeof a=="function"?(E,T)=>a(E,{...T,ref:f}):Oi.cloneElement(a,{ref:f})})}),xQ=40;function CQ(t){if(!t||!t.style||!t.parentNode||!t.parentNode.style)return!1;const e=getComputedStyle(t);return e.display!=="none"&&e.visibility!=="hidden"&&getComputedStyle(t.parentNode).display!=="none"}const GO=b.forwardRef(({defaultActiveIndex:t=0,...e},n)=>{const{as:i="div",bsPrefix:r,slide:s=!0,fade:o=!1,controls:a=!0,indicators:l=!0,indicatorLabels:c=[],activeIndex:u,onSelect:h,onSlide:d,onSlid:f,interval:p=5e3,keyboard:g=!0,onKeyDown:w,pause:y="hover",onMouseOver:m,onMouseOut:v,wrap:_=!0,touch:I=!0,onTouchStart:E,onTouchMove:T,onTouchEnd:x,prevIcon:$=N("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:M="Previous",nextIcon:G=N("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:J="Next",variant:_e,className:Je,children:se,...fe}=G7({defaultActiveIndex:t,...e},{activeIndex:"onSelect"}),ie=nI(r,"carousel"),O=eQ(),V=b.useRef(null),[K,ue]=b.useState("next"),[Ie,lt]=b.useState(!1),[Ve,Pe]=b.useState(!1),[R,re]=b.useState(u||0);b.useEffect(()=>{!Ve&&u!==R&&(V.current?ue(V.current):ue((u||0)>R?"next":"prev"),s&&Pe(!0),re(u||0))},[u,Ve,R,s]),b.useEffect(()=>{V.current&&(V.current=null)});let ee=0,Be;rQ(se,(Q,pe)=>{++ee,pe===u&&(Be=Q.props.interval)});const Ne=$O(Be),Oe=b.useCallback(Q=>{if(Ve)return;let pe=R-1;if(pe<0){if(!_)return;pe=ee-1}V.current="prev",h==null||h(pe,Q)},[Ve,R,h,_,ee]),Se=kw(Q=>{if(Ve)return;let pe=R+1;if(pe>=ee){if(!_)return;pe=0}V.current="next",h==null||h(pe,Q)}),pt=b.useRef();b.useImperativeHandle(n,()=>({element:pt.current,prev:Oe,next:Se}));const On=kw(()=>{!document.hidden&&CQ(pt.current)&&(O?Oe():Se())}),rn=K==="next"?"start":"end";P7(()=>{s||(d==null||d(R,rn),f==null||f(R,rn))},[R]);const Mn=`${ie}-item-${K}`,li=`${ie}-item-${rn}`,sn=b.useCallback(Q=>{bQ(Q),d==null||d(R,rn)},[d,R,rn]),ea=b.useCallback(()=>{Pe(!1),f==null||f(R,rn)},[f,R,rn]),j=b.useCallback(Q=>{if(g&&!/input|textarea/i.test(Q.target.tagName))switch(Q.key){case"ArrowLeft":Q.preventDefault(),O?Se(Q):Oe(Q);return;case"ArrowRight":Q.preventDefault(),O?Oe(Q):Se(Q);return}w==null||w(Q)},[g,w,Oe,Se,O]),ae=b.useCallback(Q=>{y==="hover"&&lt(!0),m==null||m(Q)},[y,m]),he=b.useCallback(Q=>{lt(!1),v==null||v(Q)},[v]),de=b.useRef(0),oe=b.useRef(0),Ze=L7(),yn=b.useCallback(Q=>{de.current=Q.touches[0].clientX,oe.current=0,y==="hover"&&lt(!0),E==null||E(Q)},[y,E]),vn=b.useCallback(Q=>{Q.touches&&Q.touches.length>1?oe.current=0:oe.current=Q.touches[0].clientX-de.current,T==null||T(Q)},[T]),Ls=b.useCallback(Q=>{if(I){const pe=oe.current;Math.abs(pe)>xQ&&(pe>0?Oe(Q):Se(Q))}y==="hover"&&Ze.set(()=>{lt(!1)},p||void 0),x==null||x(Q)},[I,y,Oe,Se,Ze,p,x]),ze=p!=null&&!Ie&&!Ve,Tt=b.useRef();b.useEffect(()=>{var Q,pe;if(!ze)return;const on=O?Oe:Se;return Tt.current=window.setInterval(document.visibilityState?On:on,(Q=(pe=Ne.current)!=null?pe:p)!=null?Q:void 0),()=>{Tt.current!==null&&clearInterval(Tt.current)}},[ze,Oe,Se,Ne,p,On,O]);const wn=b.useMemo(()=>l&&Array.from({length:ee},(Q,pe)=>on=>{h==null||h(pe,on)}),[l,ee,h]);return X(i,{ref:pt,...fe,onKeyDown:j,onMouseOver:ae,onMouseOut:he,onTouchStart:yn,onTouchMove:vn,onTouchEnd:Ls,className:eu(Je,ie,s&&"slide",o&&`${ie}-fade`,_e&&`${ie}-${_e}`),children:[l&&N("div",{className:`${ie}-indicators`,children:tk(se,(Q,pe)=>N("button",{type:"button","data-bs-target":"","aria-label":c!=null&&c.length?c[pe]:`Slide ${pe+1}`,className:pe===R?"active":void 0,onClick:wn?wn[pe]:void 0,"aria-current":pe===R},pe))}),N("div",{className:`${ie}-inner`,children:tk(se,(Q,pe)=>{const on=pe===R;return s?N(kQ,{in:on,onEnter:on?sn:void 0,onEntered:on?ea:void 0,addEndListener:_Q,children:(ci,Fs)=>b.cloneElement(Q,{...Fs,className:eu(Q.props.className,on&&ci!=="entered"&&Mn,(ci==="entered"||ci==="exiting")&&"active",(ci==="entering"||ci==="exiting")&&li)})}):b.cloneElement(Q,{className:eu(Q.props.className,on&&"active")})})}),a&&X(bM,{children:[(_||u!==0)&&X(ZT,{className:`${ie}-control-prev`,onClick:Oe,children:[$,M&&N("span",{className:"visually-hidden",children:M})]}),(_||u!==ee-1)&&X(ZT,{className:`${ie}-control-next`,onClick:Se,children:[G,J&&N("span",{className:"visually-hidden",children:J})]})]})]})});GO.displayName="Carousel";const my=Object.assign(GO,{Caption:iQ,Item:WO}),AQ=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(0),[r,s]=b.useState(0),[o,a]=b.useState(0),[l,c]=b.useState(0),[u,h]=b.useState([]),[d,f]=b.useState([]),[p,g]=b.useState([]),[w,y]=b.useState({}),[m,v]=b.useState(!1),[_,I]=b.useState([]);b.useState(LH),b.useState([]);const[E,T]=b.useState([]),[x,$]=b.useState([]),[M,G]=b.useState(),[J,_e]=b.useState(!1),[Je,se]=b.useState(0),[fe,ie]=b.useState(!1),[O,V]=b.useState(!1),[K,ue]=b.useState(),[Ie,lt]=b.useState("submit"),Ve=Bg();b.useEffect(()=>{async function j(){const ae=localStorage.getItem("email"),he=ti(Yn,"users",ae);(await Bu(he)).data()==null&&(console.log("User not found"),Ve("/login"),window.location.reload())}j()},[]);const Pe={carbohydrates:"#245dff",protein:"#e0c342",fat:"#ff4766"},R=j=>j==null?0:parseFloat(parseFloat(j).toFixed(2)),re=(j,ae,he)=>{if(j==null)return 0;var de=parseFloat(j)+parseFloat(ae)+parseFloat(he),oe=j/de*100;return parseFloat(parseFloat(oe).toFixed(0))},ee=async()=>{console.log("FETCHING DATA FROM FIREBASE");const j=localStorage.getItem("email");try{const de=(await Qc(Ni(Yn,"AlamData"))).docs.map(Gn=>Gn.data()),Ze=(await Qc(Ni(Yn,"users",j,"all_meals"))).docs.map(Gn=>Gn.data()),vn=(await Qc(Ni(Yn,"users",j,"logged_meals"))).docs.map(Gn=>Gn.data()),Ls=Intl.DateTimeFormat().resolvedOptions().timeZone,ze=new Date().toLocaleDateString("en-US",{timeZone:Ls}),[Tt,wn,Q]=ze.split("/"),pe=`${Q}-${Tt.padStart(2,"0")}-${wn.padStart(2,"0")}`;let on=0,ci=0,Fs=0,$s=0;const ta=[];if(vn.forEach(Gn=>{if(Gn.datestamp===pe){ta.push(Gn),console.log("today",ta);const QO=Gn.totalcalories;on+=QO,ci+=Gn.totalmacros.protein,Fs+=Gn.totalmacros.fat,$s+=Gn.totalmacros.carbs}}),h(ta),ci!=0&&Fs!=0&&$s!=0){var ae=[["Type","Item"],["Protein",ci],["Fat",Fs],["Carbohydrates",$s]];g(ae),f(ae)}return{allMeals:Ze,totalCaloriesSum:on,AlamMeals:de}}catch(he){console.log(he)}},Be=(j,ae,he)=>{var de=[];console.log("Daily Calories"),console.log(M);const oe=M-ae;console.log("alam data",he),Array.isArray(j)&&(j.length<5?he.forEach(ze=>{ze.totalcalories<=oe+300&&de.push(ze)}):(console.log("allmeals",j),console.log(oe),j.forEach(ze=>{ze.totalcalories<=oe&&de.push(ze)}),console.log("valid",de)));function Ze(ze){for(let Tt=ze.length-1;Tt>0;Tt--){const wn=Math.floor(Math.random()*(Tt+1));[ze[Tt],ze[wn]]=[ze[wn],ze[Tt]]}return ze}function yn(ze){let Tt=[];for(let wn=0;wn<ze.length;wn++){let Q=!1;for(let pe=0;pe<Tt.length;pe++)ze[wn].name.toLowerCase()===Tt[pe].name.toLowerCase()&&(Q=!0);Q||Tt.push(ze[wn])}return Tt}de=yn(de);const Ls=Ze(de).slice(0,3);T(Ls),I(E)},Ne=(j,ae)=>{console.log("Carousel is changing..."),se(j)},Oe=j=>{localStorage.clear(),window.location.reload()},Se=()=>{var j=[["Type","Item"],["Protein",0],["Fat",0],["Carbohydrates",.1]];f(j)},pt=()=>{var j=[["Type","Item"],["Protein",0],["Fat",0],["Carbohydrates",.1]];g(j)};function On(j){console.log("Checking new data input"),console.log(j),console.log(Object.keys(j).length===0);var ae={},he=0,de=0,oe=0,Ze=0,yn=null,vn=n;(vn==null||vn==null)&&(vn=0),Object.keys(j).length===0?(console.log("Changing to old data"),he=p[1][1],de=p[2][1],oe=p[3][1],Ze=vn,_e(!1)):(console.log("Changing to new data"),he=p[1][1]+j.protein,de=p[2][1]+j.fat,oe=p[3][1]+j.carbohydrates,Ze=j.calories+vn,yn=j.name,_e(!0)),ae=[["Type","Item"],["Protein",he],["Fat",de],["Carbohydrates",oe]],console.log("Protein: ",he),console.log("Fat: ",de),console.log("Carbohydrates: ",oe),console.log("Calories: ",Ze),he!=0&&(he=he.toFixed(2)),de!=0&&(de=de.toFixed(2)),oe!=0&&oe!=.1&&(oe=oe.toFixed(2)),Ze!=null&&Ze!=0&&(Ze=Ze.toFixed(2)),a(he),c(de),s(oe),e(Ze),f(ae),(K==null||K==null||K=="")&&ue(yn)}const rn=async()=>{try{v(!0);const j=localStorage.getItem("email"),ae=ti(Yn,"users",j),he=await Bu(ae);if(!he.exists()){console.log("No such document!");return}const de=he.data();if(de.daily_calorie_goal==null){console.log("User daily calorie goal is null");return}console.log("User daily calorie goal: ",de.daily_calorie_goal),G(parseInt(de.daily_calorie_goal))}catch(j){console.log(j)}},Mn=async()=>{if(M==null){console.log("Total daily calories is null");return}try{const j=localStorage.getItem("email"),ae=ti(Yn,"users",j);console.log("Updating data base with calorie goal: ",M);const he=await uw(ae,{daily_calorie_goal:parseInt(M)})}catch(j){console.log(j)}};b.useEffect(()=>{console.log("UDPATING CALORIES GOALS"),Mn(),console.log("CALORIES FINISHED FETCHING"),sn()},[M]);const li={width:"100%",height:"160px",legend:"none",pieSliceText:"none",backgroundColor:"transparent",chartArea:{width:"100%",height:"90%"},slices:{0:{color:Pe.protein},1:{color:Pe.fat},2:{color:Pe.carbohydrates},3:{color:Pe.protein},4:{color:Pe.fat},5:{color:Pe.carbohydrates}}};window.innerWidth<=768&&(li.height="130px",li.chartArea.width="90%");function sn(){d.length==0&&Se(),p.length==0&&pt(),v(!1),ee().then(({allMeals:j,totalCaloriesSum:ae,AlamMeals:he})=>{$(j),Be(j,ae,he)})}b.useEffect(()=>{console.log("ALL MEALS UPDATED"),console.log(x)},[x]),b.useEffect(()=>{rn()},[]),b.useEffect(()=>{console.log("Pie Data Changed"),y({old:p,new:d})},[d,p]),b.useEffect(()=>{console.log("Diffdata Changed"),console.log(w)},[w]),b.useEffect(()=>{if(u.length!=0){var j=0,ae=0,he=0,de=0;u.forEach((oe,Ze)=>{oe.ingredients.forEach((yn,vn)=>{j+=yn.macros.protein,ae+=yn.macros.fat,he+=yn.macros.carbs,de+=yn.calories})})}i(de),e(de),a(j),c(ae),s(he)},[u]),b.useEffect(()=>{I(E)},[E]);async function ea(j,ae){const he=Intl.DateTimeFormat().resolvedOptions().timeZone,de=new Date().toLocaleDateString("en-US",{timeZone:he}),[oe,Ze,yn]=de.split("/"),vn=`${yn}-${oe.padStart(2,"0")}-${Ze.padStart(2,"0")}`,Ls=K,ze=ae.ingredients,Tt=ae.totalcalories,wn=ae.totalmacros,Q=ae.favmeal,pe=localStorage.getItem("email"),on=ti(Yn,"users",pe),ci=Ni(on,"all_meals"),Fs=Ni(on,"logged_meals");ze.forEach(ta=>{ta.servingUnit==null&&(ta.servingUnit="")});const $s={name:Ls,ingredients:ze,totalcalories:Tt,totalmacros:wn,date:vn,favmeal:Q,datestamp:vn};console.log($s),await lt("submitting..."),await zu(ci,$s),await zu(Fs,$s),await ie(!0),await lt("submitted!"),setTimeout(()=>{sn(),ue(""),lt("submit"),_e(!1),ie(!1)},1e3)}return X("div",{className:"homepage",children:[X("div",{className:"upper",children:[X("div",{className:"header",children:[d.length!=0&&p.length!=0?N("div",{id:"calories_and_macro_graph",children:N(Bb,{chartType:"PieChart",diffdata:w,options:li,id:"calories_and_macro_graph"})}):"",X("div",{className:"info",children:[X("div",{className:"info_item",children:[N("h3",{children:"Calories: "}),X("p",{children:[R(t)," kcal"]})]}),X("div",{className:"info_item",children:[N("h3",{style:{color:Pe.carbohydrates},children:"Carbs:"}),X("p",{children:[re(r,l,o)," %"]})]}),X("div",{className:"info_item",children:[N("h3",{style:{color:Pe.fat},children:"Fat: "}),X("p",{children:[re(l,r,o)," %"]})]}),X("div",{className:"info_item",children:[N("h3",{style:{color:Pe.protein},children:"Protein: "}),X("p",{children:[re(o,l,r)," %"]})]})]})]}),N("div",{className:"calorie_goal",children:N("input",{type:"number",value:M||"",placeholder:"Enter Your Calorie Goal Today (kcal)...",onChange:j=>G(j.target.value)})})]}),N("div",{className:"content",children:u.map((j,ae)=>N(Gq,{block:j},ae))}),_.length==0?X("h3",{className:"dinner-recs-heading",children:[" ","No meals available, daily calorie goal exceeded"]}):X("div",{className:"carousel-section",children:[O?"":X("div",{className:"recommendation-section",children:[N("div",{className:"recommendation-seperator"}),N("h3",{className:"dinner-recs-heading",children:" Meal Recommendations:"}),N("input",{type:"text",placeholder:"New Meal Name",value:K||"",onChange:j=>ue(j.target.value)})]}),N(my,{activeIndex:Je,onSelect:Ne,slide:"false",interval:null,touch:"true",children:_.map((j,ae)=>X(my.Item,{children:[N(R7,{option:j,tryMealOption:On},ae),J?N(my.Caption,{children:N("button",{onClick:he=>ea(he,j),className:fe?"slimPossibleSubmitted":"slimPossibleSubmit",children:Ie})}):""]},ae))})]}),N(yw,{className:"exit-app",to:"/login",onClick:Oe,style:{marginTop:"10px"},children:N("img",{className:"add_img"})}),N(yw,{className:"form_add",to:"/form",children:N("img",{id:"add_img"})})]})};Oh.register(Aa,PO,DO);function DQ(){const[t,e]=b.useState(""),[n,i]=b.useState([]),[r,s]=b.useState("7PjqZ2PBp4plWIxuk3AtA6KUTsYooEKx9ospWyLG"),[o,a]=b.useState([]),[l,c]=b.useState(""),[u,h]=b.useState(!1),[d,f]=b.useState([]),[p,g]=b.useState("Submit"),[w,y]=b.useState([]),[m,v]=b.useState([]),[_,I]=b.useState(!1),[E,T]=b.useState({}),[x,$]=b.useState(),[M,G]=b.useState("Add to meal"),J=Bg();b.useEffect(()=>{async function R(){const re=localStorage.getItem("email"),ee=ti(Yn,"users",re);(await Bu(ee)).data()==null&&(console.log("User not found"),J("/login"),window.location.reload())}R()},[]);const _e=()=>{I(!1)},Je=async()=>{const R=localStorage.getItem("email"),ee=await(await Qc(Ni(Yn,"users",R,"all_meals"))).docs.map(Be=>Be.data());console.log("All user meals fetched!"),console.log(ee),y(ee)};w.length==0&&Je();const se=R=>{if(l==""){v([]);return}for(var re=[],ee=0;ee<w.length;ee++){for(var Be=w[ee],Ne=!1,Oe=0;Oe<re.length;Oe++){var Se=re[Oe];if(Se.name==Be.name){Ne=!0;break}}!Ne&&Be.name.toLowerCase().includes(l.toLowerCase())&&re.push(Be)}console.log(re),v(re)};function fe(R){c(R.name),v([]),console.log("Option clicked!"),console.log(R);var re=[];R.ingredients.forEach(ee=>{ee.grams!=null&&ee.grams,re.push({name:ee.name,calories:ee.calories,carbohydrates:ee.macros.carbs,protein:ee.macros.protein,fat:ee.macros.fat,amount:ee.amount,servingUnit:ee.servingUnit,borderColor:{borderColor:O()}})}),console.log("Updating ingredients array..."),a(re),R.favmeal&&h(!0)}const ie=R=>{R.preventDefault(),i([]),f([])},O=()=>"#"+Math.floor(Math.random()*16777215).toString(16),V=()=>{if(t===""){let Ne=[...d],Oe="The search query can't be empty!";Ne.push(Oe),f(Ne);return}console.log("Searching for: "+t);const R=t.split(", "),re=R[0];var ee=R[1];ee==null&&(ee="");const Be=new URLSearchParams({api_key:r,query:re,pageSize:50,pageNumber:1,brandOwner:ee});fetch(`https://api.nal.usda.gov/fdc/v1/foods/search?${Be}`).then(Ne=>Ne.json()).then(Ne=>{console.log(Ne),console.log(Ne.foods),i(Ne.foods)}).catch(Ne=>{console.error("Error fetching data:",Ne)})},K=R=>{e(R.target.value)},ue=()=>{v([])},Ie=(R,re)=>{I(!0),T(re)},lt=()=>{var R=E;T({}),I(!1),G("Add to meal"),$(null);const re=R.description;var ee=0,Be=0,Ne=0,Oe=0;R.foodNutrients.forEach(Mn=>{switch(Mn.nutrientName){case"Energy":ee=Mn.value;break;case"Carbohydrate, by difference":Be=Mn.value;break;case"Protein":Ne=Mn.value;break;case"Total lipid (fat)":Oe=Mn.value;break}});var Se=o,pt=null,On=null;R.servingSizeUnit=="g"||R.servingSizeUnit=="ml"?(pt=R.servingSize*x,On=R.servingSizeUnit):pt=x,console.log(x),console.log(typeof x),console.log(pt),console.log(typeof pt);var rn={name:re,calories:parseFloat((ee*x).toFixed(2)),carbohydrates:parseFloat((Be*x).toFixed(2)),protein:parseFloat((Ne*x).toFixed(2)),fat:parseFloat((Oe*x).toFixed(2)),amount:parseFloat(pt.toFixed(2)),servingUnit:On,borderColor:{borderColor:O()}};Se.push(rn),a(Se),console.log(Se),setTimeout(()=>{i([]),e("")},500)};async function Ve(R){const re=localStorage.getItem("email");if(console.log("Submitting to firebase for user: "+re),l==""){let oe=[...d],Ze="The meal name can't be empty!";oe.push(Ze),f(oe);return}if(!isNaN(l)){let oe=[...d],Ze="The meal name must be a string!";oe.push(Ze),f(oe);return}const ee=l,Be=Intl.DateTimeFormat().resolvedOptions().timeZone,Ne=new Date().toLocaleDateString("en-US",{timeZone:Be}),[Oe,Se,pt]=Ne.split("/"),On=`${pt}-${Oe.padStart(2,"0")}-${Se.padStart(2,"0")}`;for(var rn=[],Mn=0,li={carbs:0,protein:0,fat:0},sn=0;sn<o.length;sn++){var ea="";o[sn].servingUnit!=null&&(ea=o[sn].servingUnit);const oe={name:o[sn].name,macros:{carbs:o[sn].carbohydrates,protein:o[sn].protein,fat:o[sn].fat},amount:o[sn].amount,servingUnit:ea,calories:o[sn].calories};rn.push(oe),Mn+=oe.calories,li.carbs+=oe.macros.carbs,li.protein+=oe.macros.protein,li.fat+=oe.macros.fat}const j={name:ee,ingredients:rn,totalcalories:parseFloat(Mn.toFixed(2)),totalmacros:li,favmeal:u,datestamp:On};parseFloat(Mn.toFixed(2)),console.log("Submitting the following data:"),console.log(j);const ae=ti(Yn,"users",re),he=Ni(ae,"all_meals"),de=Ni(ae,"logged_meals");await g("submitting..."),await zu(he,j),await zu(de,j),await g("submitted!"),await setTimeout(()=>{console.log("Delayed for 1 seconds"),window.location.href="/"},"1000")}var Pe=function(R){return R[0].toUpperCase()+R.slice(1).toLowerCase()};return X("div",{className:"overallForm",children:[_?N("div",{className:"modal-item",children:X("div",{className:"modal-content",children:[N("span",{className:"close",onClick:_e,children:""}),N("h2",{children:E.description}),E.brandOwner?N("h6",{children:E.brandOwner}):"",N("p",{}),E.servingSize&&E.servingSizeUnit?X("p",{children:[E.servingSize," ",E.servingSizeUnit," per serving"]}):N("p",{children:" No serving size/unit data aviailable"}),N("p",{}),N("input",{type:"number",className:"modal-search-input",value:x||"",onChange:R=>$(parseFloat(R.target.value)),placeholder:E.servingSize&&E.servingSizeUnit?"Enter your serving size here":"Enter your amount here"}),X("button",{className:M.toLowerCase()==="Add to meal".toLowerCase()?"slimPossibleSubmit":"slimPossibleSubmitted",onClick:lt,children:[" ",M," "]})]})}):"",d.length>0?d.map((R,re)=>N("p",{style:{color:"red"},children:R},re)):"",N(yw,{className:"ret_home",to:"/",children:N("img",{id:"ret_home_img"})}),X("form",{className:"submitForm",onSubmit:ie,children:[N("button",{className:p.toLowerCase()==="Submit".toLowerCase()?"slimPossibleSubmit":"slimPossibleSubmitted",onClick:Ve,children:p}),N("input",{className:"meal-input",name:"name",placeholder:"Your meal name",onChange:R=>c(R.target.value),onKeyUp:se,value:l,required:!0}),N("div",{id:l===""?"":"dropdown-menu",children:m.map((R,re)=>X("div",{className:"option-meal-suggested",onClick:()=>fe(R),children:[X("div",{children:[" ",R.favmeal?"":""," ",R.name," "]}),X("h4",{children:[" ",R.totalcalories||R.totalcalories," kcal "]})]},re))}),m.length>0?N("button",{className:"option-meal-suggested-close-button",onClick:ue,children:"x"}):"",X("div",{className:"searchBar",children:[N("input",{type:"text","data-testid":"ingredient-search-input",className:"search-input",value:t,onChange:K,placeholder:"Ingredient name, brand name(optional)"}),N("button",{className:"searchIngredient","data-testid":"ingredient-search-button",type:"submit",onClick:V,children:""})]}),X("div",{className:"favMeal",children:[N("p",{children:"  Favourite Meal? "}),N("input",{className:"fav_meal",type:"checkbox",value:u,onChange:R=>h(R.target.checked)})]})]}),N("div",{className:"ingredient-options",children:o.map(R=>X("div",{className:"ingredient-option",style:R.borderColor,children:[X("h2",{children:[R.name,":"]}),X("p",{children:[R.calories," kcal"]})]},R.name))}),N("div",{className:"search-results",children:n.map(function(R){const re=R.foodNutrients,ee=re.reduce((Se,pt)=>Se+pt.value,0);let Be={};for(let Se=0;Se<re.length;Se++){let pt=re[Se].nutrientName,On=re[Se].value;pt=="Protein"&&(Be[pt]=On/ee*1e3),pt=="Total lipid (fat)"&&(Be.Fat=On/ee*100),pt=="Carbohydrate, by difference"&&(Be.Carbohydrate=On/ee*1e3)}const Ne={labels:Object.keys(Be),datasets:[{label:"# of Calories",data:Object.values(Be),backgroundColor:["#e0c342","#ff4766","#245dff"],borderColor:"black",borderWidth:1}]},Oe={plugins:{legend:{labels:{font:{size:15},usePointStyle:!0},position:"right"}}};return X("div",{className:"search-result-card",onClick:Se=>Ie(Se,R),children:[X("div",{className:"src-title",children:[R.brandOwner!=null&&R.brandOwner!=""?N("p",{children:Pe(R.description)}):N("p",{children:Pe(R.description)}),R.brandOwner!=null&&R.brandOwner!=""?N("p",{style:{fontStyle:"italic"},children:R.brandOwner}):""]}),X("h2",{className:"total-calories",style:{fontSize:"16px"},children:["Total Calories: ",Math.floor(ee)]}),N("div",{className:"ingredient-Composition-Chart-form",children:N(FO,{data:Ne,options:Oe})})]},R.fdcId)})})]})}const RQ=()=>{const t=localStorage.getItem("name");return N(Dq,{children:X(Tq,{children:[N(Ec,{path:"/login",element:N($1,{})}),N(Ec,{path:"/form",element:N(DQ,{})}),t?N(Ec,{path:"/",element:N(AQ,{})}):N(Ec,{path:"/",element:N($1,{})})]})})},PQ=yy.createRoot(document.getElementById("root"));PQ.render(N(Oi.StrictMode,{children:N(RQ,{})}));
